<p>Let’s use Imandra to reason about a simple recursive function.</p>

<p>Given an input integer <code class="highlighter-rouge">n</code>, this function sums up the integers from <code class="highlighter-rouge">0</code> to <code class="highlighter-rouge">n</code>.</p>

<p>First, we enable “rational division,” which causes Imandra’s reasoning engine to treat division between integers as exact rational division:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># :rational_div on
</code></pre></div></div>

<p>Whenever we define a recursive function, Imandra must be able to prove that the function is terminating (also called being “total”).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let rec sum(n) =
  if n &lt;= 0 then 0 else n + sum (n-1);;
val sum : int -&gt; int = &lt;fun&gt;
</code></pre></div></div>

<p>This particular function was easy for Imandra to prove totality, but it is worth taking a look at the <code class="highlighter-rouge">:skipterm</code> directive and “termination measures” in case you have a problematic function.</p>

<p>Now that this function is defined, we can compute with it:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># sum 3;;
- : int = 6
# sum 10;;
- : int = 55
# sum 99;;
- : int = 4950
# sum 100;;
- : int = 5050
</code></pre></div></div>

<p>Now, we ask Imandra to verify a key property of the summation function:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># verify gauss (n) =
  n &gt;= 0
    ==&gt;
  sum n = (n * (n+1)) / 2;;

thm gauss = &lt;proved&gt;
</code></pre></div></div>

<p>But what if we had tried to verify something that was false? 
Notice below that we make a mistake, replacing <code class="highlighter-rouge">(n+1)</code> with <code class="highlighter-rouge">(n-1)</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># verify gauss_bad (n) =
  n &gt;= 0
  ==&gt;
  sum n = (n * (n-1)) / 2;;

Counterexample:

{ n = 1; }
</code></pre></div></div>
