<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bin_ser (imandra-base.Imandra_surface.Bin_ser)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">imandra-base</a> &#x00BB; <a href="../index.html">Imandra_surface</a> &#x00BB; Bin_ser</nav><h1>Module <code>Imandra_surface.Bin_ser</code></h1><nav class="toc"><ul><li><a href="#binary-serialization-using-msgpck">Binary serialization using Msgpck</a><ul><li><a href="#key-for-custom-encoder/decoder-definitions">Key for custom encoder/decoder definitions</a></li><li><a href="#state-for-encoding">State for encoding</a></li><li><a href="#encoding">Encoding</a></li><li><a href="#decoding">Decoding</a></li></ul></li></ul></nav></header><section><header><h2 id="binary-serialization-using-msgpck"><a href="#binary-serialization-using-msgpck" class="anchor"></a>Binary serialization using Msgpck</h2></header><dl><dt class="spec type" id="type-iter"><a href="#type-iter" class="anchor"></a><code><span class="keyword">type</span> <span>'a iter</span></code><code> = <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec value" id="val-c"><a href="#val-c" class="anchor"></a><code><span class="keyword">val</span> c : <a href="../../Imandra_util/Debug/Channel/index.html#type-t">Imandra_util.Debug.Channel.t</a></code></dt><dd><p>debug channel</p></dd></dl><div class="spec module" id="module-Fmt"><a href="#module-Fmt" class="anchor"></a><code><span class="keyword">module</span> Fmt = CCFormat</code></div><div class="spec module" id="module-M"><a href="#module-M" class="anchor"></a><code><span class="keyword">module</span> M = Msgpck</code></div><section><header><h3 id="key-for-custom-encoder/decoder-definitions"><a href="#key-for-custom-encoder/decoder-definitions" class="anchor"></a>Key for custom encoder/decoder definitions</h3></header><div class="spec module" id="module-Key"><a href="#module-Key" class="anchor"></a><code><span class="keyword">module</span> <a href="Key/index.html">Key</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-encoder_state"><a href="#type-encoder_state" class="anchor"></a><code><span class="keyword">type</span> encoder_state</code></dt><dt class="spec type" id="type-decoder_state"><a href="#type-decoder_state" class="anchor"></a><code><span class="keyword">type</span> decoder_state</code></dt><dt class="spec type" id="type-def_hook"><a href="#type-def_hook" class="anchor"></a><code><span class="keyword">and</span> <span>('st, 'a) def_hook</span></code><code> = </code><code>{</code><table class="record"><tr id="type-def_hook.h_prefix" class="anchored"><td class="def field"><a href="#type-def_hook.h_prefix" class="anchor"></a><code>h_prefix : string;</code></td></tr><tr id="type-def_hook.h_key" class="anchored"><td class="def field"><a href="#type-def_hook.h_key" class="anchor"></a><code>h_key : <span><span>(<span class="type-var">'st</span>, <span class="type-var">'a</span>)</span> <a href="Key/index.html#type-t">Key.t</a></span>;</code></td></tr><tr id="type-def_hook.h_enc" class="anchored"><td class="def field"><a href="#type-def_hook.h_enc" class="anchor"></a><code>h_enc : <a href="index.html#type-encoder_state">encoder_state</a> <span>&#45;&gt;</span> <a href="Key/index.html#type-univ">Key.univ</a> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t;</code></td></tr><tr id="type-def_hook.h_dec" class="anchored"><td class="def field"><a href="#type-def_hook.h_dec" class="anchor"></a><code>h_dec : <span class="type-var">'st</span> <span>&#45;&gt;</span> <a href="index.html#type-decoder_state">decoder_state</a> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr></table><code>}</code></dt><dd><p>A hook for side definitions of type <code>'a</code> using a given key</p></dd></dl><dl><dt class="spec value" id="val-define_hook"><a href="#val-define_hook" class="anchor"></a><code><span class="keyword">val</span> define_hook : <span><span>(<span class="type-var">'st</span>, <span class="type-var">'a</span>)</span> <a href="index.html#type-def_hook">def_hook</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a decoding hook to all future encoders and decoders.</p></dd></dl></section><section><header><h3 id="state-for-encoding"><a href="#state-for-encoding" class="anchor"></a>State for encoding</h3></header><div class="spec module" id="module-Encoder_state"><a href="#module-Encoder_state" class="anchor"></a><code><span class="keyword">module</span> <a href="Encoder_state/index.html">Encoder_state</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Decoder_state"><a href="#module-Decoder_state" class="anchor"></a><code><span class="keyword">module</span> <a href="Decoder_state/index.html">Decoder_state</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-encoder"><a href="#type-encoder" class="anchor"></a><code><span class="keyword">type</span> <span>'a encoder</span></code><code> = <a href="Encoder_state/index.html#type-t">Encoder_state.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t</code></dt><dt class="spec type" id="type-decoder"><a href="#type-decoder" class="anchor"></a><code><span class="keyword">type</span> <span>'a decoder</span></code><code> = <a href="Decoder_state/index.html#type-t">Decoder_state.t</a> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl></section><section><header><h3 id="encoding"><a href="#encoding" class="anchor"></a>Encoding</h3></header><dl><dt class="spec value" id="val-encode"><a href="#val-encode" class="anchor"></a><code><span class="keyword">val</span> encode : <span>st:<a href="Encoder_state/index.html#type-t">Encoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t</code></dt><dt class="spec value" id="val-m_to_string"><a href="#val-m_to_string" class="anchor"></a><code><span class="keyword">val</span> m_to_string : <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-m_to_buf"><a href="#val-m_to_buf" class="anchor"></a><code><span class="keyword">val</span> m_to_buf : Stdlib.Buffer.t <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-to_string_single"><a href="#val-to_string_single" class="anchor"></a><code><span class="keyword">val</span> to_string_single : <span>st:<a href="Encoder_state/index.html#type-t">Encoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Encode the given M.t to a string, without side definitions</p></dd></dl><dl><dt class="spec value" id="val-to_buf_with_side_defs"><a href="#val-to_buf_with_side_defs" class="anchor"></a><code><span class="keyword">val</span> to_buf_with_side_defs : <span>?&#8288;st:<a href="Encoder_state/index.html#type-t">Encoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></span> <span>&#45;&gt;</span> Stdlib.Buffer.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-to_string_with_side_defs"><a href="#val-to_string_with_side_defs" class="anchor"></a><code><span class="keyword">val</span> to_string_with_side_defs : <span>?&#8288;st:<a href="Encoder_state/index.html#type-t">Encoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Encode side definitions and the given M.t to a string</p></dd></dl><dl><dt class="spec value" id="val-to_chan_with_side_defs"><a href="#val-to_chan_with_side_defs" class="anchor"></a><code><span class="keyword">val</span> to_chan_with_side_defs : <span>?&#8288;st:<a href="Encoder_state/index.html#type-t">Encoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></span> <span>&#45;&gt;</span> Stdlib.out_channel <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h3 id="decoding"><a href="#decoding" class="anchor"></a>Decoding</h3></header><dl><dt class="spec exception" id="exception-Dec_fail"><a href="#exception-Dec_fail" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Dec_fail</span> <span class="keyword">of</span> string</code></dt><dd><p>Exception raised for decoding</p></dd></dl><dl><dt class="spec value" id="val-dec_fail"><a href="#val-dec_fail" class="anchor"></a><code><span class="keyword">val</span> dec_fail : <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, <span class="type-var">'b</span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-m_of_string"><a href="#val-m_of_string" class="anchor"></a><code><span class="keyword">val</span> m_of_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#module-M">M</a>.t, string)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-m_of_string_exn"><a href="#val-m_of_string_exn" class="anchor"></a><code><span class="keyword">val</span> m_of_string_exn : string <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t</code></dt><dt class="spec value" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span class="keyword">val</span> decode : <span>st:<a href="Decoder_state/index.html#type-t">Decoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-decoder">decoder</a></span> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, string)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-decode_exn"><a href="#val-decode_exn" class="anchor"></a><code><span class="keyword">val</span> decode_exn : <span>st:<a href="Decoder_state/index.html#type-t">Decoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-decoder">decoder</a></span> <span>&#45;&gt;</span> <a href="index.html#module-M">M</a>.t <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Same as <a href="index.html#val-decode"><code>decode</code></a> but can fail. Catches <code>Invalid_argument</code> and re-raise as a decoding failure.</p><dl><dt>raises Dec_fail</dt><dd><p>in case of error</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-of_string_with_side_defs"><a href="#val-of_string_with_side_defs" class="anchor"></a><code><span class="keyword">val</span> of_string_with_side_defs : <span>?&#8288;st:<a href="Decoder_state/index.html#type-t">Decoder_state.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-decoder">decoder</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, string)</span> Stdlib.result</span></code></dt><dd><p>Try to read a string containing with a bunch of side definitions and a single msgpack for <code>'a t</code> at the end</p></dd></dl><div class="spec module" id="module-U"><a href="#module-U" class="anchor"></a><code><span class="keyword">module</span> <a href="U/index.html">U</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Ty"><a href="#module-Ty" class="anchor"></a><code><span class="keyword">module</span> <a href="Ty/index.html">Ty</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-T"><a href="#module-T" class="anchor"></a><code><span class="keyword">module</span> <a href="T/index.html">T</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-TM"><a href="#module-TM" class="anchor"></a><code><span class="keyword">module</span> <a href="TM/index.html">TM</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></section></div></body></html>