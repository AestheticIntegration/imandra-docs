<!DOCTYPE html>
<html>
    <head><meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Imandra Documentation - Verifying a Simple Autonomous Vehicle Controller in Imandra</title>
        <meta property="og:url" content="https://docs.imandra.ai/imandra-docs/notebooks/simple-vehicle-controller/">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Imandra Documentation - Verifying a Simple Autonomous Vehicle Controller in Imandra">
        <meta property="og:description" content="In this notebook, we'll design and verify a simple autonomous vehicle controller in Imandra. The controller we analyse is due to Boyer, Green and Moore, and is described and analysed in their article The Use of a Formal Simulator to Verify a Simple Real Time Control Program.">
        <meta property="og:image" content="https://storage.googleapis.com/imandra-assets/images/og_image_default_i78.jpg">


        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116937440-6"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'UA-116937440-1');
        </script>
        <script type="text/javascript"> var sc_project=11767520; var sc_invisible=1; var sc_security="fa7e88d1"; </script>
        <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
        <noscript><div class="statcounter">
            <a title="Web Analytics" href="http://statcounter.com/" target="_blank">
                <img class="statcounter" src="//c.statcounter.com/11767520/0/fa7e88d1/1/" alt="Web Analytics"></a>
        </div></noscript>
        

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i%7CMerriweather:300,300i,400,400i%7CRoboto+Slab:300,300i,400,400i">

        <link rel="stylesheet" href="/imandra-docs/static/style/style.min.c7df16ea.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/nbextensions/nbimandra/styles.b466ce6f.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/docs-styles.b9de737f.css" type="text/css">
        
        <link rel="stylesheet" href="/imandra-docs/static/jekyll-styles.16c4c669.css" type="text/css">
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script src="/imandra-docs/static/nbimandra-rjs-bundle.b85e58fd.js"></script>

        <style type="text/css">
         .highlight .hll { background-color: #ffffcc }
         .highlight  { background: #f8f8f8; }
         .highlight .c { color: #408080; font-style: italic } /* Comment */
         .highlight .err { border: 1px solid #FF0000 } /* Error */
         .highlight .k { color: #008000; font-weight: bold } /* Keyword */
         .highlight .o { color: #666666 } /* Operator */
         .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
         .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
         .highlight .cp { color: #BC7A00 } /* Comment.Preproc */
         .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
         .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
         .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
         .highlight .gd { color: #A00000 } /* Generic.Deleted */
         .highlight .ge { font-style: italic } /* Generic.Emph */
         .highlight .gr { color: #FF0000 } /* Generic.Error */
         .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
         .highlight .gi { color: #00A000 } /* Generic.Inserted */
         .highlight .go { color: #888888 } /* Generic.Output */
         .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
         .highlight .gs { font-weight: bold } /* Generic.Strong */
         .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
         .highlight .gt { color: #0044DD } /* Generic.Traceback */
         .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
         .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
         .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
         .highlight .kp { color: #008000 } /* Keyword.Pseudo */
         .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
         .highlight .kt { color: #B00040 } /* Keyword.Type */
         .highlight .m { color: #666666 } /* Literal.Number */
         .highlight .s { color: #BA2121 } /* Literal.String */
         .highlight .na { color: #7D9029 } /* Name.Attribute */
         .highlight .nb { color: #008000 } /* Name.Builtin */
         .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
         .highlight .no { color: #880000 } /* Name.Constant */
         .highlight .nd { color: #AA22FF } /* Name.Decorator */
         .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
         .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
         .highlight .nf { color: #0000FF } /* Name.Function */
         .highlight .nl { color: #A0A000 } /* Name.Label */
         .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
         .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
         .highlight .nv { color: #19177C } /* Name.Variable */
         .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
         .highlight .w { color: #bbbbbb } /* Text.Whitespace */
         .highlight .mb { color: #666666 } /* Literal.Number.Bin */
         .highlight .mf { color: #666666 } /* Literal.Number.Float */
         .highlight .mh { color: #666666 } /* Literal.Number.Hex */
         .highlight .mi { color: #666666 } /* Literal.Number.Integer */
         .highlight .mo { color: #666666 } /* Literal.Number.Oct */
         .highlight .sa { color: #BA2121 } /* Literal.String.Affix */
         .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
         .highlight .sc { color: #BA2121 } /* Literal.String.Char */
         .highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
         .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
         .highlight .s2 { color: #BA2121 } /* Literal.String.Double */
         .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
         .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
         .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
         .highlight .sx { color: #008000 } /* Literal.String.Other */
         .highlight .sr { color: #BB6688 } /* Literal.String.Regex */
         .highlight .s1 { color: #BA2121 } /* Literal.String.Single */
         .highlight .ss { color: #19177C } /* Literal.String.Symbol */
         .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
         .highlight .fm { color: #0000FF } /* Name.Function.Magic */
         .highlight .vc { color: #19177C } /* Name.Variable.Class */
         .highlight .vg { color: #19177C } /* Name.Variable.Global */
         .highlight .vi { color: #19177C } /* Name.Variable.Instance */
         .highlight .vm { color: #19177C } /* Name.Variable.Magic */
         .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
        </style>

        <!-- Loading mathjax macro -->
        <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --><script>
  function handleCopyClick() {
      var el = this;
      var terminal = el.closest('.terminal');
      var highlight = terminal.getElementsByClassName('highlight')[0];
      copyToClipboardMsg(highlight);

      terminal.classList.add('terminal--hide');
      setTimeout(function () {
          terminal.classList.remove('terminal--hide');
      }, 2000);


      function copyToClipboardMsg(elem) {
          var succeed = copyToClipboard(elem);
          var msg;
          if (!succeed) {
              msg = 'Error!';
          } else {
              msg = 'Copied!';
          }

          var msgElem = terminal.querySelector('.terminal__copy-msg');
          msgElem.innerHTML = msg;
          setTimeout(function () {
              msgElem.innerHTML = 'You rock!';
          }, 1000);
      }

      function copyToClipboard(elem) {
          // create hidden text element, if it doesn't already exist
          var targetId = '_hiddenCopyText_';
          var isInput = elem.tagName === 'INPUT' || elem.tagName === 'TEXTAREA';
          var origSelectionStart, origSelectionEnd;
          if (isInput) {
              // can just use the original source element for the selection and copy
              target = elem;
              origSelectionStart = elem.selectionStart;
              origSelectionEnd = elem.selectionEnd;
          } else {
              // must use a temporary form element for the selection and copy
              target = terminal.querySelector('#' + targetId);
              if (!target) {
                  var target = document.createElement('textarea');
                  // target.style.display = 'flex';
                  // target.style.position = 'absolute';
                  // target.style.left = '-1000%';
                  target.id = targetId;
                 elem.appendChild(target);
              }
              target.textContent = elem.textContent.trim();
          }

          // select the content
          var currentFocus = document.activeElement;
          target.focus();
          target.setSelectionRange(0, target.value.length);

          // copy the selection
          var succeed;
          try {
              succeed = document.execCommand('copy');
          } catch (e) {
              succeed = false;
          }
          // restore original focus
          if (currentFocus && typeof currentFocus.focus === 'function') {
              currentFocus.focus();
          }

          if (isInput) {
              // restore prior selection
              elem.setSelectionRange(origSelectionStart, origSelectionEnd);
          } else {
              // clear temporary content
              elem.removeChild(target);
          }
          return succeed;
      }
  }
</script>
    </head>
    <body>
        <div class="background">
        </div>
        <div class="page-container">
            <main class="main-content-column">
                <!-- Jupyter (Imandra core docs) version -->
<header class="header">
    <div class="top-row-container">
        <div class="top-row">

            <div id="toggler--left" class="side__left-menu-toggler">
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="side__toggle-text">Docs</p>
            </div>

            <div class="side__logo-container">
                <a class="side__logo-link" href="/">
                    <img class="side__logo " src = "/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-docs.svg" alt="Imandra Logo" title="Imandra Logo">
                    <img class="side__logo--min " src="/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-min.svg" alt="Imandra Logo" title="Imandra Logo">

                </a>
            </div>

            <div id="toggler--right" class="side__right-menu-toggler">
                <p class="side__toggle-text">Pages</p>
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <nav id="side-nav-menu" class="side__nav-container side__nav-container--hidden">
                <ul class="side__nav-list">
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/">Documentation Home</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs">Imandra Core</a>
                        
                        <ul class="side__nav-list--sub-level-1">
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/welcome">A quick tour</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/installation">Installation</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-simple">Installer</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-manual-opam">Manual (opam)</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-docker">Docker Image</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-jupyter">Jupyter Notebook</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-vscode">VSCode</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/logic-and-program-modes">Logic and Program modes</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/verification">Verification</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-commands">Commands</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes">Attributes</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-unrolling">Unrolling</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification">Simplification</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-blast">Blast</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction">Induction</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall">Waterfall</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/proving-program-termination">Proving program termination</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/decomposition">Region Decomposition</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/imandra-tools-intro">Imandra tools introduction</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/idf">Iterative Decomposition Framework</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/region-probabilities">Region probabilities</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/loading-files">Multifile development</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/extracting-ocaml-modules-with-imandra-extract">Extracting OCaml modules</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/plugins">Code generation and plugins</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reflection">Reflection of terms</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/examples">Examples</a>
                                
                                <ul class="side__nav-list--sub-level-2  side__nav-list--sub-level-2--active">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/recursion-induction-and-rewriting">Recursion, Induction and Rewriting</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-merge-sort">Verifying merge sort in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/ubs-case-study">Analysing the UBS ATS Dark Pool</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/six-swiss-exchange-pricing">Region Decomposition - Exchange Pricing</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/exchange-implied-trading">Exchange Implied Trading</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/webservice-auth-logic">Analysing Web-app authentication logic</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs/notebooks/simple-vehicle-controller">Simple vehicle controller</a>
                                        
                                        
                                        
                                        <div class="side__within-page-nav--sub-level-2">
                                        
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#The-controller-and-its-environment">The controller and its environment</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#The-Imandra-model">The Imandra model</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Our-controller-and-state-transitions">Our controller and state transitions</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Sensing-the-environment">Sensing the environment</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#The-top-level-state-machine">The top-level state machine</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Verifying-our-controller">Verifying our controller</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Theorem:-Single-step-safety">Theorem: Single step safety</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Theorem:-Multistep-safety">Theorem: Multistep safety</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Theorem:-Cannot-get-more-than-3-units-off-course.">Theorem: Cannot get more than 3 units off course.</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">Theorem: If wind is stable for 4 intervals, we get back on course.</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Experiments-with-a-flawed-version">Experiments with a flawed version</a>
  
  
                                        </div>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/simple-stoplight-model">Simple car intersection model</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/ripple-carry-adder">Verifying a Ripple Carry Adder</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-an-ros-node">Creating and Verifying a ROS Node</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-tic-tac-toe">Tic Tac Toe with ReasonML</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/probabilistic-reasoning-in-reasonml">Probabilistic Reasoning in ReasonML</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/sudoku">Solving Sudoku with Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/crossing-river-safely">Crossing the river safely</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-facetime-state-machines">Exploring The Apple FaceTime Bug with ReasonML State Machines</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/key-pair-security">Key Pair Security in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/a-comparison-with-tla-plus">A comparison with TLA+</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/solver-synthesis">Synthesising a game solver in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/supervised-learning">Analysing Machine Learning Models</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/school-scheduler">Solving school scheduling during COVID</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reference">Reference</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/odoc/imandra-base/Imandra_prelude/">Standard Library</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/odoc/">API Docs</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                        </ul>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/idf-py">Py IDF</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/ipl">Imandra Protocol Language</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/imandra-rule-synth">Imandra Rule Synth</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/fix-engine">FIX Engine</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>
    </div>

    <div class="background">
    </div>



    <div class="template-header">
        <div class="top-bar">
            <div class="side__nav-search">
                <input id="search" type="search" placeholder="Search">
                <div class="side__nav-search-icon">
                    <i class="fa fa-search"></i>
                </div>
            </div>

            <nav class="top-bar__nav-container">
                <a href="#" class="top-bar__toggle">≡</a>
                <div class="top-nav-bar__group ">
                    <div class="top-nav-bar__nav nav-bar--blue top-nav-bar__nav--hidden">
                        <ul class="top-nav-bar__links top-nav-bar__links--hidden-smaller-than-tablet">
                            <li class="top-nav-bar__item">
                                <a href="https://www.imandra.ai/" class="top-nav-bar__link">Home</a>
                            </li>
                            <li class="top-nav-bar__item">
                                <a href="https://try.imandra.ai/" class="top-nav-bar__link">Try</a>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--engine">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Engine</a>
                                <ul class="dropdown-content dropdown-content--engine">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--core.svg" alt="Imandra Core" title="Imandra Core Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/core">Imandra Core</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--demos.svg" alt="Demo Gallery" title="Imandra Demo Gallery Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/demos">Demo Gallery</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--docs.svg" alt="Docs" title="Docs Icon">
                                        <a class="dropdown__link" href="https://docs.imandra.ai/">Docs</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--research.svg" alt="Research" title="Research Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/research">Research</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--industries">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Industries</a>
                                <ul class="dropdown-content dropdown-content--industries">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--financial.svg" alt="Financial Markets" title="Financial Markets Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/imarkets">Financial Markets</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--autonomy.svg" alt="Autonomous Systems" title="Autonomous Systems Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/autonomy">Autonomous Systems</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--ml.svg" alt="Machine Learning" title="Machine Learning Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/ml">Machine Learning</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--government.svg" alt="Machine Learning" title="Machine Learning Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/government">Government and defense</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--media">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Media</a>
                                <ul class="dropdown-content dropdown-content--media">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--media.svg" alt="Media" title="Media Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/media">Media</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--blog.svg" alt="Blog" title="Blog Icon">
                                        <a class="dropdown__link dropdown__link--last " href="https://medium.com/imandra">Blog</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--company">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Company</a>
                                <ul class="dropdown-content dropdown-content--company">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--about.svg" alt="About" title="About Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/about">About</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--careers.svg" alt=" Careers" title="Careers Icon">
                                        <a class="dropdown__link dropdown__link--last dropdown__link--bottom" href="https://www.imandra.ai/careers">Careers</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div class="template-header__image-container template-header__image-container--jupyter">
            <div class="template-header__image" href ="/imandra-docs">
                <img class="site-specific-image" src="/imandra-docs/static/img/site_specific_image_v_2.svg">
            </div>
        </div>

    </div>



    <script>
        document.getElementById('toggler--left').addEventListener('click', function () {
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');
            document.getElementsByClassName('side__nav-container')[0].classList.toggle(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.add('top-nav-bar__nav--hidden');
        });

        document.getElementById('toggler--right').addEventListener('click', function () {
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');

            document.getElementsByClassName('side__nav-container')[0].classList.add(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.toggle(
                'top-nav-bar__nav--hidden');
        });
    </script>
</header>
                <article class="article__container article__container--notebooks">
                    <div class="main-content main-content--jupyter">
                        
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Verifying-a-simple-autonomous-vehicle-controller-in-Imandra">Verifying a simple autonomous vehicle controller in Imandra<a class="anchor-link" href="#Verifying-a-simple-autonomous-vehicle-controller-in-Imandra">&#182;</a></h1><p><img src="https://storage.googleapis.com/imandra-notebook-assets/imandra_sd-car-controller.png" width=500></p>
<p>In this notebook, we'll design and verify a simple autonomous vehicle controller in Imandra. The controller we analyse is due to Boyer, Green and Moore, and is described and analysed in their article <a href="https://link.springer.com/chapter/10.1007/978-1-4612-4476-9_7">The Use of a Formal Simulator to Verify a Simple Real Time Control Program</a>.</p>
<p>This controller will receive sequences of sensor readings measuring changes in wind speed, and will have to respond to keep the vehicle on course. The final theorems we prove will establish the following safety and correctness properties:</p>
<ul>
<li>If the vehicle starts at the initial state <code>(0,0,0)</code>, then the controller guarantees the vehicle never strays
farther than <code>3</code> units from the <code>x</code>-axis.</li>
<li>If the wind ever becomes constant for at least <code>4</code> sampling intervals, then the vehicle returns to the <code>x</code>-axis and stays there as long as the wind remains constant.</li>
</ul>
<p>These results formally prove that the simulated vehicle appropriately stays on course under each of the <em>infinite number</em> of possible wind histories.</p>
<h2 id="The-controller-and-its-environment">The controller and its environment<a class="anchor-link" href="#The-controller-and-its-environment">&#182;</a></h2><p>Quantities in the model are measured using integral units. The model is one-dimensional: it considers the <code>y</code>-components of both the vehicle and wind velocity.</p>
<p>Wind speed is measured in terms of the number of units in the <code>y</code>-direction the wind would blow a passive vehicle in one sampling interval. From one sampling interval to the next, the wind speed can change by at most one unit in either direction. The wind is permitted to blow up to arbitrarily high velocities.</p>
<p>At each sampling interval, the controller may increment or decrement the <code>y</code>-component of its velocity. We let <code>v</code> be the accumulated speed in the <code>y</code>-direction measured as the number of units the vehicle would move in one sampling interval if there were no wind. We make no assumption limiting how fast <code>v</code> may be changed by the control program. We permit <code>v</code> to become arbitrary large.</p>
<h1 id="The-Imandra-model">The Imandra model<a class="anchor-link" href="#The-Imandra-model">&#182;</a></h1><p>The Imandra model of our system and its environment is rooted in a <code>state</code> vector consisting of three values:</p>
<ul>
<li><code>w</code> - current wind velocity</li>
<li><code>y</code> - current y-position of the vehicle</li>
<li><code>v</code> - accumulated velocity of the vehicle</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-2" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="n">state</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">w</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* current wind speed *)</span>
  <span class="n">y</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* y-position of the vehicle *)</span>
  <span class="n">v</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* accumulated velocity *)</span>
<span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type state = { w : int; y : int; v : int; }
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Our-controller-and-state-transitions">Our controller and state transitions<a class="anchor-link" href="#Our-controller-and-state-transitions">&#182;</a></h1></div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-4" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">controller</span> <span class="n">sgn_y</span> <span class="n">sgn_old_y</span> <span class="o">=</span>
  <span class="o">(-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">sgn_y</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sgn_old_y</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val controller : int -&gt; int -&gt; int = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-5" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">sgn</span> <span class="n">x</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="o">-</span><span class="mi">1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span>
  <span class="k">else</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sgn : int -&gt; int = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Given a wind-speed delta sensor reading and a current state, <code>next_state</code> computes the next state of the system as dictated by our controller.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-7" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="o">=</span>
  <span class="o">{</span> <span class="n">w</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span>
        <span class="n">controller</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">))</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val next_state : int -&gt; state -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Sensing-the-environment">Sensing the environment<a class="anchor-link" href="#Sensing-the-environment">&#182;</a></h1><p>The behaviour of the wind over <code>n</code> sampling intervals is represented as
a sequence of length <code>n</code>. Each element of the sequence is either <code>-1</code>, <code>0</code>, or <code>1</code>
indicating how the wind changed between sampling intervals.</p>
<p>We define the predicate <code>arbitrary_delta_ws</code> to describe valid sequences of wind sensor readings.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-9" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">arbitrary_delta_ws</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">for_all</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val arbitrary_delta_ws : int list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="The-top-level-state-machine">The top-level state machine<a class="anchor-link" href="#The-top-level-state-machine">&#182;</a></h1><p>We now define the <code>final_state</code> function which takes a description of an arbitrary wind sampling history
   and an initial state, and computes the result of running the controller
   (i.e., simulating the vehicle) as it responds to the changes in wind.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-11" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">dws</span> <span class="k">with</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="o">|</span> <span class="n">dw</span> <span class="o">::</span> <span class="n">dws&#39;</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="k">in</span>
    <span class="n">final_state</span> <span class="n">s&#39;</span> <span class="n">dws&#39;</span>
<span class="o">[@@</span><span class="n">adm</span> <span class="n">dws</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val final_state : state -&gt; int list -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-82f43c94-ffc3-40f5-bb6e-cbd1c7316ad2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-e4d1575c-2a88-4a26-a9ba-78982a27ab42"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `final_state (next_state (List.hd dws) s) (List.tl dws)` from `final_state s dws`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-ee84271c-5b40-4324-a15d-e00c3de4956a"><table><tr><td><b>original</b></td><td>final_state s dws</td></tr><tr><td><b>sub</b></td><td>final_state (next_state (List.hd dws) s) (List.tl dws)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count dws)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl dws))</td></tr><tr><td><b>path</b></td><td>[not (dws = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-38c79b60-2b22-41cb-affd-6e69c1075ad9"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-49c924cc-2ab9-4e20-80f5-458501b773c9"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-830031ee-3acd-46e7-aad6-8fd386abbabd"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.014s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-d48a866b-2be1-41f0-a143-a51d692ef84c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-9f33e988-2610-4940-8cc0-c80670cf63f7"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-ced0de7f-fe13-409b-983b-f7c0172c2a3b"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith-make-feasible</b></td><td>20</td></tr><tr><td><b>arith-max-columns</b></td><td>18</td></tr><tr><td><b>arith-conflicts</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>2226</td></tr><tr><td><b>mk clause</b></td><td>12</td></tr><tr><td><b>datatype occurs check</b></td><td>22</td></tr><tr><td><b>mk bool var</b></td><td>65</td></tr><tr><td><b>arith-lower</b></td><td>14</td></tr><tr><td><b>arith-diseq</b></td><td>1</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>18</td></tr><tr><td><b>propagations</b></td><td>13</td></tr><tr><td><b>arith-max-rows</b></td><td>6</td></tr><tr><td><b>conflicts</b></td><td>10</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>num allocs</b></td><td>892418073</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>43</td></tr><tr><td><b>del clause</b></td><td>5</td></tr><tr><td><b>arith eq adapter</b></td><td>10</td></tr><tr><td><b>arith-upper</b></td><td>13</td></tr><tr><td><b>memory</b></td><td>20.130000</td></tr><tr><td><b>max memory</b></td><td>27.270000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d48a866b-2be1-41f0-a143-a51d692ef84c';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-bc2f1e48-5f71-42a8-b17b-dc4e917f30cb"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.014s]
  let (_x_0 : int) = Ordinal.count dws in
  let (_x_1 : int list) = List.tl dws in
  let (_x_2 : int) = Ordinal.count _x_1 in
  not (dws = []) &amp;&amp; _x_0 &gt;= 0 &amp;&amp; _x_2 &gt;= 0
  ==&gt; _x_1 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_2) (Ordinal.Int _x_0)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-58e93621-1fb4-401f-b67b-6cde203636a2"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int list) = List.tl dws in
let (_x_1 : int) = Ordinal.count _x_0 in
let (_x_2 : int) = Ordinal.count dws in
(_x_0 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_1) (Ordinal.Int _x_2))
|| not ((not (dws = []) &amp;&amp; _x_2 &gt;= 0) &amp;&amp; _x_1 &gt;= 0)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-6cb2efe6-b5ff-4f34-a0d7-4ab7e133f767"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_2476| dws_2466)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-4389eee9-d4ca-4928-9245-ff9d6a5f6949"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_2476| (|get.::.1_2464| dws_2466))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b42f143b-33ad-4e70-a495-db1888fa6f42"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`int list`_2476|
                                      (…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-bc2f1e48-5f71-42a8-b17b-dc4e917f30cb';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-49c924cc-2ab9-4e20-80f5-458501b773c9';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-38c79b60-2b22-41cb-affd-6e69c1075ad9';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-e4d1575c-2a88-4a26-a9ba-78982a27ab42';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-82f43c94-ffc3-40f5-bb6e-cbd1c7316ad2';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Verifying-our-controller">Verifying our controller<a class="anchor-link" href="#Verifying-our-controller">&#182;</a></h1><p>We now partition our state-space into a collection of regions, some "good,"
most "bad," and show that if we start in a "good" state (like <code>(0,0,0)</code>), then we'll (inductively)
always end up in a "good" state.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-13" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="c">(* What it means to be a ``good&#39;&#39; state *)</span>

<span class="k">let</span> <span class="n">good_state</span> <span class="n">s</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="k">with</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span>  <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span>  <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state : state -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h2 id="Theorem:-Single-step-safety">Theorem: Single step safety<a class="anchor-link" href="#Theorem:-Single-step-safety">&#182;</a></h2><p>We prove: <code>If we start in a good state and evolve the system responding to one sensor reading, we end up in a good state.</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-15" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">safety_1</span> <span class="n">s</span> <span class="n">dw</span> <span class="o">=</span>
  <span class="n">good_state</span> <span class="n">s</span>
  <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">dw</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">dw</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">dw</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
 <span class="o">==&gt;</span>
  <span class="n">good_state</span> <span class="o">(</span><span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">[@@</span><span class="n">rewrite</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val safety_1 : state -&gt; int -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-e72dc2f1-364c-40bf-91d9-5dc4fe230fd7"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-b022135d-c7ef-452f-b007-3557ba47baeb"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-17aeb760-b69a-431a-bcec-ce82fa7df2a2"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-c869edf6-53e7-4239-bd1b-aa27e6ec72d8"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.041s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-515228cb-cd33-4744-bdfd-67cbdad98461"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-6482fc22-b700-4fe5-98d8-a89261611763"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-a5e72ed4-a6f4-4d36-bfdd-ef3babd123be"><table><tr><td><b>num checks</b></td><td>1</td></tr><tr><td><b>arith-make-feasible</b></td><td>251</td></tr><tr><td><b>arith-max-columns</b></td><td>17</td></tr><tr><td><b>arith-conflicts</b></td><td>16</td></tr><tr><td><b>rlimit count</b></td><td>21377</td></tr><tr><td><b>arith-cheap-eqs</b></td><td>38</td></tr><tr><td><b>mk clause</b></td><td>2283</td></tr><tr><td><b>mk bool var</b></td><td>222</td></tr><tr><td><b>arith-lower</b></td><td>1036</td></tr><tr><td><b>arith-diseq</b></td><td>1566</td></tr><tr><td><b>decisions</b></td><td>162</td></tr><tr><td><b>arith-propagations</b></td><td>1478</td></tr><tr><td><b>propagations</b></td><td>4590</td></tr><tr><td><b>arith-bound-propagations-cheap</b></td><td>1478</td></tr><tr><td><b>arith-max-rows</b></td><td>8</td></tr><tr><td><b>conflicts</b></td><td>108</td></tr><tr><td><b>datatype accessor ax</b></td><td>1</td></tr><tr><td><b>minimized lits</b></td><td>146</td></tr><tr><td><b>arith-bound-propagations-lp</b></td><td>376</td></tr><tr><td><b>datatype constructor ax</b></td><td>1</td></tr><tr><td><b>num allocs</b></td><td>961399974</td></tr><tr><td><b>added eqs</b></td><td>1012</td></tr><tr><td><b>del clause</b></td><td>310</td></tr><tr><td><b>arith eq adapter</b></td><td>102</td></tr><tr><td><b>arith-upper</b></td><td>882</td></tr><tr><td><b>memory</b></td><td>21.190000</td></tr><tr><td><b>max memory</b></td><td>27.270000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-515228cb-cd33-4744-bdfd-67cbdad98461';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-6398ffe9-6e89-4e55-9aa3-0bbf038dd9c2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.041s]
  let (_x_0 : int) = :var_0:.w in
  let (_x_1 : int) = :var_0:.v in
  let (_x_2 : int) = _x_0 + _x_1 in
  let (_x_3 : bool) = 2 = _x_2 in
  let (_x_4 : int) = :var_0:.y in
  let (_x_5 : bool) = -2 = _x_4 in
  let (_x_6 : bool) = 1 = _x_2 in
  let (_x_7 : int) = ((_x_4 + _x_1) + _x_0) + :var_1: in
  let (_x_8 : int)
      = (_x_0 + :var_1:)
        + _x_1
          + -3 * (if _x_7 &lt; 0 then -1 else if _x_7 = 0 then 0 else 1)
            + 2 * (if _x_4 &lt; 0 then -1 else if _x_4 = 0 then 0 else 1)
  in
  let (_x_9 : bool) = 2 = _x_8 in
  let (_x_10 : bool) = -2 = _x_7 in
  let (_x_11 : bool) = 1 = _x_8 in
  (if _x_6 &amp;&amp; -3 = _x_4 then true
   else
   if _x_6 &amp;&amp; _x_5 then true
   else
   if _x_3 &amp;&amp; _x_5 then true else if _x_3 &amp;&amp; -1 = _x_4 then true else …)
  &amp;&amp; (:var_1: = -1 || :var_1: = 0 || :var_1: = 1)
  ==&gt; (if _x_11 &amp;&amp; -3 = _x_7 then true
       else
       if _x_11 &amp;&amp; _x_10 then true
       else
       if _x_9 &amp;&amp; _x_10 then true
       else if _x_9 &amp;&amp; -1 = _x_7 then true else …)</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-f10d3681-2e84-4731-8db3-52e84bc29306"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int) = :var_0:.w in
let (_x_1 : int) = :var_0:.v in
let (_x_2 : int) = :var_0:.y in
let (_x_3 : int) = ((_x_2 + _x_1) + _x_0) + :var_1: in
let (_x_4 : int)
    = (((_x_0 + :var_1:) + _x_1)
       + -3 * (if 0 &lt;= _x_3 then if _x_3 = 0 then 0 else 1 else -1))
      + 2 * (if 0 &lt;= _x_2 then if _x_2 = 0 then 0 else 1 else -1)
in
let (_x_5 : bool) = 1 = _x_4 in
let (_x_6 : bool) = -2 = _x_3 in
let (_x_7 : bool) = 2 = _x_4 in
let (_x_8 : bool) = -1 = _x_3 in
let (_x_9 : bool) = -1 = _x_4 in
let (_x_10 : bool) = 0 = _x_3 in
let (_x_11 : bool) = -2 = _x_4 in
let (_x_12 : bool) = 1 = _x_3 in
let (_x_13 : bool) = 2 = _x_3 in
let (_x_14 : int) = _x_0 + _x_1 in
let (_x_15 : bool) = -1 = _x_14 in
let (_x_16 : bool) = -2 = _x_14 in
let (_x_17 : bool) = 2 = _x_2 in
let (_x_18 : bool) = 1 = _x_2 in
let (_x_19 : bool) = 1 = _x_14 in
let (_x_20 : bool) = 0 = _x_2 in
let (_x_21 : bool) = -1 = _x_2 in
let (_x_22 : bool) = 2 = _x_14 in
let (_x_23 : bool) = -2 = _x_2 in
((((((((((((_x_5 &amp;&amp; -3 = _x_3 || _x_5 &amp;&amp; _x_6) || _x_7 &amp;&amp; _x_6)
          || _x_7 &amp;&amp; _x_8)
         || 3 = _x_4 &amp;&amp; _x_8)
        || _x_9 &amp;&amp; _x_10)
       || _x_5 &amp;&amp; _x_10)
      || 0 = _x_4 &amp;&amp; _x_10)
     || _x_11 &amp;&amp; _x_12)
    || -3 = _x_4 &amp;&amp; _x_12)
   || _x_9 &amp;&amp; _x_13)
  || _x_11 &amp;&amp; _x_13)
 || _x_9 &amp;&amp; 3 = _x_3)
|| not
   (((((((((((((_x_15 &amp;&amp; 3 = _x_2 || _x_16 &amp;&amp; _x_17) || _x_15 &amp;&amp; _x_17)
              || -3 = _x_14 &amp;&amp; _x_18)
             || _x_16 &amp;&amp; _x_18)
            || _x_19 &amp;&amp; _x_20)
           || 0 = _x_14 &amp;&amp; _x_20)
          || _x_15 &amp;&amp; _x_20)
         || 3 = _x_14 &amp;&amp; _x_21)
        || _x_22 &amp;&amp; _x_21)
       || _x_22 &amp;&amp; _x_23)
      || _x_19 &amp;&amp; _x_23)
     || _x_19 &amp;&amp; -3 = _x_2)
    &amp;&amp; ((:var_1: = -1 || :var_1: = 0) || :var_1: = 1))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6398ffe9-6e89-4e55-9aa3-0bbf038dd9c2';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-c2e21357-9a84-40c5-b4c3-364759be2613"><textarea style="display: none">digraph &quot;proof&quot; {
p_253 [label=&quot;Start (let (_x_0 : int) = :var_0:.w in\l       let (_x_1 : int) = :var_0:.v in\l       let (_x_2 : int) = _x_0 + _x_1 in\l       let (_x_3 : bool) = 2 = _x_2 in\l       let (_x_4 : int) = :var_0:.y in\l       let (_x_5 : bool) = -2 = _x_4 in\l       let (_x_6 : bool) = 1 = _x_2 in\l       let (_x_7 : int) = ((_x_4 + _x_1) + _x_0) + :var_1: in\l       let (_x_8 : int)\l           = (_x_0 + :var_1:)\l             + _x_1\l               + -3 * (if _x_7 \&lt; 0 then -1 else if _x_7 = 0 then 0 else 1)\l                 + 2 * (if _x_4 \&lt; 0 then -1 else if _x_4 = 0 then 0 else 1)\l       in\l       let (_x_9 : bool) = 2 = _x_8 in\l       let (_x_10 : bool) = -2 = _x_7 in\l       let (_x_11 : bool) = 1 = _x_8 in\l       (if _x_6 &amp;&amp; -3 = _x_4 then true\l        else\l        if _x_6 &amp;&amp; _x_5 then true\l        else\l        if _x_3 &amp;&amp; _x_5 then true\l        else if _x_3 &amp;&amp; -1 = _x_4 then true else …)\l       &amp;&amp; (:var_1: = -1 \|\| :var_1: = 0 \|\| :var_1: = 1)\l       ==\&gt; (if _x_11 &amp;&amp; -3 = _x_7 then true\l            else\l            if _x_11 &amp;&amp; _x_10 then true\l            else\l            if _x_9 &amp;&amp; _x_10 then true\l            else if _x_9 &amp;&amp; -1 = _x_7 then true else …)\l       :time 0.041s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_253 -&gt; p_252 [label=&quot;&quot;];
p_252 [label=&quot;Simplify (let (_x_0 : int) = :var_0:.w in\l          let (_x_1 : int) = :var_0:.v in\l          let (_x_2 : int) = :var_0:.y in\l          let (_x_3 : int) = ((_x_2 + _x_1) + _x_0) + :var_1: in\l          let (_x_4 : int)\l              = (((_x_0 + :var_1:) + _x_1)\l                 + -3 * (if 0 \&lt;= _x_3 then if _x_3 = 0 then 0 else 1 else -1))\l                + 2 * (if 0 \&lt;= _x_2 then if _x_2 = 0 then 0 else 1 else -1)\l          in\l          let (_x_5 : bool) = 1 = _x_4 in\l          let (_x_6 : bool) = -2 = _x_3 in\l          let (_x_7 : bool) = 2 = _x_4 in\l          let (_x_8 : bool) = -1 = _x_3 in\l          let (_x_9 : bool) = -1 = _x_4 in\l          let (_x_10 : bool) = 0 = _x_3 in\l          let (_x_11 : bool) = -2 = _x_4 in\l          let (_x_12 : bool) = 1 = _x_3 in\l          let (_x_13 : bool) = 2 = _x_3 in\l          let (_x_14 : int) = _x_0 + _x_1 in\l          let (_x_15 : bool) = -1 = _x_14 in\l          let (_x_16 : bool) = -2 = _x_14 in\l          let (_x_17 : bool) = 2 = _x_2 in\l          let (_x_18 : bool) = 1 = _x_2 in\l          let (_x_19 : bool) = 1 = _x_14 in\l          let (_x_20 : bool) = 0 = _x_2 in\l          let (_x_21 : bool) = -1 = _x_2 in\l          let (_x_22 : bool) = 2 = _x_14 in\l          let (_x_23 : bool) = -2 = _x_2 in\l          ((((((((((((_x_5 &amp;&amp; -3 = _x_3 \|\| _x_5 &amp;&amp; _x_6) \|\| _x_7 &amp;&amp; _x_6)\l                    \|\| _x_7 &amp;&amp; _x_8)\l                   \|\| 3 = _x_4 &amp;&amp; _x_8)\l                  \|\| _x_9 &amp;&amp; _x_10)\l                 \|\| _x_5 &amp;&amp; _x_10)\l                \|\| 0 = _x_4 &amp;&amp; _x_10)\l               \|\| _x_11 &amp;&amp; _x_12)\l              \|\| -3 = _x_4 &amp;&amp; _x_12)\l             \|\| _x_9 &amp;&amp; _x_13)\l            \|\| _x_11 &amp;&amp; _x_13)\l           \|\| _x_9 &amp;&amp; 3 = _x_3)\l          \|\| not\l             (((((((((((((_x_15 &amp;&amp; 3 = _x_2 \|\| _x_16 &amp;&amp; _x_17)\l                         \|\| _x_15 &amp;&amp; _x_17)\l                        \|\| -3 = _x_14 &amp;&amp; _x_18)\l                       \|\| _x_16 &amp;&amp; _x_18)\l                      \|\| _x_19 &amp;&amp; _x_20)\l                     \|\| 0 = _x_14 &amp;&amp; _x_20)\l                    \|\| _x_15 &amp;&amp; _x_20)\l                   \|\| 3 = _x_14 &amp;&amp; _x_21)\l                  \|\| _x_22 &amp;&amp; _x_21)\l                 \|\| _x_22 &amp;&amp; _x_23)\l                \|\| _x_19 &amp;&amp; _x_23)\l               \|\| _x_19 &amp;&amp; -3 = _x_2)\l              &amp;&amp; ((:var_1: = -1 \|\| :var_1: = 0) \|\| :var_1: = 1))\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_252 -&gt; p_251 [label=&quot;&quot;];
p_251 [label=&quot;Unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-c2e21357-9a84-40c5-b4c3-364759be2613';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-17aeb760-b69a-431a-bcec-ce82fa7df2a2';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b022135d-c7ef-452f-b007-3557ba47baeb';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-84e9d337-f710-44df-8716-28b8e49c5347"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;let (_x_0 : int) = s.w in\llet (_x_1 : int) = s.v in\llet (_x_2 : int) = s.y in\llet (_x_3 : int) = ((_x_2 + _x_1) + _x_0) + dw in\llet (_x_4 : int)\l    = (((_x_0 + dw) + _x_1)\l       + -3 * (if 0 \&lt;= _x_3 then if _x_3 = 0 then 0 else 1 else -1))\l      + 2 * (if 0 \&lt;= _x_2 then if _x_2 = 0 then 0 else 1 else -1)\lin\llet (_x_5 : bool) = 1 = _x_4 in\llet (_x_6 : bool) = -2 = _x_3 in\llet (_x_7 : bool) = 2 = _x_4 in\llet (_x_8 : bool) = -1 = _x_3 in\llet (_x_9 : bool) = -1 = _x_4 in\llet (_x_10 : bool) = 0 = _x_3 in\llet (_x_11 : bool) = -2 = _x_4 in\llet (_x_12 : bool) = 1 = _x_3 in\llet (_x_13 : bool) = 2 = _x_3 in\llet (_x_14 : int) = _x_0 + _x_1 in\llet (_x_15 : bool) = -1 = _x_14 in\llet (_x_16 : bool) = -2 = _x_14 in\llet (_x_17 : bool) = 2 = _x_2 in\llet (_x_18 : bool) = 1 = _x_2 in\llet (_x_19 : bool) = 1 = _x_14 in\llet (_x_20 : bool) = 0 = _x_2 in\llet (_x_21 : bool) = -1 = _x_2 in\llet (_x_22 : bool) = 2 = _x_14 in\llet (_x_23 : bool) = -2 = _x_2 in\lnot\l(((((((((((((_x_5 &amp;&amp; -3 = _x_3 \|\| _x_5 &amp;&amp; _x_6) \|\| _x_7 &amp;&amp; _x_6)\l           \|\| _x_7 &amp;&amp; _x_8)\l          \|\| 3 = _x_4 &amp;&amp; _x_8)\l         \|\| _x_9 &amp;&amp; _x_10)\l        \|\| _x_5 &amp;&amp; _x_10)\l       \|\| 0 = _x_4 &amp;&amp; _x_10)\l      \|\| _x_11 &amp;&amp; _x_12)\l     \|\| -3 = _x_4 &amp;&amp; _x_12)\l    \|\| _x_9 &amp;&amp; _x_13)\l   \|\| _x_11 &amp;&amp; _x_13)\l  \|\| _x_9 &amp;&amp; 3 = _x_3)\l \|\| not\l    (((((((((((((_x_15 &amp;&amp; 3 = _x_2 \|\| _x_16 &amp;&amp; _x_17) \|\| _x_15 &amp;&amp; _x_17)\l               \|\| -3 = _x_14 &amp;&amp; _x_18)\l              \|\| _x_16 &amp;&amp; _x_18)\l             \|\| _x_19 &amp;&amp; _x_20)\l            \|\| 0 = _x_14 &amp;&amp; _x_20)\l           \|\| _x_15 &amp;&amp; _x_20)\l          \|\| 3 = _x_14 &amp;&amp; _x_21)\l         \|\| _x_22 &amp;&amp; _x_21)\l        \|\| _x_22 &amp;&amp; _x_23)\l       \|\| _x_19 &amp;&amp; _x_23)\l      \|\| _x_19 &amp;&amp; -3 = _x_2)\l     &amp;&amp; ((dw = -1 \|\| dw = 0) \|\| dw = 1)))&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-84e9d337-f710-44df-8716-28b8e49c5347';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-e72dc2f1-364c-40bf-91d9-5dc4fe230fd7';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `good_state` is disabled
(non-recursive function)
See https://docs.imandra.ai/imandra-docs/notebooks/verification-simplification</pre></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `next_state` is disabled
(non-recursive function)
See https://docs.imandra.ai/imandra-docs/notebooks/verification-simplification</pre></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h2 id="Theorem:-Multistep-safety">Theorem: Multistep safety<a class="anchor-link" href="#Theorem:-Multistep-safety">&#182;</a></h2><p>We prove: <code>If we start in a good state and simulate the controller w.r.t. an arbitrary sequence of sensor readings, then we still end up in a good state.</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-17" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">disable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">disable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">all_good</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="n">good_state</span> <span class="n">s</span> <span class="o">&amp;&amp;</span> <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
  <span class="o">==&gt;</span>
  <span class="n">good_state</span> <span class="o">((</span><span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span><span class="o">)</span> <span class="o">[@</span><span class="n">trigger</span><span class="o">])</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">final_state</span><span class="o">]</span>
<span class="o">[@@</span><span class="n">forward_chaining</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val all_good : state -&gt; int list -&gt; bool = &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

good_state s &amp;&amp; arbitrary_delta_ws dws ==&gt; good_state (final_state s dws).

1 nontautological subgoal.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">final_state</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (dws = [] ==&gt; φ dws s)
 &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
     ==&gt; φ dws s).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2</span>:

 H0. good_state s
 H1. List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws
 H2. dws = []
|---------------------------------------------------------------------------
 good_state (final_state s dws)

But simplification reduces this to true, using the definitions of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all </span>and<span class="ansi-blue-intense-fg ansi-bold"> final_state</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. good_state s
 H1. List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws
 H2. not (dws = [])
 H3. good_state (next_state (List.hd dws) s)
     &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) (List.tl dws)
     ==&gt; good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
|---------------------------------------------------------------------------
 good_state (final_state s dws)

This simplifies, using the definitions of <span class="ansi-blue-intense-fg ansi-bold">List.for_all </span>and<span class="ansi-blue-intense-fg ansi-bold"> final_state</span> to the
following 3 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.3</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. List.hd dws = -1
 H3. List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) (List.tl dws)
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. good_state (next_state (List.hd dws) s)
 C2. List.hd dws = 1
 C3. List.hd dws = 0

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.2</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. List.hd dws = 0
 H3. List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) (List.tl dws)
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. good_state (next_state (List.hd dws) s)
 C2. List.hd dws = 1

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. List.hd dws = 1
 H3. List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) (List.tl dws)
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. good_state (next_state (List.hd dws) s)

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-cyan-intense-fg ansi-bold"> ⓘ </span> Rules:
    (:def List.for_all)
    (:def final_state)
    (:rw safety_1)
    (:induct final_state)

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-905b12ab-a481-4588-b575-d70872f2cf11"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-0eb930ff-e108-465f-b052-ba2bd58a239c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-010115ca-8c88-4930-bb7c-e00574e0eb94"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>11</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>0.507s</pre></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-888b549a-43da-4732-9717-192711df1fd4"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.507s, &quot;Goal&quot;]
  good_state :var_0:
  &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) :var_1:
  ==&gt; good_state (final_state :var_0: :var_1:)</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-57b8db7f-3f78-4d14-9713-0afe37abe9cc"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(not (good_state s)
 || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.507s, &quot;1&quot;]
  (not (good_state s)
   || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
  || good_state (final_state s dws)</pre></li><li><pre>induction on (functional final_state)
:scheme (dws = [] ==&gt; φ dws s)
        &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
            ==&gt; φ dws s)</pre></li><li><div><pre>Split (let (_x_0 : bool)
           = good_state (final_state s dws)
             || not
                (good_state s
                 &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws)
       in
       let (_x_1 : bool) = not (dws = []) in
       let (_x_2 : state) = next_state (List.hd dws) s in
       let (_x_3 : int list) = List.tl dws in
       (_x_0 || _x_1)
       &amp;&amp; (_x_0
           || not
              (_x_1
               &amp;&amp; (good_state (final_state _x_2 _x_3)
                   || not
                      (good_state _x_2
                       &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1)
                          _x_3))))
       :cases [((not (good_state s)
                 || not
                    (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
                || not (dws = []))
               || good_state (final_state s dws);
               let (_x_0 : state) = next_state (List.hd dws) s in
               let (_x_1 : int list) = List.tl dws in
               (((not (good_state s)
                  || not
                     (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
                 || dws = [])
                || not
                   (good_state _x_0
                    &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) _x_1
                    ==&gt; good_state (final_state _x_0 _x_1)))
               || good_state (final_state s dws)])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-cdd66db5-c092-467e-9f55-19d4a06eac6f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>let (_x_0 : state) = next_state (List.hd dws) s in
let (_x_1 : int list) = List.tl dws in
(((not (good_state s)
   || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
  || dws = [])
 || not
    (good_state _x_0 &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) _x_1
     ==&gt; good_state (final_state _x_0 _x_1)))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.506s, &quot;1&quot;]
  let (_x_0 : state) = next_state (List.hd dws) s in
  let (_x_1 : int list) = List.tl dws in
  (((not (good_state s)
     || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
    || dws = [])
   || not
      (good_state _x_0
       &amp;&amp; List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) _x_1
       ==&gt; good_state (final_state _x_0 _x_1)))
  || good_state (final_state s dws)</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-7652f2d7-5bc7-4d12-ac27-32720ea97d9c"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int) = List.hd dws in
let (_x_1 : state) = next_state _x_0 s in
let (_x_2 : int list) = List.tl dws in
let (_x_3 : bool)
    = ((dws = [] || good_state (final_state _x_1 _x_2)) || good_state _x_1)
      || not (good_state s)
in
let (_x_4 : bool) = _x_0 = 1 in
let (_x_5 : bool) = _x_0 = 0 in
let (_x_6 : bool)
    = not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) _x_2)
in
(((((_x_3 || not (_x_0 = -1)) || _x_4) || _x_5) || _x_6)
 &amp;&amp; (((_x_3 || not _x_5) || _x_4) || _x_6))
&amp;&amp; ((_x_3 || not _x_4) || _x_6)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[final_state, final_state, final_state, List.for_all, List.for_all,
 final_state, final_state, final_state, List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cdd66db5-c092-467e-9f55-19d4a06eac6f';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-a2361fde-c0ca-41f2-b133-c542c307a2cf"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>((not (good_state s)
  || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
 || not (dws = []))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.506s, &quot;2&quot;]
  ((not (good_state s)
    || not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) dws))
   || not (dws = []))
  || good_state (final_state s dws)</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-891e377a-3ed0-4228-ab9f-433279f50631"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[final_state, List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a2361fde-c0ca-41f2-b133-c542c307a2cf';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-57b8db7f-3f78-4d14-9713-0afe37abe9cc';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-888b549a-43da-4732-9717-192711df1fd4';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-bf744251-28a0-40ee-a21d-3296f403b7d2"><textarea style="display: none">digraph &quot;proof&quot; {
p_273 [label=&quot;Start (good_state :var_0:\l       &amp;&amp; List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) :var_1:\l       ==\&gt; good_state (final_state :var_0: :var_1:) :name \&quot;Goal\&quot; :time 0.507s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_273 -&gt; p_271 [label=&quot;&quot;];
subgraph cluster_272 {
  color=blue;
p_271 [label=&quot;Start ((not (good_state s)\l        \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws))\l       \|\| good_state (final_state s dws) :name \&quot;1\&quot; :time 0.507s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_271 -&gt; p_270 [label=&quot;&quot;];
p_270 [label=&quot;Induct ((functional final_state),\l        :scheme (dws = [] ==\&gt; φ dws s)\l                &amp;&amp; (not (dws = [])\l                    &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)\l                    ==\&gt; φ dws s))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_270 -&gt; p_269 [label=&quot;&quot;];
p_269 [label=&quot;Split (let (_x_0 : bool)\l           = good_state (final_state s dws)\l             \|\| not\l                (good_state s\l                 &amp;&amp; List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws)\l       in\l       let (_x_1 : bool) = not (dws = []) in\l       let (_x_2 : state) = next_state (List.hd dws) s in\l       let (_x_3 : int list) = List.tl dws in\l       (_x_0 \|\| _x_1)\l       &amp;&amp; (_x_0\l           \|\| not\l              (_x_1\l               &amp;&amp; (good_state (final_state _x_2 _x_3)\l                   \|\| not\l                      (good_state _x_2\l                       &amp;&amp; List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1)\l                          _x_3))))\l       :cases [((not (good_state s)\l                 \|\| not\l                    (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws))\l                \|\| not (dws = []))\l               \|\| good_state (final_state s dws);\l               let (_x_0 : state) = next_state (List.hd dws) s in\l               let (_x_1 : int list) = List.tl dws in\l               (((not (good_state s)\l                  \|\| not\l                     (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws))\l                 \|\| dws = [])\l                \|\| not\l                   (good_state _x_0\l                    &amp;&amp; List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_1\l                    ==\&gt; good_state (final_state _x_0 _x_1)))\l               \|\| good_state (final_state s dws)])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_269 -&gt; p_264 [label=&quot;&quot;];
subgraph cluster_265 {
  color=blue;
p_264 [label=&quot;Start (let (_x_0 : state) = next_state (List.hd dws) s in\l       let (_x_1 : int list) = List.tl dws in\l       (((not (good_state s)\l          \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws))\l         \|\| dws = [])\l        \|\| not\l           (good_state _x_0\l            &amp;&amp; List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_1\l            ==\&gt; good_state (final_state _x_0 _x_1)))\l       \|\| good_state (final_state s dws) :name \&quot;1\&quot; :time 0.506s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_264 -&gt; p_263 [label=&quot;&quot;];
p_263 [label=&quot;Simplify (let (_x_0 : int) = List.hd dws in\l          let (_x_1 : state) = next_state _x_0 s in\l          let (_x_2 : int list) = List.tl dws in\l          let (_x_3 : bool)\l              = ((dws = [] \|\| good_state (final_state _x_1 _x_2))\l                 \|\| good_state _x_1)\l                \|\| not (good_state s)\l          in\l          let (_x_4 : bool) = _x_0 = 1 in\l          let (_x_5 : bool) = _x_0 = 0 in\l          let (_x_6 : bool)\l              = not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_2)\l          in\l          (((((_x_3 \|\| not (_x_0 = -1)) \|\| _x_4) \|\| _x_5) \|\| _x_6)\l           &amp;&amp; (((_x_3 \|\| not _x_5) \|\| _x_4) \|\| _x_6))\l          &amp;&amp; ((_x_3 \|\| not _x_4) \|\| _x_6)\l          :expansions [final_state;\l                       final_state;\l                       final_state;\l                       List.for_all;\l                       List.for_all;\l                       final_state;\l                       final_state;\l                       final_state;\l                       List.for_all]\l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_263 -&gt; p_255 [label=&quot;&quot;];
subgraph cluster_256 {
  color=blue;
p_255 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       ((((dws = [] \|\| good_state (final_state _x_1 _x_2)) \|\| good_state _x_1)\l         \|\| not (good_state s))\l        \|\| not (_x_0 = 1))\l       \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_2)\l       :name \&quot;1.1\&quot; :time 0.284s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_255 -&gt; p_254 [label=&quot;&quot;];
p_254 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_263 -&gt; p_258 [label=&quot;&quot;];
subgraph cluster_259 {
  color=blue;
p_258 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       (((((dws = [] \|\| good_state (final_state _x_1 _x_2))\l           \|\| good_state _x_1)\l          \|\| not (good_state s))\l         \|\| not (_x_0 = 0))\l        \|\| _x_0 = 1)\l       \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_2)\l       :name \&quot;1.2\&quot; :time 0.297s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_258 -&gt; p_257 [label=&quot;&quot;];
p_257 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_263 -&gt; p_261 [label=&quot;&quot;];
subgraph cluster_262 {
  color=blue;
p_261 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       ((((((dws = [] \|\| good_state (final_state _x_1 _x_2))\l            \|\| good_state _x_1)\l           \|\| not (good_state s))\l          \|\| not (_x_0 = -1))\l         \|\| _x_0 = 1)\l        \|\| _x_0 = 0)\l       \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) _x_2)\l       :name \&quot;1.3\&quot; :time 0.298s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_261 -&gt; p_260 [label=&quot;&quot;];
p_260 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_269 -&gt; p_267 [label=&quot;&quot;];
subgraph cluster_268 {
  color=blue;
p_267 [label=&quot;Start (((not (good_state s)\l         \|\| not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws))\l        \|\| not (dws = []))\l       \|\| good_state (final_state s dws) :name \&quot;2\&quot; :time 0.506s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_267 -&gt; p_266 [label=&quot;&quot;];
p_266 [label=&quot;Simplify (true :expansions [final_state; List.for_all] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-bf744251-28a0-40ee-a21d-3296f403b7d2';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-0eb930ff-e108-465f-b052-ba2bd58a239c';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-905b12ab-a481-4588-b575-d70872f2cf11';
  fold.hydrate(target);
});
</script></div></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Theorem:-Cannot-get-more-than-3-units-off-course.">Theorem: Cannot get more than 3 units off course.<a class="anchor-link" href="#Theorem:-Cannot-get-more-than-3-units-off-course.">&#182;</a></h1><p>We prove: <code>No matter how the wind behaves, if the vehicle starts at the initial state (0,0,0), then the controller guarantees the vehicle never strays farther than 3 units from the x-axis.</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-19" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">enable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">enable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">vehicle_stays_within_3_units_of_course</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="o">-</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">3</span>
 <span class="o">[@@</span><span class="n">simp</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val vehicle_stays_within_3_units_of_course : int list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-92e03c83-5b0a-4b26-9add-0ae548d3ec88"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-92eea8ef-fa1b-4058-b1ad-5dc36edcfe76"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-5fc2a71d-81be-45ea-85be-23f0d520cf0b"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-3a062e2c-cbf7-406f-8006-75ac103502f2"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.040s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-80783520-8cb8-4d01-bb2b-39bf94a6cc68"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-eecc0377-8379-4d11-9280-433e4aedfc82"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-ce3e8917-dcd0-4cbd-9b62-eb3eb6a012d9"><table><tr><td><b>rlimit count</b></td><td>8857</td></tr><tr><td><b>mk bool var</b></td><td>1</td></tr><tr><td><b>num allocs</b></td><td>3354207021</td></tr><tr><td><b>memory</b></td><td>21.180000</td></tr><tr><td><b>max memory</b></td><td>52.670000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-80783520-8cb8-4d01-bb2b-39bf94a6cc68';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-9460eee6-2fad-4816-8cda-f6fb11e60135"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.040s]
  let (_x_0 : int) = (final_state {w = 0; y = 0; v = 0} :var_0:).y in
  List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) :var_0:
  ==&gt; -3 &lt;= _x_0 &amp;&amp; _x_0 &lt;= 3</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-251054a5-e51c-4e4f-93cc-ba7d4682118f"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int) = (final_state {w = 0; y = 0; v = 0} :var_0:).y in
not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) :var_0:)
|| -3 &lt;= _x_0 &amp;&amp; _x_0 &lt;= 3</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-8f14b018-3cdd-4f2d-bbc9-6303d3de08ed"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><pre>all_good</pre></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-9460eee6-2fad-4816-8cda-f6fb11e60135';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-f4c382d8-a09a-46d6-b631-ba0e130e6903"><textarea style="display: none">digraph &quot;proof&quot; {
p_277 [label=&quot;Start (let (_x_0 : int) = (final_state \{w = 0; y = 0; v = 0\} :var_0:).y in\l       List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) :var_0:\l       ==\&gt; -3 \&lt;= _x_0 &amp;&amp; _x_0 \&lt;= 3 :time 0.040s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_277 -&gt; p_276 [label=&quot;&quot;];
p_276 [label=&quot;Simplify (let (_x_0 : int) = (final_state \{w = 0; y = 0; v = 0\} :var_0:).y in\l          not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) :var_0:)\l          \|\| -3 \&lt;= _x_0 &amp;&amp; _x_0 \&lt;= 3 :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_276 -&gt; p_275 [label=&quot;&quot;];
p_275 [label=&quot;Simplify (true :expansions [] :rw [] :fc [all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_275 -&gt; p_274 [label=&quot;&quot;];
p_274 [label=&quot;Unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-f4c382d8-a09a-46d6-b631-ba0e130e6903';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-5fc2a71d-81be-45ea-85be-23f0d520cf0b';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-92eea8ef-fa1b-4058-b1ad-5dc36edcfe76';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-7d2cb8ee-7ff1-45a6-9602-1aacf99d7455"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not true&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-7d2cb8ee-7ff1-45a6-9602-1aacf99d7455';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-92e03c83-5b0a-4b26-9add-0ae548d3ec88';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">Theorem: If wind is stable for 4 intervals, we get back on course.<a class="anchor-link" href="#Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">&#182;</a></h1><p>We prove: <code>If the wind ever becomes constant for at least 4 sampling intervals, then the vehicle returns to the x-axis and stays there as long as the wind remains constant.</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-21" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">steady_wind</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">for_all</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="k">let</span> <span class="n">at_least_4</span> <span class="n">xs</span> <span class="o">=</span> <span class="k">match</span> <span class="n">xs</span> <span class="k">with</span>
    <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val steady_wind : int list -&gt; bool = &lt;fun&gt;
val at_least_4 : &#39;a list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-22" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">disable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">disable</span> <span class="n">good_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">max_induct</span> <span class="mi">4</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">good_state_find_and_stay_zt_zero</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">good_state</span> <span class="n">s</span>
 <span class="o">&amp;&amp;</span> <span class="n">steady_wind</span> <span class="n">dws</span>
 <span class="o">&amp;&amp;</span> <span class="n">at_least_4</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="o">(</span><span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span><span class="o">)</span> <span class="o">[@</span><span class="n">trigger</span><span class="o">]</span> <span class="k">in</span>
 <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">final_state</span><span class="o">]</span>
<span class="o">[@@</span><span class="n">forward_chaining</span><span class="o">]</span>
<span class="o">;;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state_find_and_stay_zt_zero : state -&gt; int list -&gt; bool = &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

good_state s &amp;&amp; steady_wind dws &amp;&amp; at_least_4 dws
==&gt; let (s&#39; : state) = final_state s dws in s&#39;.y = 0.

1 nontautological subgoal.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">final_state</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (dws = [] ==&gt; φ dws s)
 &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
     ==&gt; φ dws s).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2</span>:

 H0. dws = []
 H1. good_state s
 H2. List.for_all (fun x -&gt; x = 0) dws
 H3. dws &lt;&gt; []
 H4. (List.tl dws) &lt;&gt; []
 H5. (List.tl (List.tl dws)) &lt;&gt; []
 H6. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

But simplification reduces this to true.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. not (dws = [])
 H1. ((((good_state (next_state (List.hd dws) s)
         &amp;&amp; List.for_all (fun x -&gt; x = 0) (List.tl dws))
        &amp;&amp; (List.tl dws) &lt;&gt; [])
       &amp;&amp; (List.tl (List.tl dws)) &lt;&gt; [])
      &amp;&amp; (List.tl (List.tl (List.tl dws))) &lt;&gt; [])
     &amp;&amp; (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
     ==&gt; (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0
 H2. good_state s
 H3. List.for_all (fun x -&gt; x = 0) dws
 H4. dws &lt;&gt; []
 H5. (List.tl dws) &lt;&gt; []
 H6. (List.tl (List.tl dws)) &lt;&gt; []
 H7. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

This simplifies, using the definitions of <span class="ansi-blue-intense-fg ansi-bold">List.for_all </span>and<span class="ansi-blue-intense-fg ansi-bold"> final_state</span> to the
following 4 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.4</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.for_all (fun x -&gt; x = 0) (List.tl dws)
 H6. List.hd dws = 0
|---------------------------------------------------------------------------
 C0. good_state (next_state (List.hd dws) s)
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

But simplification reduces this to true, using the definition of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>, and the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.3</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. good_state (next_state (List.hd dws) s)
 H6. List.for_all (fun x -&gt; x = 0) (List.tl dws)
 H7. List.hd dws = 0
|---------------------------------------------------------------------------
 C0. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0
 C1. List.hd (List.tl dws) = 0

But simplification reduces this to true, using the definition of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.2</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. good_state (next_state (List.hd dws) s)
 H6. List.for_all (fun x -&gt; x = 0) (List.tl dws)
 H7. List.hd (List.tl dws) = 0
 H8. List.hd dws = 0
|---------------------------------------------------------------------------
 C0. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0
 C1. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl dws))

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">safety_1</span> to the following 2 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.2.2</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl dws))
|---------------------------------------------------------------------------
 C0. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0
 C1. List.hd (List.tl (List.tl dws)) = 0

But simplification reduces this to true, using the definition of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.2.1</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl dws))
 H8. List.hd (List.tl (List.tl dws)) = 0
|---------------------------------------------------------------------------
 C0. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0
 C1. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl (List.tl dws)))

But simplification reduces this to true, using the definition of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1</span>:

 H0. dws &lt;&gt; []
 H1. good_state s
 H2. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. good_state (next_state (List.hd dws) s)
 H6. List.for_all (fun x -&gt; x = 0) (List.tl dws)
 H7. List.hd (List.tl dws) = 0
 H8. List.hd dws = 0
 H9. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl dws))
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">safety_1</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1&#39;</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl dws))
 H8. List.hd (List.tl (List.tl dws)) = 0
 H9. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl (List.tl dws)))
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1&#39;&#39;</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.hd (List.tl (List.tl dws)) = 0
 H8. List.for_all (fun x -&gt; x = 0) (List.tl (List.tl (List.tl dws)))
 H9. List.for_all (fun x -&gt; x = 0)
     (List.tl (List.tl (List.tl (List.tl dws))))
 H10. List.hd (List.tl (List.tl (List.tl dws))) = 0
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1&#39;&#39;&#39;</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.hd (List.tl (List.tl dws)) = 0
 H8. List.for_all (fun x -&gt; x = 0)
     (List.tl (List.tl (List.tl (List.tl dws))))
 H9. List.hd (List.tl (List.tl (List.tl dws))) = 0
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1&#39;&#39;&#39;&#39;</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.hd (List.tl (List.tl dws)) = 0
 H8. List.hd (List.tl (List.tl (List.tl dws))) = 0
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state (List.hd dws) s) (List.tl dws)).y = 0

This further simplifies to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1&#39;&#39;&#39;&#39;&#39;</span>:

 H0. good_state s
 H1. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H2. dws &lt;&gt; []
 H3. (List.tl dws) &lt;&gt; []
 H4. (List.tl (List.tl dws)) &lt;&gt; []
 H5. List.hd (List.tl dws) = 0
 H6. List.hd dws = 0
 H7. List.hd (List.tl (List.tl dws)) = 0
 H8. List.hd (List.tl (List.tl (List.tl dws))) = 0
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl (List.tl dws)))) &lt;&gt; []
 C1. (final_state (next_state 0 s) (List.tl dws)).y = 0

But we verify Subgoal 1.1&#39;&#39;&#39;&#39;&#39; by recursive unrolling.

<span class="ansi-cyan-intense-fg ansi-bold"> ⓘ </span> Rules:
    (:def List.for_all)
    (:def final_state)
    (:rw safety_1)
    (:fc all_good)
    (:induct final_state)

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-89dc51d5-01fc-43f9-bdd6-afc18826ebd2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-a8207714-c9a1-44a2-ad4e-be564ce17f4a"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-4ff4a3e2-1e62-467c-b7e3-a5b8a4b904b0"><table><tr><td><b>ground_instances</b></td><td>4</td></tr><tr><td><b>definitions</b></td><td>25</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>2.633s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-cfa5b921-8ec6-437c-ba88-1af0e474d38f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-658c6ef5-fbde-4dab-92c2-5d01d678d1be"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-ee073576-baaa-4ea5-9d8f-30849ee2ff47"><table><tr><td><b>num checks</b></td><td>9</td></tr><tr><td><b>arith-make-feasible</b></td><td>259</td></tr><tr><td><b>arith-max-columns</b></td><td>35</td></tr><tr><td><b>arith-conflicts</b></td><td>5</td></tr><tr><td><b>rlimit count</b></td><td>275246</td></tr><tr><td><b>arith-cheap-eqs</b></td><td>142</td></tr><tr><td><b>mk clause</b></td><td>2162</td></tr><tr><td><b>datatype occurs check</b></td><td>24</td></tr><tr><td><b>mk bool var</b></td><td>839</td></tr><tr><td><b>arith-lower</b></td><td>571</td></tr><tr><td><b>arith-diseq</b></td><td>692</td></tr><tr><td><b>decisions</b></td><td>164</td></tr><tr><td><b>arith-propagations</b></td><td>721</td></tr><tr><td><b>propagations</b></td><td>2862</td></tr><tr><td><b>arith-bound-propagations-cheap</b></td><td>721</td></tr><tr><td><b>arith-max-rows</b></td><td>21</td></tr><tr><td><b>conflicts</b></td><td>65</td></tr><tr><td><b>datatype accessor ax</b></td><td>12</td></tr><tr><td><b>minimized lits</b></td><td>91</td></tr><tr><td><b>arith-bound-propagations-lp</b></td><td>185</td></tr><tr><td><b>datatype constructor ax</b></td><td>7</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>2325</td></tr><tr><td><b>del clause</b></td><td>991</td></tr><tr><td><b>arith eq adapter</b></td><td>336</td></tr><tr><td><b>arith-upper</b></td><td>542</td></tr><tr><td><b>memory</b></td><td>72.610000</td></tr><tr><td><b>max memory</b></td><td>77.700000</td></tr><tr><td><b>num allocs</b></td><td>28257797426.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cfa5b921-8ec6-437c-ba88-1af0e474d38f';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-898ae3b1-6e4b-4fd4-b2ef-44465dfdd67a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.633s, &quot;Goal&quot;]
  let (_x_0 : int list) = List.tl :var_1: in
  let (_x_1 : int list) = List.tl _x_0 in
  good_state :var_0:
  &amp;&amp; List.for_all (fun x -&gt; x = 0) :var_1:
     &amp;&amp; :var_1: &lt;&gt; [] &amp;&amp; _x_0 &lt;&gt; [] &amp;&amp; _x_1 &lt;&gt; [] &amp;&amp; (List.tl _x_1) &lt;&gt; []
  ==&gt; (final_state :var_0: :var_1:).y = 0</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-f43adb41-c6a3-4367-9667-6cbebae4a1d6"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>let (_x_0 : int list) = List.tl dws in
let (_x_1 : int list) = List.tl _x_0 in
(((((not (good_state s) || not (List.for_all (fun x -&gt; x = 0) dws))
    || not (dws &lt;&gt; []))
   || not (_x_0 &lt;&gt; []))
  || not (_x_1 &lt;&gt; []))
 || not ((List.tl _x_1) &lt;&gt; []))
|| (final_state s dws).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.633s, &quot;1&quot;]
  let (_x_0 : int list) = List.tl dws in
  let (_x_1 : int list) = List.tl _x_0 in
  (((((not (good_state s) || not (List.for_all (fun x -&gt; x = 0) dws))
      || not (dws &lt;&gt; []))
     || not (_x_0 &lt;&gt; []))
    || not (_x_1 &lt;&gt; []))
   || not ((List.tl _x_1) &lt;&gt; []))
  || (final_state s dws).y = 0</pre></li><li><pre>induction on (functional final_state)
:scheme (dws = [] ==&gt; φ dws s)
        &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
            ==&gt; φ dws s)</pre></li><li><div><pre>Split (let (_x_0 : bool) = (final_state s dws).y = 0 in
       let (_x_1 : bool) = not (dws = []) in
       let (_x_2 : int list) = List.tl dws in
       let (_x_3 : bool) = _x_2 &lt;&gt; [] in
       let (_x_4 : int list) = List.tl _x_2 in
       let (_x_5 : bool) = _x_4 &lt;&gt; [] in
       let (_x_6 : int list) = List.tl _x_4 in
       let (_x_7 : bool) = _x_6 &lt;&gt; [] in
       let (_x_8 : bool)
           = not
             (((((good_state s &amp;&amp; List.for_all (fun x -&gt; x = 0) dws)
                 &amp;&amp; dws &lt;&gt; [])
                &amp;&amp; _x_3)
               &amp;&amp; _x_5)
              &amp;&amp; _x_7)
       in
       let (_x_9 : state) = next_state (List.hd dws) s in
       ((_x_0 || _x_1) || _x_8)
       &amp;&amp; ((_x_0
            || not
               (_x_1
                &amp;&amp; (not
                    (((((good_state _x_9
                         &amp;&amp; List.for_all (fun x -&gt; x = 0) _x_2)
                        &amp;&amp; _x_3)
                       &amp;&amp; _x_5)
                      &amp;&amp; _x_7)
                     &amp;&amp; (List.tl _x_6) &lt;&gt; [])
                    || (final_state _x_9 _x_2).y = 0)))
           || _x_8)
       :cases [let (_x_0 : int list) = List.tl dws in
               let (_x_1 : int list) = List.tl _x_0 in
               ((((((not (dws = []) || not (good_state s))
                    || not (List.for_all (fun x -&gt; x = 0) dws))
                   || not (dws &lt;&gt; []))
                  || not (_x_0 &lt;&gt; []))
                 || not (_x_1 &lt;&gt; []))
                || not ((List.tl _x_1) &lt;&gt; []))
               || (final_state s dws).y = 0;
               let (_x_0 : state) = next_state (List.hd dws) s in
               let (_x_1 : int list) = List.tl dws in
               let (_x_2 : bool) = _x_1 &lt;&gt; [] in
               let (_x_3 : int list) = List.tl _x_1 in
               let (_x_4 : bool) = _x_3 &lt;&gt; [] in
               let (_x_5 : int list) = List.tl _x_3 in
               let (_x_6 : bool) = _x_5 &lt;&gt; [] in
               (((((((dws = []
                      || not
                         (((((good_state _x_0
                              &amp;&amp; List.for_all (fun x -&gt; x = 0) _x_1)
                             &amp;&amp; _x_2)
                            &amp;&amp; _x_4)
                           &amp;&amp; _x_6)
                          &amp;&amp; (List.tl _x_5) &lt;&gt; []
                          ==&gt; (final_state _x_0 _x_1).y = 0))
                     || not (good_state s))
                    || not (List.for_all (fun x -&gt; x = 0) dws))
                   || not (dws &lt;&gt; []))
                  || not _x_2)
                 || not _x_4)
                || not _x_6)
               || (final_state s dws).y = 0])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-224667aa-140c-4f94-90b0-016c3af1b467"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>let (_x_0 : state) = next_state (List.hd dws) s in
let (_x_1 : int list) = List.tl dws in
let (_x_2 : bool) = _x_1 &lt;&gt; [] in
let (_x_3 : int list) = List.tl _x_1 in
let (_x_4 : bool) = _x_3 &lt;&gt; [] in
let (_x_5 : int list) = List.tl _x_3 in
let (_x_6 : bool) = _x_5 &lt;&gt; [] in
(((((((dws = []
       || not
          (((((good_state _x_0 &amp;&amp; List.for_all (fun x -&gt; x = 0) _x_1) &amp;&amp; _x_2)
             &amp;&amp; _x_4)
            &amp;&amp; _x_6)
           &amp;&amp; (List.tl _x_5) &lt;&gt; [] ==&gt; (final_state _x_0 _x_1).y = 0))
      || not (good_state s))
     || not (List.for_all (fun x -&gt; x = 0) dws))
    || not (dws &lt;&gt; []))
   || not _x_2)
  || not _x_4)
 || not _x_6)
|| (final_state s dws).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.631s, &quot;1&quot;]
  let (_x_0 : state) = next_state (List.hd dws) s in
  let (_x_1 : int list) = List.tl dws in
  let (_x_2 : bool) = _x_1 &lt;&gt; [] in
  let (_x_3 : int list) = List.tl _x_1 in
  let (_x_4 : bool) = _x_3 &lt;&gt; [] in
  let (_x_5 : int list) = List.tl _x_3 in
  let (_x_6 : bool) = _x_5 &lt;&gt; [] in
  (((((((dws = []
         || not
            (((((good_state _x_0 &amp;&amp; List.for_all (fun x -&gt; x = 0) _x_1)
                &amp;&amp; _x_2)
               &amp;&amp; _x_4)
              &amp;&amp; _x_6)
             &amp;&amp; (List.tl _x_5) &lt;&gt; [] ==&gt; (final_state _x_0 _x_1).y = 0))
        || not (good_state s))
       || not (List.for_all (fun x -&gt; x = 0) dws))
      || not (dws &lt;&gt; []))
     || not _x_2)
    || not _x_4)
   || not _x_6)
  || (final_state s dws).y = 0</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-41fe0b08-435f-43cc-84c0-ca79862f6326"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : bool) = dws = [] in
let (_x_1 : int) = List.hd dws in
let (_x_2 : state) = next_state _x_1 s in
let (_x_3 : bool) = good_state _x_2 in
let (_x_4 : int list) = List.tl dws in
let (_x_5 : bool) = (final_state _x_2 _x_4).y = 0 in
let (_x_6 : bool) = not (good_state s) in
let (_x_7 : int list) = List.tl _x_4 in
let (_x_8 : int list) = List.tl _x_7 in
let (_x_9 : bool) = not (_x_8 &lt;&gt; []) in
let (_x_10 : bool) = not (_x_4 &lt;&gt; []) in
let (_x_11 : bool) = not (_x_7 &lt;&gt; []) in
let (_x_12 : bool) = not (List.for_all (fun x -&gt; x = 0) _x_4) in
let (_x_13 : bool) = not (_x_1 = 0) in
let (_x_14 : bool) = not _x_3 in
let (_x_15 : bool)
    = ((((((_x_0 || _x_5) || _x_6) || _x_9) || _x_10) || _x_11) || _x_14)
      || _x_12
in
let (_x_16 : bool) = List.hd _x_4 = 0 in
let (_x_17 : bool) = not _x_16 in
let (_x_18 : bool) = List.for_all (fun x -&gt; x = 0) _x_7 in
((((((((((_x_0 || _x_3) || _x_5) || _x_6) || _x_9) || _x_10) || _x_11)
    || _x_12)
   || _x_13)
  &amp;&amp; ((_x_15 || _x_13) || _x_16))
 &amp;&amp; (((_x_15 || _x_17) || _x_13) || _x_18))
&amp;&amp; (((((((((((_x_0 || (List.tl _x_8) &lt;&gt; []) || _x_5) || _x_6) || _x_9)
          || _x_10)
         || _x_11)
        || _x_14)
       || _x_12)
      || _x_17)
     || _x_13)
    || not _x_18)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[final_state, List.for_all, final_state, List.for_all, final_state,
 List.for_all, final_state, List.for_all, final_state, List.for_all,
 List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-224667aa-140c-4f94-90b0-016c3af1b467';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-7c0a18fc-152c-4b29-a68c-98e8432f0afb"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>let (_x_0 : int list) = List.tl dws in
let (_x_1 : int list) = List.tl _x_0 in
((((((not (dws = []) || not (good_state s))
     || not (List.for_all (fun x -&gt; x = 0) dws))
    || not (dws &lt;&gt; []))
   || not (_x_0 &lt;&gt; []))
  || not (_x_1 &lt;&gt; []))
 || not ((List.tl _x_1) &lt;&gt; []))
|| (final_state s dws).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.631s, &quot;2&quot;]
  let (_x_0 : int list) = List.tl dws in
  let (_x_1 : int list) = List.tl _x_0 in
  ((((((not (dws = []) || not (good_state s))
       || not (List.for_all (fun x -&gt; x = 0) dws))
      || not (dws &lt;&gt; []))
     || not (_x_0 &lt;&gt; []))
    || not (_x_1 &lt;&gt; []))
   || not ((List.tl _x_1) &lt;&gt; []))
  || (final_state s dws).y = 0</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-6767a546-bc23-456b-bd58-d27586615542"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-7c0a18fc-152c-4b29-a68c-98e8432f0afb';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f43adb41-c6a3-4367-9667-6cbebae4a1d6';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-898ae3b1-6e4b-4fd4-b2ef-44465dfdd67a';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-8f8c004d-8cdf-4f98-9c45-fbb2786b3630"><textarea style="display: none">digraph &quot;proof&quot; {
p_318 [label=&quot;Start (let (_x_0 : int list) = List.tl :var_1: in\l       let (_x_1 : int list) = List.tl _x_0 in\l       good_state :var_0:\l       &amp;&amp; List.for_all (fun x -\&gt; x = 0) :var_1:\l          &amp;&amp; :var_1: \&lt;\&gt; []\l             &amp;&amp; _x_0 \&lt;\&gt; [] &amp;&amp; _x_1 \&lt;\&gt; [] &amp;&amp; (List.tl _x_1) \&lt;\&gt; []\l       ==\&gt; (final_state :var_0: :var_1:).y = 0 :name \&quot;Goal\&quot; :time 2.633s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_318 -&gt; p_316 [label=&quot;&quot;];
subgraph cluster_317 {
  color=blue;
p_316 [label=&quot;Start (let (_x_0 : int list) = List.tl dws in\l       let (_x_1 : int list) = List.tl _x_0 in\l       (((((not (good_state s) \|\| not (List.for_all (fun x -\&gt; x = 0) dws))\l           \|\| not (dws \&lt;\&gt; []))\l          \|\| not (_x_0 \&lt;\&gt; []))\l         \|\| not (_x_1 \&lt;\&gt; []))\l        \|\| not ((List.tl _x_1) \&lt;\&gt; []))\l       \|\| (final_state s dws).y = 0 :name \&quot;1\&quot; :time 2.633s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_316 -&gt; p_315 [label=&quot;&quot;];
p_315 [label=&quot;Induct ((functional final_state),\l        :scheme (dws = [] ==\&gt; φ dws s)\l                &amp;&amp; (not (dws = [])\l                    &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)\l                    ==\&gt; φ dws s))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_315 -&gt; p_314 [label=&quot;&quot;];
p_314 [label=&quot;Split (let (_x_0 : bool) = (final_state s dws).y = 0 in\l       let (_x_1 : bool) = not (dws = []) in\l       let (_x_2 : int list) = List.tl dws in\l       let (_x_3 : bool) = _x_2 \&lt;\&gt; [] in\l       let (_x_4 : int list) = List.tl _x_2 in\l       let (_x_5 : bool) = _x_4 \&lt;\&gt; [] in\l       let (_x_6 : int list) = List.tl _x_4 in\l       let (_x_7 : bool) = _x_6 \&lt;\&gt; [] in\l       let (_x_8 : bool)\l           = not\l             (((((good_state s &amp;&amp; List.for_all (fun x -\&gt; x = 0) dws)\l                 &amp;&amp; dws \&lt;\&gt; [])\l                &amp;&amp; _x_3)\l               &amp;&amp; _x_5)\l              &amp;&amp; _x_7)\l       in\l       let (_x_9 : state) = next_state (List.hd dws) s in\l       ((_x_0 \|\| _x_1) \|\| _x_8)\l       &amp;&amp; ((_x_0\l            \|\| not\l               (_x_1\l                &amp;&amp; (not\l                    (((((good_state _x_9\l                         &amp;&amp; List.for_all (fun x -\&gt; x = 0) _x_2)\l                        &amp;&amp; _x_3)\l                       &amp;&amp; _x_5)\l                      &amp;&amp; _x_7)\l                     &amp;&amp; (List.tl _x_6) \&lt;\&gt; [])\l                    \|\| (final_state _x_9 _x_2).y = 0)))\l           \|\| _x_8)\l       :cases [let (_x_0 : int list) = List.tl dws in\l               let (_x_1 : int list) = List.tl _x_0 in\l               ((((((not (dws = []) \|\| not (good_state s))\l                    \|\| not (List.for_all (fun x -\&gt; x = 0) dws))\l                   \|\| not (dws \&lt;\&gt; []))\l                  \|\| not (_x_0 \&lt;\&gt; []))\l                 \|\| not (_x_1 \&lt;\&gt; []))\l                \|\| not ((List.tl _x_1) \&lt;\&gt; []))\l               \|\| (final_state s dws).y = 0;\l               let (_x_0 : state) = next_state (List.hd dws) s in\l               let (_x_1 : int list) = List.tl dws in\l               let (_x_2 : bool) = _x_1 \&lt;\&gt; [] in\l               let (_x_3 : int list) = List.tl _x_1 in\l               let (_x_4 : bool) = _x_3 \&lt;\&gt; [] in\l               let (_x_5 : int list) = List.tl _x_3 in\l               let (_x_6 : bool) = _x_5 \&lt;\&gt; [] in\l               (((((((dws = []\l                      \|\| not\l                         (((((good_state _x_0\l                              &amp;&amp; List.for_all (fun x -\&gt; x = 0) _x_1)\l                             &amp;&amp; _x_2)\l                            &amp;&amp; _x_4)\l                           &amp;&amp; _x_6)\l                          &amp;&amp; (List.tl _x_5) \&lt;\&gt; []\l                          ==\&gt; (final_state _x_0 _x_1).y = 0))\l                     \|\| not (good_state s))\l                    \|\| not (List.for_all (fun x -\&gt; x = 0) dws))\l                   \|\| not (dws \&lt;\&gt; []))\l                  \|\| not _x_2)\l                 \|\| not _x_4)\l                \|\| not _x_6)\l               \|\| (final_state s dws).y = 0])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_314 -&gt; p_309 [label=&quot;&quot;];
subgraph cluster_310 {
  color=blue;
p_309 [label=&quot;Start (let (_x_0 : state) = next_state (List.hd dws) s in\l       let (_x_1 : int list) = List.tl dws in\l       let (_x_2 : bool) = _x_1 \&lt;\&gt; [] in\l       let (_x_3 : int list) = List.tl _x_1 in\l       let (_x_4 : bool) = _x_3 \&lt;\&gt; [] in\l       let (_x_5 : int list) = List.tl _x_3 in\l       let (_x_6 : bool) = _x_5 \&lt;\&gt; [] in\l       (((((((dws = []\l              \|\| not\l                 (((((good_state _x_0 &amp;&amp; List.for_all (fun x -\&gt; x = 0) _x_1)\l                     &amp;&amp; _x_2)\l                    &amp;&amp; _x_4)\l                   &amp;&amp; _x_6)\l                  &amp;&amp; (List.tl _x_5) \&lt;\&gt; [] ==\&gt; (final_state _x_0 _x_1).y = 0))\l             \|\| not (good_state s))\l            \|\| not (List.for_all (fun x -\&gt; x = 0) dws))\l           \|\| not (dws \&lt;\&gt; []))\l          \|\| not _x_2)\l         \|\| not _x_4)\l        \|\| not _x_6)\l       \|\| (final_state s dws).y = 0 :name \&quot;1\&quot; :time 2.631s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_309 -&gt; p_308 [label=&quot;&quot;];
p_308 [label=&quot;Simplify (let (_x_0 : bool) = dws = [] in\l          let (_x_1 : int) = List.hd dws in\l          let (_x_2 : state) = next_state _x_1 s in\l          let (_x_3 : bool) = good_state _x_2 in\l          let (_x_4 : int list) = List.tl dws in\l          let (_x_5 : bool) = (final_state _x_2 _x_4).y = 0 in\l          let (_x_6 : bool) = not (good_state s) in\l          let (_x_7 : int list) = List.tl _x_4 in\l          let (_x_8 : int list) = List.tl _x_7 in\l          let (_x_9 : bool) = not (_x_8 \&lt;\&gt; []) in\l          let (_x_10 : bool) = not (_x_4 \&lt;\&gt; []) in\l          let (_x_11 : bool) = not (_x_7 \&lt;\&gt; []) in\l          let (_x_12 : bool) = not (List.for_all (fun x -\&gt; x = 0) _x_4) in\l          let (_x_13 : bool) = not (_x_1 = 0) in\l          let (_x_14 : bool) = not _x_3 in\l          let (_x_15 : bool)\l              = ((((((_x_0 \|\| _x_5) \|\| _x_6) \|\| _x_9) \|\| _x_10) \|\| _x_11)\l                 \|\| _x_14)\l                \|\| _x_12\l          in\l          let (_x_16 : bool) = List.hd _x_4 = 0 in\l          let (_x_17 : bool) = not _x_16 in\l          let (_x_18 : bool) = List.for_all (fun x -\&gt; x = 0) _x_7 in\l          ((((((((((_x_0 \|\| _x_3) \|\| _x_5) \|\| _x_6) \|\| _x_9) \|\| _x_10)\l               \|\| _x_11)\l              \|\| _x_12)\l             \|\| _x_13)\l            &amp;&amp; ((_x_15 \|\| _x_13) \|\| _x_16))\l           &amp;&amp; (((_x_15 \|\| _x_17) \|\| _x_13) \|\| _x_18))\l          &amp;&amp; (((((((((((_x_0 \|\| (List.tl _x_8) \&lt;\&gt; []) \|\| _x_5) \|\| _x_6)\l                     \|\| _x_9)\l                    \|\| _x_10)\l                   \|\| _x_11)\l                  \|\| _x_14)\l                 \|\| _x_12)\l                \|\| _x_17)\l               \|\| _x_13)\l              \|\| not _x_18)\l          :expansions [final_state;\l                       List.for_all;\l                       final_state;\l                       List.for_all;\l                       final_state;\l                       List.for_all;\l                       final_state;\l                       List.for_all;\l                       final_state;\l                       List.for_all;\l                       List.for_all]\l          :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_308 -&gt; p_291 [label=&quot;&quot;];
subgraph cluster_292 {
  color=blue;
p_291 [label=&quot;Start (let (_x_0 : int list) = List.tl dws in\l       let (_x_1 : int list) = List.tl _x_0 in\l       let (_x_2 : int list) = List.tl _x_1 in\l       let (_x_3 : int) = List.hd dws in\l       let (_x_4 : state) = next_state _x_3 s in\l       ((((((((((dws = [] \|\| (List.tl _x_2) \&lt;\&gt; [])\l                \|\| (final_state _x_4 _x_0).y = 0)\l               \|\| not (good_state s))\l              \|\| not (_x_2 \&lt;\&gt; []))\l             \|\| not (_x_0 \&lt;\&gt; []))\l            \|\| not (_x_1 \&lt;\&gt; []))\l           \|\| not (good_state _x_4))\l          \|\| not (List.for_all (fun x -\&gt; x = 0) _x_0))\l         \|\| not (List.hd _x_0 = 0))\l        \|\| not (_x_3 = 0))\l       \|\| not (List.for_all (fun x -\&gt; x = 0) _x_1) :name \&quot;1.1\&quot; :time 1.952s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_291 -&gt; p_290 [label=&quot;&quot;];
p_290 [label=&quot;Simplify (let (_x_0 : int list) = List.tl dws in\l          let (_x_1 : int list) = List.tl _x_0 in\l          let (_x_2 : int list) = List.tl _x_1 in\l          let (_x_3 : int) = List.hd dws in\l          (((((((((((List.tl _x_2) \&lt;\&gt; []\l                    \|\| (final_state (next_state _x_3 s) _x_0).y = 0)\l                   \|\| not (good_state s))\l                  \|\| not (_x_2 \&lt;\&gt; []))\l                 \|\| not (dws \&lt;\&gt; []))\l                \|\| not (_x_0 \&lt;\&gt; []))\l               \|\| not (_x_1 \&lt;\&gt; []))\l              \|\| not (List.hd _x_0 = 0))\l             \|\| not (_x_3 = 0))\l            \|\| not (List.for_all (fun x -\&gt; x = 0) _x_1))\l           \|\| not (List.hd _x_1 = 0))\l          \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2)\l          :expansions [List.for_all; List.for_all] :rw [safety_1]\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_290 -&gt; p_289 [label=&quot;&quot;];
p_289 [label=&quot;Simplify (let (_x_0 : int list) = List.tl dws in\l          let (_x_1 : int list) = List.tl _x_0 in\l          let (_x_2 : int list) = List.tl _x_1 in\l          let (_x_3 : int list) = List.tl _x_2 in\l          let (_x_4 : int) = List.hd dws in\l          (((((((((((_x_3 \&lt;\&gt; []\l                     \|\| (final_state (next_state _x_4 s) _x_0).y = 0)\l                    \|\| not (good_state s))\l                   \|\| not (_x_2 \&lt;\&gt; []))\l                  \|\| not (dws \&lt;\&gt; []))\l                 \|\| not (_x_0 \&lt;\&gt; []))\l                \|\| not (_x_1 \&lt;\&gt; []))\l               \|\| not (List.hd _x_0 = 0))\l              \|\| not (_x_4 = 0))\l             \|\| not (List.hd _x_1 = 0))\l            \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2))\l           \|\| not (List.for_all (fun x -\&gt; x = 0) _x_3))\l          \|\| not (List.hd _x_2 = 0) :expansions [List.for_all; List.for_all]\l          :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_289 -&gt; p_288 [label=&quot;&quot;];
p_288 [label=&quot;Simplify (let (_x_0 : int list) = List.tl dws in\l          let (_x_1 : int list) = List.tl _x_0 in\l          let (_x_2 : int list) = List.tl _x_1 in\l          let (_x_3 : int list) = List.tl _x_2 in\l          let (_x_4 : int) = List.hd dws in\l          ((((((((((_x_3 \&lt;\&gt; []\l                    \|\| (final_state (next_state _x_4 s) _x_0).y = 0)\l                   \|\| not (good_state s))\l                  \|\| not (_x_2 \&lt;\&gt; []))\l                 \|\| not (dws \&lt;\&gt; []))\l                \|\| not (_x_0 \&lt;\&gt; []))\l               \|\| not (_x_1 \&lt;\&gt; []))\l              \|\| not (List.hd _x_0 = 0))\l             \|\| not (_x_4 = 0))\l            \|\| not (List.hd _x_1 = 0))\l           \|\| not (List.for_all (fun x -\&gt; x = 0) _x_3))\l          \|\| not (List.hd _x_2 = 0) :expansions [List.for_all; List.for_all]\l          :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_288 -&gt; p_287 [label=&quot;&quot;];
p_287 [label=&quot;Simplify (let (_x_0 : int list) = List.tl dws in\l          let (_x_1 : int list) = List.tl _x_0 in\l          let (_x_2 : int list) = List.tl _x_1 in\l          let (_x_3 : int) = List.hd dws in\l          ((((((((((List.tl _x_2) \&lt;\&gt; []\l                   \|\| (final_state (next_state _x_3 s) _x_0).y = 0)\l                  \|\| not (good_state s))\l                 \|\| not (_x_2 \&lt;\&gt; []))\l                \|\| not (dws \&lt;\&gt; []))\l               \|\| not (_x_0 \&lt;\&gt; []))\l              \|\| not (_x_1 \&lt;\&gt; []))\l             \|\| not (List.hd _x_0 = 0))\l            \|\| not (_x_3 = 0))\l           \|\| not (List.hd _x_1 = 0))\l          \|\| not (List.hd _x_2 = 0) :expansions [List.for_all] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_287 -&gt; p_286 [label=&quot;&quot;];
p_286 [label=&quot;Simplify (let (_x_0 : int list) = List.tl dws in\l          let (_x_1 : int list) = List.tl _x_0 in\l          let (_x_2 : int list) = List.tl _x_1 in\l          ((((((((((List.tl _x_2) \&lt;\&gt; [] \|\| not (good_state s))\l                  \|\| not (_x_2 \&lt;\&gt; []))\l                 \|\| not (dws \&lt;\&gt; []))\l                \|\| not (_x_0 \&lt;\&gt; []))\l               \|\| not (_x_1 \&lt;\&gt; []))\l              \|\| not (List.hd _x_0 = 0))\l             \|\| not (List.hd dws = 0))\l            \|\| not (List.hd _x_1 = 0))\l           \|\| (final_state (next_state 0 s) _x_0).y = 0)\l          \|\| not (List.hd _x_2 = 0) :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_286 -&gt; p_284 [label=&quot;&quot;];
subgraph cluster_285 {
  color=blue;
p_284 [label=&quot;Start (let (_x_0 : int) = :var_2:.w in\l       let (_x_1 : int) = :var_2:.v in\l       let (_x_2 : int) = _x_0 + _x_1 in\l       let (_x_3 : bool) = 2 = _x_2 in\l       let (_x_4 : int) = :var_2:.y in\l       let (_x_5 : bool) = -2 = _x_4 in\l       let (_x_6 : bool) = 1 = _x_2 in\l       let (_x_7 : int list) = List.tl :var_3: in\l       let (_x_8 : int list) = List.tl _x_7 in\l       let (_x_9 : int list) = List.tl _x_8 in\l       let (_x_10 : int) = ((_x_4 + _x_1) + _x_0) + 0 in\l       (((((((((not\l                (if _x_6 &amp;&amp; -3 = _x_4 then true\l                 else\l                 if _x_6 &amp;&amp; _x_5 then true\l                 else\l                 if _x_3 &amp;&amp; _x_5 then true\l                 else if _x_3 &amp;&amp; -1 = _x_4 then true else …)\l                \|\| not (_x_9 \&lt;\&gt; []))\l               \|\| not (:var_3: \&lt;\&gt; []))\l              \|\| not (_x_7 \&lt;\&gt; []))\l             \|\| not (_x_8 \&lt;\&gt; []))\l            \|\| not (List.hd _x_7 = 0))\l           \|\| not (List.hd :var_3: = 0))\l          \|\| not (List.hd _x_8 = 0))\l         \|\| not (List.hd _x_9 = 0))\l        \|\| (List.tl _x_9) \&lt;\&gt; [])\l       \|\| (final_state\l           \{w = _x_0 + 0; y = _x_10;\l            v =\l            _x_1\l            + -3 * (if _x_10 \&lt; 0 then -1 else …)\l              + 2 * (if _x_4 \&lt; 0 then -1 else …)\}\l           _x_7).y\l          = 0\l       :time 0.139s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_284 -&gt; p_283 [label=&quot;&quot;];
p_283 [label=&quot;Simplify (let (_x_0 : int) = :var_2:.w in\l          let (_x_1 : int) = :var_2:.v in\l          let (_x_2 : int) = _x_0 + _x_1 in\l          let (_x_3 : bool) = 1 = _x_2 in\l          let (_x_4 : int) = :var_2:.y in\l          let (_x_5 : bool) = -2 = _x_4 in\l          let (_x_6 : bool) = 2 = _x_2 in\l          let (_x_7 : bool) = -1 = _x_4 in\l          let (_x_8 : bool) = -1 = _x_2 in\l          let (_x_9 : bool) = 0 = _x_4 in\l          let (_x_10 : bool) = -2 = _x_2 in\l          let (_x_11 : bool) = 1 = _x_4 in\l          let (_x_12 : bool) = 2 = _x_4 in\l          let (_x_13 : int) = (_x_4 + _x_1) + _x_0 in\l          let (_x_14 : int list) = List.tl :var_3: in\l          let (_x_15 : int list) = List.tl _x_14 in\l          let (_x_16 : int list) = List.tl _x_15 in\l          (((((((((not\l                   ((((((((((((_x_3 &amp;&amp; -3 = _x_4 \|\| _x_3 &amp;&amp; _x_5)\l                              \|\| _x_6 &amp;&amp; _x_5)\l                             \|\| _x_6 &amp;&amp; _x_7)\l                            \|\| 3 = _x_2 &amp;&amp; _x_7)\l                           \|\| _x_8 &amp;&amp; _x_9)\l                          \|\| 0 = _x_2 &amp;&amp; _x_9)\l                         \|\| _x_3 &amp;&amp; _x_9)\l                        \|\| _x_10 &amp;&amp; _x_11)\l                       \|\| -3 = _x_2 &amp;&amp; _x_11)\l                      \|\| _x_8 &amp;&amp; _x_12)\l                     \|\| _x_10 &amp;&amp; _x_12)\l                    \|\| _x_8 &amp;&amp; 3 = _x_4)\l                   \|\| (final_state\l                       \{w = _x_0; y = _x_13;\l                        v =\l                        (_x_1 + -3 * (if 0 \&lt;= _x_13 then … else -1))\l                        + 2 * (if 0 \&lt;= _x_4 then … else -1)\}\l                       _x_14).y\l                      = 0)\l                  \|\| not (_x_16 \&lt;\&gt; []))\l                 \|\| not (:var_3: \&lt;\&gt; []))\l                \|\| not (_x_14 \&lt;\&gt; []))\l               \|\| not (_x_15 \&lt;\&gt; []))\l              \|\| not (List.hd _x_14 = 0))\l             \|\| not (List.hd :var_3: = 0))\l            \|\| not (List.hd _x_15 = 0))\l           \|\| not (List.hd _x_16 = 0))\l          \|\| (List.tl _x_16) \&lt;\&gt; [] :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_283 -&gt; p_282 [label=&quot;&quot;];
p_282 [label=&quot;Unroll ([let (_x_0 : int) = s.w in\l         let (_x_1 : int) = s.y in\l         let (_x_2 : int) = s.v in\l         let (_x_3 : int) = (_x_1 + _x_2) + _x_0 in\l         final_state\l         \{w = _x_0; y = _x_3;\l          v =\l          (_x_2 + -3 * (if 0 \&lt;= _x_3 then if _x_3 = 0 then 0 else 1 else -1))\l          + 2 * (if 0 \&lt;= _x_1 then if _x_1 = 0 then 0 else 1 else -1)\}\l         (List.tl dws)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_282 -&gt; p_281 [label=&quot;&quot;];
p_281 [label=&quot;Unroll ([let (_x_0 : int) = s.w in\l         let (_x_1 : int list) = List.tl dws in\l         let (_x_2 : int) = List.hd _x_1 in\l         let (_x_3 : int) = s.y in\l         let (_x_4 : int) = s.v in\l         let (_x_5 : int) = (_x_3 + _x_4) + _x_0 in\l         let (_x_6 : int)\l             = if 0 \&lt;= _x_5 then if _x_5 = 0 then 0 else 1 else -1\l         in\l         let (_x_7 : int)\l             = 2 * (if 0 \&lt;= _x_3 then if _x_3 = 0 then 0 else 1 else -1)\l         in\l         let (_x_8 : int)\l             = ((((_x_3 + 2 * _x_4) + 2 * _x_0) + -3 * _x_6) + _x_7) + _x_2\l         in\l         final_state\l         \{w = _x_0 + _x_2; y = _x_8;\l          v =\l          ((_x_4 + -1 * _x_6) + _x_7)\l          + -3 * (if 0 \&lt;= _x_8 then if _x_8 = 0 then 0 else 1 else -1)\}\l         (List.tl _x_1)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_281 -&gt; p_280 [label=&quot;&quot;];
p_280 [label=&quot;Unroll ([let (_x_0 : int) = s.w in\l         let (_x_1 : int list) = List.tl dws in\l         let (_x_2 : int) = List.hd _x_1 in\l         let (_x_3 : int list) = List.tl _x_1 in\l         let (_x_4 : int) = List.hd _x_3 in\l         let (_x_5 : int) = s.y in\l         let (_x_6 : int) = s.v in\l         let (_x_7 : int) = (_x_5 + _x_6) + _x_0 in\l         let (_x_8 : int)\l             = if 0 \&lt;= _x_7 then if _x_7 = 0 then 0 else 1 else -1\l         in\l         let (_x_9 : int)\l             = if 0 \&lt;= _x_5 then if _x_5 = 0 then 0 else 1 else -1\l         in\l         let (_x_10 : int) = 2 * _x_9 in\l         let (_x_11 : int)\l             = ((((_x_5 + 2 * _x_6) + 2 * _x_0) + -3 * _x_8) + _x_10) + _x_2\l         in\l         let (_x_12 : int)\l             = if 0 \&lt;= _x_11 then if _x_11 = 0 then 0 else 1 else -1\l         in\l         let (_x_13 : int)\l             = ((((((_x_5 + 3 * _x_6) + 3 * _x_0) + -4 * _x_8) + 4 * _x_9)\l                 + 2 * _x_2)\l                + -3 * _x_12)\l               + _x_4\l         in\l         final_state\l         \{w = (_x_0 + _x_2) + _x_4; y = _x_13;\l          v =\l          (((_x_6 + -1 * _x_8) + _x_10) + -1 * _x_12)\l          + -3 * (if 0 \&lt;= _x_13 then if _x_13 = 0 then 0 else 1 else -1)\}\l         (List.tl _x_3)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_280 -&gt; p_279 [label=&quot;&quot;];
p_279 [label=&quot;Unroll ([let (_x_0 : int) = s.w in\l         let (_x_1 : int list) = List.tl dws in\l         let (_x_2 : int) = List.hd _x_1 in\l         let (_x_3 : int list) = List.tl _x_1 in\l         let (_x_4 : int) = List.hd _x_3 in\l         let (_x_5 : int list) = List.tl _x_3 in\l         let (_x_6 : int) = List.hd _x_5 in\l         let (_x_7 : int) = s.y in\l         let (_x_8 : int) = s.v in\l         let (_x_9 : int) = (_x_7 + _x_8) + _x_0 in\l         let (_x_10 : int)\l             = if 0 \&lt;= _x_9 then if _x_9 = 0 then 0 else 1 else -1\l         in\l         let (_x_11 : int)\l             = if 0 \&lt;= _x_7 then if _x_7 = 0 then 0 else 1 else -1\l         in\l         let (_x_12 : int) = 2 * _x_11 in\l         let (_x_13 : int)\l             = ((((_x_7 + 2 * _x_8) + 2 * _x_0) + -3 * _x_10) + _x_12) + _x_2\l         in\l         let (_x_14 : int)\l             = if 0 \&lt;= _x_13 then if _x_13 = 0 then 0 else 1 else -1\l         in\l         let (_x_15 : int)\l             = ((((((_x_7 + 3 * _x_8) + 3 * _x_0) + -4 * _x_10) + 4 * _x_11)\l                 + 2 * _x_2)\l                + -3 * _x_14)\l               + _x_4\l         in\l         let (_x_16 : int)\l             = if 0 \&lt;= _x_15 then if _x_15 = 0 then 0 else 1 else -1\l         in\l         let (_x_17 : int)\l             = ((((((((_x_7 + 4 * _x_8) + 4 * _x_0) + -5 * _x_10) + 6 * _x_11)\l                   + 3 * _x_2)\l                  + -4 * _x_14)\l                 + 2 * _x_4)\l                + -3 * _x_16)\l               + _x_6\l         in\l         final_state\l         \{w = ((_x_0 + _x_2) + _x_4) + _x_6; y = _x_17;\l          v =\l          ((((_x_8 + -1 * _x_10) + _x_12) + -1 * _x_14) + -1 * _x_16)\l          + -3 * (if 0 \&lt;= _x_17 then if _x_17 = 0 then 0 else 1 else -1)\}\l         (List.tl _x_5)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_279 -&gt; p_278 [label=&quot;&quot;];
p_278 [label=&quot;Unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_308 -&gt; p_300 [label=&quot;&quot;];
subgraph cluster_301 {
  color=blue;
p_300 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       let (_x_3 : int list) = List.tl _x_2 in\l       (((((((((dws = [] \|\| (final_state _x_1 _x_2).y = 0)\l               \|\| not (good_state s))\l              \|\| not ((List.tl _x_3) \&lt;\&gt; []))\l             \|\| not (_x_2 \&lt;\&gt; []))\l            \|\| not (_x_3 \&lt;\&gt; []))\l           \|\| not (good_state _x_1))\l          \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2))\l         \|\| not (List.hd _x_2 = 0))\l        \|\| not (_x_0 = 0))\l       \|\| List.for_all (fun x -\&gt; x = 0) _x_3 :name \&quot;1.2\&quot; :time 1.952s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_300 -&gt; p_299 [label=&quot;&quot;];
p_299 [label=&quot;Simplify (let (_x_0 : int) = List.hd dws in\l          let (_x_1 : int list) = List.tl dws in\l          let (_x_2 : int list) = List.tl _x_1 in\l          let (_x_3 : int list) = List.tl _x_2 in\l          let (_x_4 : bool)\l              = (((((final_state (next_state _x_0 s) _x_1).y = 0\l                    \|\| not (good_state s))\l                   \|\| not (_x_3 \&lt;\&gt; []))\l                  \|\| not (dws \&lt;\&gt; []))\l                 \|\| not (_x_1 \&lt;\&gt; []))\l                \|\| not (_x_2 \&lt;\&gt; [])\l          in\l          let (_x_5 : bool) = List.hd _x_2 = 0 in\l          let (_x_6 : bool) = not (List.hd _x_1 = 0) in\l          let (_x_7 : bool) = not (_x_0 = 0) in\l          let (_x_8 : bool) = not (List.for_all (fun x -\&gt; x = 0) _x_2) in\l          ((((_x_4 \|\| _x_5) \|\| _x_6) \|\| _x_7) \|\| _x_8)\l          &amp;&amp; (((((_x_4 \|\| List.for_all (fun x -\&gt; x = 0) _x_3) \|\| _x_6)\l                \|\| _x_7)\l               \|\| _x_8)\l              \|\| not _x_5)\l          :expansions [List.for_all; List.for_all; List.for_all]\l          :rw [safety_1; safety_1]\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_299 -&gt; p_294 [label=&quot;&quot;];
subgraph cluster_295 {
  color=blue;
p_294 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : int list) = List.tl dws in\l       let (_x_2 : int list) = List.tl _x_1 in\l       let (_x_3 : int list) = List.tl _x_2 in\l       ((((((((((final_state (next_state _x_0 s) _x_1).y = 0\l                \|\| not (good_state s))\l               \|\| not (_x_3 \&lt;\&gt; []))\l              \|\| not (dws \&lt;\&gt; []))\l             \|\| not (_x_1 \&lt;\&gt; []))\l            \|\| not (_x_2 \&lt;\&gt; []))\l           \|\| List.for_all (fun x -\&gt; x = 0) _x_3)\l          \|\| not (List.hd _x_1 = 0))\l         \|\| not (_x_0 = 0))\l        \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2))\l       \|\| not (List.hd _x_2 = 0) :name \&quot;1.2.1\&quot; :time 1.386s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_294 -&gt; p_293 [label=&quot;&quot;];
p_293 [label=&quot;Simplify (true :expansions [List.for_all] :rw [] :fc [all_good; all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_299 -&gt; p_297 [label=&quot;&quot;];
subgraph cluster_298 {
  color=blue;
p_297 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : int list) = List.tl dws in\l       let (_x_2 : int list) = List.tl _x_1 in\l       (((((((((final_state (next_state _x_0 s) _x_1).y = 0\l               \|\| not (good_state s))\l              \|\| not ((List.tl _x_2) \&lt;\&gt; []))\l             \|\| not (dws \&lt;\&gt; []))\l            \|\| not (_x_1 \&lt;\&gt; []))\l           \|\| not (_x_2 \&lt;\&gt; []))\l          \|\| List.hd _x_2 = 0)\l         \|\| not (List.hd _x_1 = 0))\l        \|\| not (_x_0 = 0))\l       \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2) :name \&quot;1.2.2\&quot; :time 1.387s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_297 -&gt; p_296 [label=&quot;&quot;];
p_296 [label=&quot;Simplify (true :expansions [List.for_all] :rw [] :fc [all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_308 -&gt; p_303 [label=&quot;&quot;];
subgraph cluster_304 {
  color=blue;
p_303 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       let (_x_3 : int list) = List.tl _x_2 in\l       ((((((((dws = [] \|\| (final_state _x_1 _x_2).y = 0)\l              \|\| not (good_state s))\l             \|\| not ((List.tl _x_3) \&lt;\&gt; []))\l            \|\| not (_x_2 \&lt;\&gt; []))\l           \|\| not (_x_3 \&lt;\&gt; []))\l          \|\| not (good_state _x_1))\l         \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2))\l        \|\| not (_x_0 = 0))\l       \|\| List.hd _x_2 = 0 :name \&quot;1.3\&quot; :time 1.954s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_303 -&gt; p_302 [label=&quot;&quot;];
p_302 [label=&quot;Simplify (true :expansions [List.for_all] :rw []\l          :fc [all_good; all_good; all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_308 -&gt; p_306 [label=&quot;&quot;];
subgraph cluster_307 {
  color=blue;
p_306 [label=&quot;Start (let (_x_0 : int) = List.hd dws in\l       let (_x_1 : state) = next_state _x_0 s in\l       let (_x_2 : int list) = List.tl dws in\l       let (_x_3 : int list) = List.tl _x_2 in\l       (((((((dws = [] \|\| good_state _x_1) \|\| (final_state _x_1 _x_2).y = 0)\l            \|\| not (good_state s))\l           \|\| not ((List.tl _x_3) \&lt;\&gt; []))\l          \|\| not (_x_2 \&lt;\&gt; []))\l         \|\| not (_x_3 \&lt;\&gt; []))\l        \|\| not (List.for_all (fun x -\&gt; x = 0) _x_2))\l       \|\| not (_x_0 = 0) :name \&quot;1.4\&quot; :time 1.954s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_306 -&gt; p_305 [label=&quot;&quot;];
p_305 [label=&quot;Simplify (true :expansions [List.for_all] :rw [safety_1]\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_314 -&gt; p_312 [label=&quot;&quot;];
subgraph cluster_313 {
  color=blue;
p_312 [label=&quot;Start (let (_x_0 : int list) = List.tl dws in\l       let (_x_1 : int list) = List.tl _x_0 in\l       ((((((not (dws = []) \|\| not (good_state s))\l            \|\| not (List.for_all (fun x -\&gt; x = 0) dws))\l           \|\| not (dws \&lt;\&gt; []))\l          \|\| not (_x_0 \&lt;\&gt; []))\l         \|\| not (_x_1 \&lt;\&gt; []))\l        \|\| not ((List.tl _x_1) \&lt;\&gt; []))\l       \|\| (final_state s dws).y = 0 :name \&quot;2\&quot; :time 2.631s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_312 -&gt; p_311 [label=&quot;&quot;];
p_311 [label=&quot;Simplify (true :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-8f8c004d-8cdf-4f98-9c45-fbb2786b3630';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-a8207714-c9a1-44a2-ad4e-be564ce17f4a';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-89dc51d5-01fc-43f9-bdd6-afc18826ebd2';
  fold.hydrate(target);
});
</script></div></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>You may enjoy reading the above proof! Now, we prove the final part of our main safety theorem.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-24" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">enable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">good_state_find_and_stay_0_from_origin</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">steady_wind</span> <span class="n">dws</span>
 <span class="o">&amp;&amp;</span> <span class="n">at_least_4</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">[@@</span><span class="n">simp</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state_find_and_stay_0_from_origin : int list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-6a934eaf-4f04-4364-9f38-0c90042c723e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-d848bdaf-2184-4a69-98c1-dcc22a6c9e75"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-71f0cb59-d382-4caa-8205-7c0c1ccc2574"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-f121966f-46cc-4d9b-bba1-6215402daa4a"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.046s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-d48c2413-0ab2-486e-a586-83a249ece791"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-7880def0-1130-4cbb-b71b-ecbd24d4d7e5"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-ccac88f6-d6d8-47da-b081-4ce07f332473"><table><tr><td><b>rlimit count</b></td><td>16209</td></tr><tr><td><b>mk bool var</b></td><td>1</td></tr><tr><td><b>memory</b></td><td>63.030000</td></tr><tr><td><b>max memory</b></td><td>77.700000</td></tr><tr><td><b>num allocs</b></td><td>29241436537.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d48c2413-0ab2-486e-a586-83a249ece791';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-fd2d80ff-762f-46b8-abd9-bfe0c887960b"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.046s]
  let (_x_0 : int list) = List.tl :var_0: in
  let (_x_1 : int list) = List.tl _x_0 in
  List.for_all (fun x -&gt; x = 0) :var_0:
  &amp;&amp; :var_0: &lt;&gt; [] &amp;&amp; _x_0 &lt;&gt; [] &amp;&amp; _x_1 &lt;&gt; [] &amp;&amp; (List.tl _x_1) &lt;&gt; []
  ==&gt; (final_state {w = 0; y = 0; v = 0} :var_0:).y = 0</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-49a87e03-43a8-4f57-8027-413758201070"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int list) = List.tl :var_0: in
let (_x_1 : int list) = List.tl _x_0 in
not
((((List.for_all (fun x -&gt; x = 0) :var_0: &amp;&amp; :var_0: &lt;&gt; []) &amp;&amp; _x_0 &lt;&gt; [])
  &amp;&amp; _x_1 &lt;&gt; [])
 &amp;&amp; (List.tl _x_1) &lt;&gt; [])
|| (final_state {w = 0; y = 0; v = 0} :var_0:).y = 0</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-4990aa50-b69e-4a8d-bb03-8463b7d58e3d"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>good_state_find_and_stay_zt_zero</pre></li></ul></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-fd2d80ff-762f-46b8-abd9-bfe0c887960b';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-771701f4-8279-40fe-af82-4188371c2281"><textarea style="display: none">digraph &quot;proof&quot; {
p_322 [label=&quot;Start (let (_x_0 : int list) = List.tl :var_0: in\l       let (_x_1 : int list) = List.tl _x_0 in\l       List.for_all (fun x -\&gt; x = 0) :var_0:\l       &amp;&amp; :var_0: \&lt;\&gt; [] &amp;&amp; _x_0 \&lt;\&gt; [] &amp;&amp; _x_1 \&lt;\&gt; [] &amp;&amp; (List.tl _x_1) \&lt;\&gt; []\l       ==\&gt; (final_state \{w = 0; y = 0; v = 0\} :var_0:).y = 0 :time 0.046s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_322 -&gt; p_321 [label=&quot;&quot;];
p_321 [label=&quot;Simplify (let (_x_0 : int list) = List.tl :var_0: in\l          let (_x_1 : int list) = List.tl _x_0 in\l          not\l          ((((List.for_all (fun x -\&gt; x = 0) :var_0: &amp;&amp; :var_0: \&lt;\&gt; [])\l             &amp;&amp; _x_0 \&lt;\&gt; [])\l            &amp;&amp; _x_1 \&lt;\&gt; [])\l           &amp;&amp; (List.tl _x_1) \&lt;\&gt; [])\l          \|\| (final_state \{w = 0; y = 0; v = 0\} :var_0:).y = 0 :expansions []\l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_321 -&gt; p_320 [label=&quot;&quot;];
p_320 [label=&quot;Simplify (true :expansions [] :rw []\l          :fc [all_good; good_state_find_and_stay_zt_zero])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_320 -&gt; p_319 [label=&quot;&quot;];
p_319 [label=&quot;Unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-771701f4-8279-40fe-af82-4188371c2281';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-71f0cb59-d382-4caa-8205-7c0c1ccc2574';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d848bdaf-2184-4a69-98c1-dcc22a6c9e75';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-4e5ca35b-5719-4611-b2c0-6fac2a1218f4"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not true&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-4e5ca35b-5719-4611-b2c0-6fac2a1218f4';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-6a934eaf-4f04-4364-9f38-0c90042c723e';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Experiments-with-a-flawed-version">Experiments with a flawed version<a class="anchor-link" href="#Experiments-with-a-flawed-version">&#182;</a></h1><p>Now that we've verified the controller, let us imagine instead that we'd made a mistake in its design and use Imandra to find such a mistake. For example, what if we'd defined the controller as follows?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-26" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_controller</span> <span class="n">sgn_y</span> <span class="n">sgn_old_y</span> <span class="o">=</span>
  <span class="o">(-</span><span class="mi">4</span> <span class="o">*</span> <span class="n">sgn_y</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sgn_old_y</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_controller : int -&gt; int -&gt; int = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-27" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="o">=</span>
  <span class="o">{</span> <span class="n">w</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span>
        <span class="n">bad_controller</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">))</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_next_state : int -&gt; state -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-28" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">bad_final_state</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">dws</span> <span class="k">with</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="o">|</span> <span class="n">dw</span> <span class="o">::</span> <span class="n">dws&#39;</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">bad_next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="k">in</span>
    <span class="n">bad_final_state</span> <span class="n">s&#39;</span> <span class="n">dws&#39;</span>
<span class="o">[@@</span><span class="n">adm</span> <span class="n">dws</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_final_state : state -&gt; int list -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-4ed673ab-d0a2-43cb-b868-f9389c0b27aa"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-fd959c9f-1d2e-45bc-8504-8aec2024a496"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `bad_final_state (bad_next_state (List.hd dws) s) (List.tl dws)` from `bad_final_state s dws`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-5093d84e-6d79-43d4-b1eb-b7f29a0a2e7c"><table><tr><td><b>original</b></td><td>bad_final_state s dws</td></tr><tr><td><b>sub</b></td><td>bad_final_state (bad_next_state (List.hd dws) s) (List.tl dws)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count dws)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl dws))</td></tr><tr><td><b>path</b></td><td>[not (dws = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-5a7ccf83-31a5-4afb-a71f-7086f671f13d"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-06dd103b-c2a2-43da-b729-d37591e98ae7"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-9ea4741c-2549-4290-8f70-c5d1506cfc16"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.012s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-7ec6bb0a-fecb-4013-b95a-b026f9e8a0ad"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-8e1b3bac-afa8-4ab5-b258-f7fd60e00f47"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-a006effe-a1f4-4dc4-9d48-e3c8a508ccae"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith-make-feasible</b></td><td>20</td></tr><tr><td><b>arith-max-columns</b></td><td>18</td></tr><tr><td><b>arith-conflicts</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>2226</td></tr><tr><td><b>mk clause</b></td><td>12</td></tr><tr><td><b>datatype occurs check</b></td><td>22</td></tr><tr><td><b>mk bool var</b></td><td>65</td></tr><tr><td><b>arith-lower</b></td><td>14</td></tr><tr><td><b>arith-diseq</b></td><td>1</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>18</td></tr><tr><td><b>propagations</b></td><td>13</td></tr><tr><td><b>arith-max-rows</b></td><td>6</td></tr><tr><td><b>conflicts</b></td><td>10</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>43</td></tr><tr><td><b>del clause</b></td><td>5</td></tr><tr><td><b>arith eq adapter</b></td><td>10</td></tr><tr><td><b>arith-upper</b></td><td>13</td></tr><tr><td><b>memory</b></td><td>62.750000</td></tr><tr><td><b>max memory</b></td><td>77.700000</td></tr><tr><td><b>num allocs</b></td><td>29532984320.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-7ec6bb0a-fecb-4013-b95a-b026f9e8a0ad';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-b83bd4ec-cb47-4a69-b5a4-983b3ef656cc"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.012s]
  let (_x_0 : int) = Ordinal.count dws in
  let (_x_1 : int list) = List.tl dws in
  let (_x_2 : int) = Ordinal.count _x_1 in
  not (dws = []) &amp;&amp; _x_0 &gt;= 0 &amp;&amp; _x_2 &gt;= 0
  ==&gt; _x_1 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_2) (Ordinal.Int _x_0)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-5a030b69-a7d2-44ef-a86f-5ccab14a8283"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int list) = List.tl dws in
let (_x_1 : int) = Ordinal.count _x_0 in
let (_x_2 : int) = Ordinal.count dws in
(_x_0 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_1) (Ordinal.Int _x_2))
|| not ((not (dws = []) &amp;&amp; _x_2 &gt;= 0) &amp;&amp; _x_1 &gt;= 0)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-95e56856-1897-4141-8e04-dde5ce06761a"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_5314| dws_5304)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8c6b1499-5307-416d-b5cd-cf90c8e2a27b"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_5314| (|get.::.1_5302| dws_5304))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-27859948-ecdd-4c83-8318-a2d7f4023b0b"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`int list`_5314|
                                      (…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b83bd4ec-cb47-4a69-b5a4-983b3ef656cc';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-06dd103b-c2a2-43da-b729-d37591e98ae7';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-5a7ccf83-31a5-4afb-a71f-7086f671f13d';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-fd959c9f-1d2e-45bc-8504-8aec2024a496';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-4ed673ab-d0a2-43cb-b868-f9389c0b27aa';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Now, let's try one of our main safety theorems:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-30" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">vehicle_stays_within_3_units_of_course</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">bad_final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="o">-</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">3</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val vehicle_stays_within_3_units_of_course : int list -&gt; bool = &lt;fun&gt;
module CX : sig val dws : int list end
<span class="ansi-red-intense-fg ansi-bold">Error</span>: vehicle_stays_within_3_units_of_course is not a theorem.
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Counterexample (after 8 steps, 0.025s):
 let (dws : int list) = [1; 1; 1]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px dashed #D84315; border-bottom: 1px dashed #D84315"><i class="fa fa-times-circle-o" style="margin-right: 0.5em; color: #D84315"></i><span>Refuted</span></div><div><div class="imandra-alternatives" id="alt-ce83496a-ae27-4359-b510-5396c13d666f"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-c161d532-abef-43b2-a405-b458d089a983"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;let (_x_0 : int) = (bad_final_state \{w = 0; y = 0; v = 0\} dws).y in\lnot\l(not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws)\l \|\| -3 \&lt;= _x_0 &amp;&amp; _x_0 \&lt;= 3)&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_22 [label=&quot;calls&quot;];
goal -&gt; call_20 [label=&quot;calls&quot;];
call_22 [label=&quot;bad_final_state \{w = 0; y = 0; v = 0\} dws&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_22 -&gt; call_246 [label=&quot;calls&quot;];
call_20 [label=&quot;List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_20 -&gt; call_379 [label=&quot;calls&quot;];
call_246 [label=&quot;let (_x_0 : int) = List.hd dws in\lbad_final_state\l\{w = _x_0; y = _x_0;\l v = -4 * (if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1)\}\l(List.tl dws)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_246 -&gt; call_554 [label=&quot;calls&quot;];
call_379 [label=&quot;List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) (List.tl dws)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_379 -&gt; call_711 [label=&quot;calls&quot;];
call_554 [label=&quot;let (_x_0 : int) = List.hd dws in\llet (_x_1 : int list) = List.tl dws in\llet (_x_2 : int) = List.hd _x_1 in\llet (_x_3 : int) = if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1 in\llet (_x_4 : int) = (2 * _x_0 + -4 * _x_3) + _x_2 in\lbad_final_state\l\{w = _x_0 + _x_2; y = _x_4;\l v = -2 * _x_3 + -4 * (if 0 \&lt;= _x_4 then if _x_4 = 0 then 0 else 1 else -1)\}\l(List.tl _x_1)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_554 -&gt; call_920 [label=&quot;calls&quot;];
call_711 [label=&quot;List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) (List.tl (List.tl dws))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_711 -&gt; call_1075 [label=&quot;calls&quot;];
call_920 [label=&quot;let (_x_0 : int) = List.hd dws in\llet (_x_1 : int list) = List.tl dws in\llet (_x_2 : int) = List.hd _x_1 in\llet (_x_3 : int list) = List.tl _x_1 in\llet (_x_4 : int) = List.hd _x_3 in\llet (_x_5 : int) = if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1 in\llet (_x_6 : int) = (2 * _x_0 + -4 * _x_5) + _x_2 in\llet (_x_7 : int) = if 0 \&lt;= _x_6 then if _x_6 = 0 then 0 else 1 else -1 in\llet (_x_8 : int) = (((3 * _x_0 + -6 * _x_5) + 2 * _x_2) + -4 * _x_7) + _x_4\lin\lbad_final_state\l\{w = (_x_0 + _x_2) + _x_4; y = _x_8;\l v =\l (-2 * _x_5 + -2 * _x_7)\l + -4 * (if 0 \&lt;= _x_8 then if _x_8 = 0 then 0 else 1 else -1)\}\l(List.tl _x_3)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_920 -&gt; call_1580 [label=&quot;calls&quot;];
call_1075 [label=&quot;List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1)\l(List.tl (List.tl (List.tl dws)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1075 -&gt; call_1812 [label=&quot;calls&quot;];
call_1580 [label=&quot;let (_x_0 : int) = List.hd dws in\llet (_x_1 : int list) = List.tl dws in\llet (_x_2 : int) = List.hd _x_1 in\llet (_x_3 : int list) = List.tl _x_1 in\llet (_x_4 : int) = List.hd _x_3 in\llet (_x_5 : int list) = List.tl _x_3 in\llet (_x_6 : int) = List.hd _x_5 in\llet (_x_7 : int) = if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1 in\llet (_x_8 : int) = (2 * _x_0 + -4 * _x_7) + _x_2 in\llet (_x_9 : int) = if 0 \&lt;= _x_8 then if _x_8 = 0 then 0 else 1 else -1 in\llet (_x_10 : int) = (((3 * _x_0 + -6 * _x_7) + 2 * _x_2) + -4 * _x_9) + _x_4\lin\llet (_x_11 : int) = if 0 \&lt;= _x_10 then if _x_10 = 0 then 0 else 1 else -1 in\llet (_x_12 : int)\l    = (((((4 * _x_0 + -8 * _x_7) + 3 * _x_2) + -6 * _x_9) + 2 * _x_4)\l       + -4 * _x_11)\l      + _x_6\lin\lbad_final_state\l\{w = ((_x_0 + _x_2) + _x_4) + _x_6; y = _x_12;\l v =\l ((-2 * _x_7 + -2 * _x_9) + -2 * _x_11)\l + -4 * (if 0 \&lt;= _x_12 then if _x_12 = 0 then 0 else 1 else -1)\}\l(List.tl _x_5)&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1812 [label=&quot;List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1)\l(List.tl (List.tl (List.tl (List.tl dws))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-c161d532-abef-43b2-a405-b458d089a983';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-05cb7ead-dd11-45fc-a154-2da5295db625"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-eac89c5a-2f3e-4a23-bda8-387da106a75a"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-80f0de38-ecb8-4742-993c-2e6e461b26fd"><table><tr><td><b>ground_instances</b></td><td>8</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.026s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-eb02c65e-2291-47b7-9033-5f08a1017939"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-119fe42e-b4ae-4abb-8394-10a601463ee4"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-acec675d-e2e5-48ed-8dd3-b543ee8ce750"><table><tr><td><b>num checks</b></td><td>17</td></tr><tr><td><b>arith-assume-eqs</b></td><td>19</td></tr><tr><td><b>arith-make-feasible</b></td><td>228</td></tr><tr><td><b>arith-max-columns</b></td><td>36</td></tr><tr><td><b>arith-conflicts</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>14928</td></tr><tr><td><b>arith-cheap-eqs</b></td><td>113</td></tr><tr><td><b>mk clause</b></td><td>874</td></tr><tr><td><b>datatype occurs check</b></td><td>217</td></tr><tr><td><b>mk bool var</b></td><td>554</td></tr><tr><td><b>arith-lower</b></td><td>282</td></tr><tr><td><b>arith-diseq</b></td><td>353</td></tr><tr><td><b>datatype splits</b></td><td>41</td></tr><tr><td><b>decisions</b></td><td>192</td></tr><tr><td><b>arith-propagations</b></td><td>346</td></tr><tr><td><b>propagations</b></td><td>1257</td></tr><tr><td><b>interface eqs</b></td><td>19</td></tr><tr><td><b>arith-bound-propagations-cheap</b></td><td>346</td></tr><tr><td><b>arith-max-rows</b></td><td>23</td></tr><tr><td><b>conflicts</b></td><td>52</td></tr><tr><td><b>datatype accessor ax</b></td><td>38</td></tr><tr><td><b>minimized lits</b></td><td>24</td></tr><tr><td><b>arith-bound-propagations-lp</b></td><td>110</td></tr><tr><td><b>datatype constructor ax</b></td><td>46</td></tr><tr><td><b>final checks</b></td><td>46</td></tr><tr><td><b>added eqs</b></td><td>892</td></tr><tr><td><b>del clause</b></td><td>182</td></tr><tr><td><b>arith eq adapter</b></td><td>156</td></tr><tr><td><b>arith-upper</b></td><td>369</td></tr><tr><td><b>memory</b></td><td>63.820000</td></tr><tr><td><b>max memory</b></td><td>77.700000</td></tr><tr><td><b>num allocs</b></td><td>29802909558.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-eb02c65e-2291-47b7-9033-5f08a1017939';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-b5a83051-e932-4169-a30c-6ab8af990c4e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.026s]
  let (_x_0 : int) = (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y in
  List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) :var_0:
  ==&gt; -3 &lt;= _x_0 &amp;&amp; _x_0 &lt;= 3</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-b6b97038-e63b-4ef9-b989-105183dd4e39"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : int) = (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y in
not (List.for_all (fun x -&gt; x = -1 || x = 0 || x = 1) :var_0:)
|| -3 &lt;= _x_0 &amp;&amp; _x_0 &lt;= 3</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-df45f711-ada8-4b2f-a47f-34079d6dafac"><table><tr><td><b>expr</b></td><td><pre>(bad_final_state_94 (|rec_mk.state_5353| 0 0 0) dws_5347)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-65804693-95c0-44ff-b248-21f63b7ffd4b"><table><tr><td><b>expr</b></td><td><pre>(|`List.for_all anon_fun.arbitrary_delta_ws.1[0]`_5349| dws_5347)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c13bc7e7-d98f-4182-a691-847032132c20"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (&lt;= 0 (|get.::.0_5345| dws_5347))
                (ite (= (|get.::.0_5345| dws_5347)…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-09460bab-9bce-49d8-8cf1-6c8e0cb82cca"><table><tr><td><b>expr</b></td><td><pre>(|`List.for_all anon_fun.arbitrary_delta_ws.1[0]`_5349|
  (|get.::.1_5346| dws_5347))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-33c8eb74-8642-4c3d-a23e-601136c758d5"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (&lt;= 0 (|get.::.0_5345| dws_5347))
                (ite (= (|get.::.0_5345| dws_5347)…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-05517c13-dc01-41f7-ae19-9b0f2b12c7bc"><table><tr><td><b>expr</b></td><td><pre>(|`List.for_all anon_fun.arbitrary_delta_ws.1[0]`_5349|
  (|get.::.1_5346| (|get.::.1_5346| dws_5347…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0b261c30-28dd-4bfc-8980-5e8b6dc1fded"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (+ (|get.::.0_5345| dws_5347)
              (|get.::.0_5345| (|get.::.1_5346| dws_5347))
…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b94bf2a0-34f5-404d-b72a-d1af4a673520"><table><tr><td><b>expr</b></td><td><pre>(|`List.for_all anon_fun.arbitrary_delta_ws.1[0]`_5349|
  (|get.::.1_5346| (|get.::.1_5346| (|get.::…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (dws : int list) = [1; 1; 1]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b5a83051-e932-4169-a30c-6ab8af990c4e';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-8f3cf2ec-2780-4c35-8a16-bee4d79faf2f"><textarea style="display: none">digraph &quot;proof&quot; {
p_339 [label=&quot;Start (let (_x_0 : int) = (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l       in\l       List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) :var_0:\l       ==\&gt; -3 \&lt;= _x_0 &amp;&amp; _x_0 \&lt;= 3 :time 0.026s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_339 -&gt; p_338 [label=&quot;&quot;];
p_338 [label=&quot;Simplify (let (_x_0 : int)\l              = (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l          in\l          not (List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) :var_0:)\l          \|\| -3 \&lt;= _x_0 &amp;&amp; _x_0 \&lt;= 3 :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_338 -&gt; p_337 [label=&quot;&quot;];
p_337 [label=&quot;Unroll ([bad_final_state \{w = 0; y = 0; v = 0\} dws], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_337 -&gt; p_336 [label=&quot;&quot;];
p_336 [label=&quot;Unroll ([List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) dws], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_336 -&gt; p_335 [label=&quot;&quot;];
p_335 [label=&quot;Unroll ([let (_x_0 : int) = List.hd dws in\l         bad_final_state\l         \{w = _x_0; y = _x_0;\l          v = -4 * (if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1)\}\l         (List.tl dws)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_335 -&gt; p_334 [label=&quot;&quot;];
p_334 [label=&quot;Unroll ([List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1) (List.tl dws)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_334 -&gt; p_333 [label=&quot;&quot;];
p_333 [label=&quot;Unroll ([let (_x_0 : int) = List.hd dws in\l         let (_x_1 : int list) = List.tl dws in\l         let (_x_2 : int) = List.hd _x_1 in\l         let (_x_3 : int)\l             = if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1\l         in\l         let (_x_4 : int) = (2 * _x_0 + -4 * _x_3) + _x_2 in\l         bad_final_state\l         \{w = _x_0 + _x_2; y = _x_4;\l          v =\l          -2 * _x_3\l          + -4 * (if 0 \&lt;= _x_4 then if _x_4 = 0 then 0 else 1 else -1)\}\l         (List.tl _x_1)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_333 -&gt; p_332 [label=&quot;&quot;];
p_332 [label=&quot;Unroll ([List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1)\l         (List.tl (List.tl dws))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_332 -&gt; p_331 [label=&quot;&quot;];
p_331 [label=&quot;Unroll ([let (_x_0 : int) = List.hd dws in\l         let (_x_1 : int list) = List.tl dws in\l         let (_x_2 : int) = List.hd _x_1 in\l         let (_x_3 : int list) = List.tl _x_1 in\l         let (_x_4 : int) = List.hd _x_3 in\l         let (_x_5 : int)\l             = if 0 \&lt;= _x_0 then if _x_0 = 0 then 0 else 1 else -1\l         in\l         let (_x_6 : int) = (2 * _x_0 + -4 * _x_5) + _x_2 in\l         let (_x_7 : int)\l             = if 0 \&lt;= _x_6 then if _x_6 = 0 then 0 else 1 else -1\l         in\l         let (_x_8 : int)\l             = (((3 * _x_0 + -6 * _x_5) + 2 * _x_2) + -4 * _x_7) + _x_4\l         in\l         bad_final_state\l         \{w = (_x_0 + _x_2) + _x_4; y = _x_8;\l          v =\l          (-2 * _x_5 + -2 * _x_7)\l          + -4 * (if 0 \&lt;= _x_8 then if _x_8 = 0 then 0 else 1 else -1)\}\l         (List.tl _x_3)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_331 -&gt; p_330 [label=&quot;&quot;];
p_330 [label=&quot;Unroll ([List.for_all (fun x -\&gt; x = -1 \|\| x = 0 \|\| x = 1)\l         (List.tl (List.tl (List.tl dws)))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_330 -&gt; p_329 [label=&quot;&quot;];
p_329 [label=&quot;Sat (Some  let (dws : int list) = [1; 1; 1]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-8f3cf2ec-2780-4c35-8a16-bee4d79faf2f';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-eac89c5a-2f3e-4a23-bda8-387da106a75a';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-05cb7ead-dd11-45fc-a154-2da5295db625';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-ce83496a-ae27-4359-b510-5396c13d666f';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Imandra shows us that with our flawed controller, this conjecture is not true! In fact, Imandra computes a counterexample consisting of a sequence of three <code>1</code>-valued wind speed sensor readings.</p>
<p>If we plug these in, we can see the counterexample in action:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-32" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">bad_final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">1</span><span class="o">;</span><span class="mi">1</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : state = {w = 3; y = 4; v = -4}
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Happy verifying!</p>
</div>
</div>
</div>
                    </div>
                </article>
            </main>
            <footer class="footer">
                <a class="copyrights"href="http://imandra.ai">&#9400; 2018 - 2020 Imandra Inc. All rights reserved.</a>
            </footer>
        </div>
    
 


    <script>
    (function () {
            var lastId;
            var sideMenu = $("#side-nav-menu");
            var topMenu = $("#top-menu");
            var topMenuHeight = topMenu.outerHeight() + 15;

            // All list items
            var menuItems = sideMenu.find('a.side__nav-link--within-page');

            // Anchors corresponding to menu items
            var scrollItems = menuItems.map(function () {
              var item = $(this).attr("href");
              var thisItem = item.substring(item.lastIndexOf("#") + 1, item.length);
              var linkedItem = $('#' + CSS.escape(thisItem));
              if (linkedItem.length) { return linkedItem; }
            });

            // Bind to scroll
            $(window).scroll(function () {
                // Get container scroll position
                var fromTop = $(this).scrollTop() + topMenuHeight;;
                // Get id of current scroll item
                var cur = scrollItems.map(function () {
                    if ($(this).offset().top < fromTop)
                        return this;
                });
                cur = cur[cur.length - 1];
                // Get the id of the current element
                var id = cur && cur.length ? cur[0].id : "";
                if (id && lastId !== id) {
                    lastId = id;
                    // Set/remove active class
                    menuItems.each(function (idx, item) {
                    var $item = $(item);
                    $item.removeClass("side__nav-link--within-page--active");

                    if (item.href.endsWith('#' + lastId)) {
                        $item.addClass("side__nav-link--within-page--active");
                    };
                    });
                }
            });
        })()
    </script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ff3a61a82b58783e62ebfbf51e50b0bc',
      indexName: 'imandra',
      inputSelector: '#search',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
    </script>

    </body>
</html>
