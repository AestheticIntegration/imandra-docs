<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<title>Imandra Documentation - Verifying a Simple Autonomous Vehicle Controller in Imandra</title>
<meta property="og:url" content="https://docs.imandra.ai/imandra-docs/notebooks/simple-vehicle-controller/">
<meta property="og:type" content="website">
<meta property="og:title" content="Imandra Documentation - Verifying a Simple Autonomous Vehicle Controller in Imandra">
<meta property="og:description" content="In this notebook, we'll design and verify a simple autonomous vehicle controller in Imandra. The controller we analyse is due to Boyer, Green and Moore, and is described and analysed in their article The Use of a Formal Simulator to Verify a Simple Real Time Control Program.">
<meta property="og:image" content="https://storage.googleapis.com/imandra-assets/images/og_image_default_i78.jpg">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116937440-6"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-116937440-6');
</script>
<script type="text/javascript"> var sc_project=11767520; var sc_invisible=1; var sc_security="fa7e88d1"; </script>
<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter">
<a title="Web Analytics" href="http://statcounter.com/" target="_blank">
<img class="statcounter" src="//c.statcounter.com/11767520/0/fa7e88d1/1/" alt="Web Analytics"></a>
</div></noscript>


<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather" type="text/css" />

<link rel="stylesheet" href="/imandra-docs/static/style/style.min.9ef6027e.css" type="text/css">
<link rel="stylesheet" href="/imandra-docs/static/custom/custom.43522872.css" type="text/css">
<link rel="stylesheet" href="/imandra-docs/static/nbextensions/nbimandra/styles.c7ed3d1a.css" type="text/css">
<link rel="stylesheet" href="/imandra-docs/static/docs-styles.3b1b6d03.css" type="text/css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/imandra-docs/static/nbimandra-rjs-bundle.2469bcb7.js"></script>

<style type="text/css">
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
    
<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>
<body>
  <div class="header-nav">
    <div class="header-nav__container">
      <div class="header-nav-main-logo">
        <a href="/" class="header-nav-main-logo__container">
          <img src="/imandra-docs/static/img/imandra_doc_logo_main.svg">
        </a>
      </div>
      <a href="/imandra-docs/">&lt; Back</a>
    </div>
  </div>
  <div class="bg-container">
    <div class="bg-container__bg"></div>
    <div class="container">
      <header class="header">
        <a href="/imandra-docs/">
          <img src="/imandra-docs/static/img/site_specific_image_v_2.svg">
        </a>
      </header>
      <div class="content content--with-cells">
  
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Verifying-a-simple-autonomous-vehicle-controller-in-Imandra">Verifying a simple autonomous vehicle controller in Imandra<a class="anchor-link" href="#Verifying-a-simple-autonomous-vehicle-controller-in-Imandra">&#182;</a></h1><p><img src="https://storage.googleapis.com/imandra-notebook-assets/imandra_sd-car-controller.png" width=500></p>
<p>In this notebook, we'll design and verify a simple autonomous vehicle controller in Imandra. The controller we analyse is due to Boyer, Green and Moore, and is described and analysed in their article <a href="https://link.springer.com/chapter/10.1007/978-1-4612-4476-9_7">The Use of a Formal Simulator to Verify a Simple Real Time Control Program</a>.</p>
<p>This controller will receive sequences of sensor readings measuring changes in wind speed, and will have to respond to keep the vehicle on course. The final theorems we prove will establish the following safety and correctness properties:</p>
<ul>
<li>If the vehicle starts at the initial state <code>(0,0,0)</code>, then the controller guarantees the vehicle never strays
farther than <code>3</code> units from the <code>x</code>-axis.</li>
<li>If the wind ever becomes constant for at least <code>4</code> sampling intervals, then the vehicle returns to the <code>x</code>-axis and stays there as long as the wind remains constant.</li>
</ul>
<p>These results formally prove that the simulated vehicle appropriately stays on course under each of the <em>infinite number</em> of possible wind histories.</p>
<h2 id="The-controller-and-its-environment">The controller and its environment<a class="anchor-link" href="#The-controller-and-its-environment">&#182;</a></h2><p>Quantities in the model are measured using integral units. The model is one-dimensional: it considers the <code>y</code>-components of both the vehicle and wind velocity.</p>
<p>Wind speed is measured in terms of the number of units in the <code>y</code>-direction the wind would blow a passive vehicle in one sampling interval. From one sampling interval to the next, the wind speed can change by at most one unit in either direction. The wind is permitted to blow up to arbitrarily high velocities.</p>
<p>At each sampling interval, the controller may increment or decrement the <code>y</code>-component of its velocity. We let <code>v</code> be the accumulated speed in the <code>y</code>-direction measured as the number of units the vehicle would move in one sampling interval if there were no wind. We make no assumption limiting how fast <code>v</code> may be changed by the control program. We permit <code>v</code> to become arbitrary large.</p>
<h1 id="The-Imandra-model">The Imandra model<a class="anchor-link" href="#The-Imandra-model">&#182;</a></h1><p>The Imandra model of our system and its environment is rooted in a <code>state</code> vector consisting of three values:</p>
<ul>
<li><code>w</code> - current wind velocity </li>
<li><code>y</code> - current y-position of the vehicle</li>
<li><code>v</code> - accumulated velocity of the vehicle</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-2" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="n">state</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">w</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* current wind speed *)</span>
  <span class="n">y</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* y-position of the vehicle *)</span>
  <span class="n">v</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="c">(* accumulated velocity *)</span>
<span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type state = { w : int; y : int; v : int; }
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Our-controller-and-state-transitions">Our controller and state transitions<a class="anchor-link" href="#Our-controller-and-state-transitions">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-4" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">controller</span> <span class="n">sgn_y</span> <span class="n">sgn_old_y</span> <span class="o">=</span>
  <span class="o">(-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">sgn_y</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sgn_old_y</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val controller : Z.t -&gt; Z.t -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-5" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">sgn</span> <span class="n">x</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="o">-</span><span class="mi">1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span>
  <span class="k">else</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sgn : int -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Given a wind-speed delta sensor reading and a current state, <code>next_state</code> computes the next state of the system as dictated by our controller.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-7" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="o">=</span>
  <span class="o">{</span> <span class="n">w</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span>
        <span class="n">controller</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">))</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val next_state : Z.t -&gt; state -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Sensing-the-environment">Sensing the environment<a class="anchor-link" href="#Sensing-the-environment">&#182;</a></h1><p>The behaviour of the wind over <code>n</code> sampling intervals is represented as
a sequence of length <code>n</code>. Each element of the sequence is either <code>-1</code>, <code>0</code>, or <code>1</code>
indicating how the wind changed between sampling intervals.</p>
<p>We define the predicate <code>arbitrary_delta_ws</code> to describe valid sequences of wind sensor readings.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-9" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">arbitrary_delta_ws</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">for_all</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val arbitrary_delta_ws : Z.t list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="The-top-level-state-machine">The top-level state machine<a class="anchor-link" href="#The-top-level-state-machine">&#182;</a></h1><p>We now define the <code>final_state</code> function which takes a description of an arbitrary wind sampling history
   and an initial state, and computes the result of running the controller
   (i.e., simulating the vehicle) as it responds to the changes in wind.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-11" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">dws</span> <span class="k">with</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="o">|</span> <span class="n">dw</span> <span class="o">::</span> <span class="n">dws&#39;</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="k">in</span>
    <span class="n">final_state</span> <span class="n">s&#39;</span> <span class="n">dws&#39;</span>
<span class="o">[@@</span><span class="n">adm</span> <span class="n">dws</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val final_state : state -&gt; Z.t list -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-7c930531-5a5b-47f8-93c1-3df124a1c002"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-c0f7d79b-d47a-4ba1-af62-a000f5c809a2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `final_state (next_state (List.hd dws) s) (List.tl dws)` from `final_state s dws`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-04edb278-b7e4-4791-835f-01572db5feb6"><table><tr><td><b>original</b></td><td>final_state s dws</td></tr><tr><td><b>sub</b></td><td>final_state (next_state (List.hd dws) s) (List.tl dws)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count dws)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl dws))</td></tr><tr><td><b>path</b></td><td>[not (dws = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-a25fe4e6-ba10-4b67-8aec-931b333404ed"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-6a47a7b7-fbe0-4f77-8edb-938c459f5a7e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-312766c1-78f3-4e79-b950-d64bdc7a518d"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.022s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-0e1195bf-b131-4b57-abdb-957419c8a0c2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-daf83ca5-94d1-4afe-89c1-f1e98b67a04f"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-bbb3b85b-3ff0-4475-9e95-761602f367f3"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>18</td></tr><tr><td><b>arith pivots</b></td><td>10</td></tr><tr><td><b>rlimit count</b></td><td>2296</td></tr><tr><td><b>mk clause</b></td><td>19</td></tr><tr><td><b>datatype occurs check</b></td><td>43</td></tr><tr><td><b>mk bool var</b></td><td>82</td></tr><tr><td><b>arith assert upper</b></td><td>14</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>14</td></tr><tr><td><b>arith add rows</b></td><td>19</td></tr><tr><td><b>propagations</b></td><td>14</td></tr><tr><td><b>conflicts</b></td><td>9</td></tr><tr><td><b>arith fixed eqs</b></td><td>8</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>num allocs</b></td><td>1379671272</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>52</td></tr><tr><td><b>del clause</b></td><td>8</td></tr><tr><td><b>arith eq adapter</b></td><td>12</td></tr><tr><td><b>memory</b></td><td>6.380000</td></tr><tr><td><b>max memory</b></td><td>22.720000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0e1195bf-b131-4b57-abdb-957419c8a0c2';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-95fcd32f-736d-4844-a9fa-80f7c9129e49"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.022s]
  not (dws = [])
  &amp;&amp; Ordinal.count dws &gt;= 0 &amp;&amp; Ordinal.count (List.tl dws) &gt;= 0
  ==&gt; List.tl dws = []
      || Ordinal.Int (Ordinal.count (List.tl dws)) Ordinal.&lt;&lt;
         Ordinal.Int (Ordinal.count dws)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-512d5960-37e5-4d42-82da-8afa51539ebe"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (dws = []) &amp;&amp; Ordinal.count dws &gt;= 0)
  &amp;&amp; Ordinal.count (List.tl dws) &gt;= 0)
 || List.tl dws = [])
|| Ordinal.Int (Ordinal.count (List.tl dws)) Ordinal.&lt;&lt;
   Ordinal.Int (Ordinal.count dws)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-31dae0bf-0052-4aac-a36d-0574f08533a2"><table><tr><td><b>expr</b></td><td><pre>(|\|Ordinal.&lt;&lt;_132\||
  (|\|Ordinal.Int_123\||
    (|\|count_`int list`_2296\|| (|\|get.::.1_2272\||…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8a1e0f19-edc3-405e-a0df-68462694dd64"><table><tr><td><b>expr</b></td><td><pre>(|\|count_`int list`_2296\|| (|\|get.::.1_2272\|| dws_2286))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-dc86d70c-5398-4e96-8e56-0ff2e692c48e"><table><tr><td><b>expr</b></td><td><pre>(|\|count_`int list`_2296\|| dws_2286)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (&gt;= (ite (&gt;= (|\|get.::.0_2271\|| dws_2286) 0)
                    (|\|get.::.0_2271\|| d…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-95fcd32f-736d-4844-a9fa-80f7c9129e49';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-6a47a7b7-fbe0-4f77-8edb-938c459f5a7e';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a25fe4e6-ba10-4b67-8aec-931b333404ed';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c0f7d79b-d47a-4ba1-af62-a000f5c809a2';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-7c930531-5a5b-47f8-93c1-3df124a1c002';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Verifying-our-controller">Verifying our controller<a class="anchor-link" href="#Verifying-our-controller">&#182;</a></h1><p>We now partition our state-space into a collection of regions, some "good,"
most "bad," and show that if we start in a "good" state (like <code>(0,0,0)</code>), then we'll (inductively)
always end up in a "good" state.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-13" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="c">(* What it means to be a ``good&#39;&#39; state *)</span>

<span class="k">let</span> <span class="n">good_state</span> <span class="n">s</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="k">with</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span>  <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span>  <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state : state -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Theorem:-Single-step-safety">Theorem: Single step safety<a class="anchor-link" href="#Theorem:-Single-step-safety">&#182;</a></h2><p>We prove: <code>If we start in a good state and evolve the system responding to one sensor reading, we end up in a good state.</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-15" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">safety_1</span> <span class="n">s</span> <span class="n">dw</span> <span class="o">=</span>
  <span class="n">good_state</span> <span class="n">s</span>
  <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">dw</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">dw</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">dw</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
 <span class="o">==&gt;</span>
  <span class="n">good_state</span> <span class="o">(</span><span class="n">next_state</span> <span class="n">dw</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">[@@</span><span class="n">rewrite</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val safety_1 : state -&gt; Z.t -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-proved"><i class="fa fa-check-circle"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-ce6bbe17-c844-4229-9692-350ea1f2ecdc"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-d9e92a86-8a84-4418-9b37-136f85c215c6"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-c251881a-1f01-496b-93f0-6573a48ccf5d"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-4a85e9f2-771f-42b3-bb7d-db7b80052678"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.026s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-1e5e919f-aaf3-4493-98f1-2a83bc88fce6"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-9560c372-6afa-4c8c-be91-22c13c7a650a"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-0d314d9a-e675-4d68-bd0e-44ef630a7032"><table><tr><td><b>arith offset eqs</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>939</td></tr><tr><td><b>arith pivots</b></td><td>38</td></tr><tr><td><b>rlimit count</b></td><td>10365</td></tr><tr><td><b>mk clause</b></td><td>989</td></tr><tr><td><b>mk bool var</b></td><td>332</td></tr><tr><td><b>restarts</b></td><td>1</td></tr><tr><td><b>arith assert upper</b></td><td>942</td></tr><tr><td><b>decisions</b></td><td>263</td></tr><tr><td><b>arith add rows</b></td><td>28</td></tr><tr><td><b>arith bound prop</b></td><td>321</td></tr><tr><td><b>propagations</b></td><td>4062</td></tr><tr><td><b>conflicts</b></td><td>118</td></tr><tr><td><b>arith fixed eqs</b></td><td>40</td></tr><tr><td><b>datatype accessor ax</b></td><td>1</td></tr><tr><td><b>minimized lits</b></td><td>140</td></tr><tr><td><b>arith conflicts</b></td><td>17</td></tr><tr><td><b>arith assert diseq</b></td><td>865</td></tr><tr><td><b>datatype constructor ax</b></td><td>1</td></tr><tr><td><b>num allocs</b></td><td>1465461025</td></tr><tr><td><b>added eqs</b></td><td>978</td></tr><tr><td><b>del clause</b></td><td>235</td></tr><tr><td><b>arith eq adapter</b></td><td>336</td></tr><tr><td><b>memory</b></td><td>6.810000</td></tr><tr><td><b>max memory</b></td><td>22.720000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-1e5e919f-aaf3-4493-98f1-2a83bc88fce6';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-ee5c24df-85ac-4a78-b8d4-ca9bcb6a190f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.026s]
  (if 1 = :var_0:.w + :var_0:.v &amp;&amp; -3 = :var_0:.y then true
   else
   if 1 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y then true
   else
   if 2 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y then true
   else if 2 = :var_0:.w + :var_0:.v &amp;&amp; -1 = :var_0:.y then true else …)
  &amp;&amp; (:var_1: = -1 || :var_1: = 0 || :var_1: = 1)
  ==&gt; (if 1 =
          (:var_0:.w + :var_1:)
          + :var_0:.v
            + -3
              * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) &lt; 0
                 then -1
                 else
                 if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                 then 0 else 1)
              + 2
                * (if :var_0:.y &lt; 0 then -1
                   else if :var_0:.y = 0 then 0 else 1)
          &amp;&amp; -3 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:
       then true
       else
       if 1 =
          (:var_0:.w + :var_1:)
          + :var_0:.v
            + -3
              * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) &lt; 0
                 then -1
                 else
                 if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                 then 0 else 1)
              + 2
                * (if :var_0:.y &lt; 0 then -1
                   else if :var_0:.y = 0 then 0 else 1)
          &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:
       then true
       else
       if 2 =
          (:var_0:.w + :var_1:)
          + :var_0:.v
            + -3
              * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) &lt; 0
                 then -1
                 else
                 if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                 then 0 else 1)
              + 2
                * (if :var_0:.y &lt; 0 then -1
                   else if :var_0:.y = 0 then 0 else 1)
          &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:
       then true
       else
       if 2 =
          (:var_0:.w + :var_1:)
          + :var_0:.v
            + -3
              * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) &lt; 0
                 then -1
                 else
                 if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                 then 0 else 1)
              + 2
                * (if :var_0:.y &lt; 0 then -1
                   else if :var_0:.y = 0 then 0 else 1)
          &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:
       then true else …)</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-8bed0a1a-458d-493c-a2d7-14213a14671b"><table><tr><td><b>into</b></td><td><pre>((((((((((((not
            (((((((((((((1 = :var_0:.w + :var_0:.v &amp;&amp; -3 = :var_0:.y
                         || 1 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y)
                        || 2 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y)
                       || 2 = :var_0:.w + :var_0:.v &amp;&amp; -1 = :var_0:.y)
                      || 3 = :var_0:.w + :var_0:.v &amp;&amp; -1 = :var_0:.y)
                     || -1 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)
                    || 0 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)
                   || 1 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)
                  || -2 = :var_0:.w + :var_0:.v &amp;&amp; 1 = :var_0:.y)
                 || -3 = :var_0:.w + :var_0:.v &amp;&amp; 1 = :var_0:.y)
                || -1 = :var_0:.w + :var_0:.v &amp;&amp; 2 = :var_0:.y)
               || -2 = :var_0:.w + :var_0:.v &amp;&amp; 2 = :var_0:.y)
              || -1 = :var_0:.w + :var_0:.v &amp;&amp; 3 = :var_0:.y)
             &amp;&amp; ((:var_1: = -1 || :var_1: = 0) || :var_1: = 1))
            || 1 =
               (((:var_0:.w + :var_1:) + :var_0:.v)
                + -3
                  * (if 0 &lt;=
                        (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                     then
                       if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                       then 0 else 1
                     else -1))
               + 2
                 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1
                    else -1)
               &amp;&amp; -3 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
           || 1 =
              (((:var_0:.w + :var_1:) + :var_0:.v)
               + -3
                 * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                    then
                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                      then 0 else 1
                    else -1))
              + 2
                * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1
                   else -1)
              &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
          || 2 =
             (((:var_0:.w + :var_1:) + :var_0:.v)
              + -3
                * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                   then
                     if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                     then 0 else 1
                   else -1))
             + 2
               * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1
                  else -1)
             &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
         || 2 =
            (((:var_0:.w + :var_1:) + :var_0:.v)
             + -3
               * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                  then
                    if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                    then 0 else 1
                  else -1))
            + 2
              * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1
                 else -1)
            &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
        || 3 =
           (((:var_0:.w + :var_1:) + :var_0:.v)
            + -3
              * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                 then
                   if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                   then 0 else 1
                 else -1))
           + 2
             * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
           &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
       || -1 =
          (((:var_0:.w + :var_1:) + :var_0:.v)
           + -3
             * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
                then
                  if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                  then 0 else 1
                else -1))
          + 2
            * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
          &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
      || 0 =
         (((:var_0:.w + :var_1:) + :var_0:.v)
          + -3
            * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
               then
                 if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0
                 then 0 else 1
               else -1))
         + 2
           * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
         &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
     || 1 =
        (((:var_0:.w + :var_1:) + :var_0:.v)
         + -3
           * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
              then
                if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 
                then 0 else 1
              else -1))
        + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
        &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
    || -2 =
       (((:var_0:.w + :var_1:) + :var_0:.v)
        + -3
          * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
             then
               if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 
               then 0 else 1
             else -1))
       + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
       &amp;&amp; 1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
   || -3 =
      (((:var_0:.w + :var_1:) + :var_0:.v)
       + -3
         * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
            then
              if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 
              then 0 else 1
            else -1))
      + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
      &amp;&amp; 1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
  || -1 =
     (((:var_0:.w + :var_1:) + :var_0:.v)
      + -3
        * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
           then
             if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 then 0
             else 1
           else -1))
     + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
     &amp;&amp; 2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
 || -2 =
    (((:var_0:.w + :var_1:) + :var_0:.v)
     + -3
       * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
          then
            if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 then 0
            else 1
          else -1))
    + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
    &amp;&amp; 2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
|| -1 =
   (((:var_0:.w + :var_1:) + :var_0:.v)
    + -3
      * (if 0 &lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)
         then
           if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0 then 0
           else 1
         else -1))
   + 2 * (if 0 &lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1 else -1)
   &amp;&amp; 3 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>unsat</h4><pre>(let ((a!1 (not (= (+ (w_2244 s_2332) (v_2246 s_2332)) (- 1))))
      (a!4 (and (= 1 (+ (w_2244 s_23…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-ee5c24df-85ac-4a78-b8d4-ca9bcb6a190f';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-60f96f89-bd1f-4f76-a3a3-2d25ae871891"><textarea style="display: none">digraph &quot;proof&quot; {
p_255 [label=&quot;Start ((if 1 = :var_0:.w + :var_0:.v &amp;&amp; -3 = :var_0:.y then true\l        else\l        if 1 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y then true\l        else\l        if 2 = :var_0:.w + :var_0:.v &amp;&amp; -2 = :var_0:.y then true\l        else\l        if 2 = :var_0:.w + :var_0:.v &amp;&amp; -1 = :var_0:.y then true else …)\l       &amp;&amp; (:var_1: = -1 \|\| :var_1: = 0 \|\| :var_1: = 1)\l       ==\&gt; (if 1 =\l               (:var_0:.w + :var_1:)\l               + :var_0:.v\l                 + -3\l                   * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) \&lt;\l                         0\l                      then -1\l                      else\l                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                      then 0 else 1)\l                   + 2\l                     * (if :var_0:.y \&lt; 0 then -1\l                        else if :var_0:.y = 0 then 0 else 1)\l               &amp;&amp; -3 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l            then true\l            else\l            if 1 =\l               (:var_0:.w + :var_1:)\l               + :var_0:.v\l                 + -3\l                   * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) \&lt;\l                         0\l                      then -1\l                      else\l                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                      then 0 else 1)\l                   + 2\l                     * (if :var_0:.y \&lt; 0 then -1\l                        else if :var_0:.y = 0 then 0 else 1)\l               &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l            then true\l            else\l            if 2 =\l               (:var_0:.w + :var_1:)\l               + :var_0:.v\l                 + -3\l                   * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) \&lt;\l                         0\l                      then -1\l                      else\l                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                      then 0 else 1)\l                   + 2\l                     * (if :var_0:.y \&lt; 0 then -1\l                        else if :var_0:.y = 0 then 0 else 1)\l               &amp;&amp; -2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l            then true\l            else\l            if 2 =\l               (:var_0:.w + :var_1:)\l               + :var_0:.v\l                 + -3\l                   * (if (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:) \&lt;\l                         0\l                      then -1\l                      else\l                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                      then 0 else 1)\l                   + 2\l                     * (if :var_0:.y \&lt; 0 then -1\l                        else if :var_0:.y = 0 then 0 else 1)\l               &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l            then true else …)\l       :time 0.026s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_255 -&gt; p_254 [label=&quot;&quot;];
p_254 [label=&quot;Simplify (((((((((((((not\l                      (((((((((((((1 = :var_0:.w + :var_0:.v\l                                   &amp;&amp; -3 = :var_0:.y\l                                   \|\| 1 = :var_0:.w + :var_0:.v\l                                      &amp;&amp; -2 = :var_0:.y)\l                                  \|\| 2 = :var_0:.w + :var_0:.v\l                                     &amp;&amp; -2 = :var_0:.y)\l                                 \|\| 2 = :var_0:.w + :var_0:.v\l                                    &amp;&amp; -1 = :var_0:.y)\l                                \|\| 3 = :var_0:.w + :var_0:.v\l                                   &amp;&amp; -1 = :var_0:.y)\l                               \|\| -1 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)\l                              \|\| 0 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)\l                             \|\| 1 = :var_0:.w + :var_0:.v &amp;&amp; 0 = :var_0:.y)\l                            \|\| -2 = :var_0:.w + :var_0:.v &amp;&amp; 1 = :var_0:.y)\l                           \|\| -3 = :var_0:.w + :var_0:.v &amp;&amp; 1 = :var_0:.y)\l                          \|\| -1 = :var_0:.w + :var_0:.v &amp;&amp; 2 = :var_0:.y)\l                         \|\| -2 = :var_0:.w + :var_0:.v &amp;&amp; 2 = :var_0:.y)\l                        \|\| -1 = :var_0:.w + :var_0:.v &amp;&amp; 3 = :var_0:.y)\l                       &amp;&amp; ((:var_1: = -1 \|\| :var_1: = 0) \|\| :var_1: = 1))\l                      \|\| 1 =\l                         (((:var_0:.w + :var_1:) + :var_0:.v)\l                          + -3\l                            * (if 0 \&lt;=\l                                  (((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                   + :var_1:)\l                               then\l                                 if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                    + :var_1: = 0\l                                 then 0 else 1\l                               else -1))\l                         + 2\l                           * (if 0 \&lt;= :var_0:.y\l                              then if :var_0:.y = 0 then 0 else 1 else -1)\l                         &amp;&amp; -3 =\l                            ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                     \|\| 1 =\l                        (((:var_0:.w + :var_1:) + :var_0:.v)\l                         + -3\l                           * (if 0 \&lt;=\l                                 (((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                  + :var_1:)\l                              then\l                                if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                   + :var_1: = 0\l                                then 0 else 1\l                              else -1))\l                        + 2\l                          * (if 0 \&lt;= :var_0:.y\l                             then if :var_0:.y = 0 then 0 else 1 else -1)\l                        &amp;&amp; -2 =\l                           ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                    \|\| 2 =\l                       (((:var_0:.w + :var_1:) + :var_0:.v)\l                        + -3\l                          * (if 0 \&lt;=\l                                (((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                 + :var_1:)\l                             then\l                               if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                  + :var_1: = 0\l                               then 0 else 1\l                             else -1))\l                       + 2\l                         * (if 0 \&lt;= :var_0:.y\l                            then if :var_0:.y = 0 then 0 else 1 else -1)\l                       &amp;&amp; -2 =\l                          ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                   \|\| 2 =\l                      (((:var_0:.w + :var_1:) + :var_0:.v)\l                       + -3\l                         * (if 0 \&lt;=\l                               (((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                + :var_1:)\l                            then\l                              if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                 + :var_1: = 0\l                              then 0 else 1\l                            else -1))\l                      + 2\l                        * (if 0 \&lt;= :var_0:.y\l                           then if :var_0:.y = 0 then 0 else 1 else -1)\l                      &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                  \|\| 3 =\l                     (((:var_0:.w + :var_1:) + :var_0:.v)\l                      + -3\l                        * (if 0 \&lt;=\l                              (((:var_0:.y + :var_0:.v) + :var_0:.w)\l                               + :var_1:)\l                           then\l                             if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                                + :var_1: = 0\l                             then 0 else 1\l                           else -1))\l                     + 2\l                       * (if 0 \&lt;= :var_0:.y\l                          then if :var_0:.y = 0 then 0 else 1 else -1)\l                     &amp;&amp; -1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                 \|\| -1 =\l                    (((:var_0:.w + :var_1:) + :var_0:.v)\l                     + -3\l                       * (if 0 \&lt;=\l                             (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                          then\l                            if ((:var_0:.y + :var_0:.v) + :var_0:.w)\l                               + :var_1: = 0\l                            then 0 else 1\l                          else -1))\l                    + 2\l                      * (if 0 \&lt;= :var_0:.y\l                         then if :var_0:.y = 0 then 0 else 1 else -1)\l                    &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                \|\| 0 =\l                   (((:var_0:.w + :var_1:) + :var_0:.v)\l                    + -3\l                      * (if 0 \&lt;=\l                            (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                         then\l                           if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l                              = 0\l                           then 0 else 1\l                         else -1))\l                   + 2\l                     * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                        else -1)\l                   &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l               \|\| 1 =\l                  (((:var_0:.w + :var_1:) + :var_0:.v)\l                   + -3\l                     * (if 0 \&lt;=\l                           (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                        then\l                          if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l                             = 0\l                          then 0 else 1\l                        else -1))\l                  + 2\l                    * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                       else -1)\l                  &amp;&amp; 0 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l              \|\| -2 =\l                 (((:var_0:.w + :var_1:) + :var_0:.v)\l                  + -3\l                    * (if 0 \&lt;=\l                          (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                       then\l                         if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: =\l                            0\l                         then 0 else 1\l                       else -1))\l                 + 2\l                   * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                      else -1)\l                 &amp;&amp; 1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l             \|\| -3 =\l                (((:var_0:.w + :var_1:) + :var_0:.v)\l                 + -3\l                   * (if 0 \&lt;=\l                         (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                      then\l                        if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: =\l                           0\l                        then 0 else 1\l                      else -1))\l                + 2\l                  * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                     else -1)\l                &amp;&amp; 1 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l            \|\| -1 =\l               (((:var_0:.w + :var_1:) + :var_0:.v)\l                + -3\l                  * (if 0 \&lt;=\l                        (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                     then\l                       if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                       then 0 else 1\l                     else -1))\l               + 2\l                 * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                    else -1)\l               &amp;&amp; 2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l           \|\| -2 =\l              (((:var_0:.w + :var_1:) + :var_0:.v)\l               + -3\l                 * (if 0 \&lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                    then\l                      if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                      then 0 else 1\l                    else -1))\l              + 2\l                * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                   else -1)\l              &amp;&amp; 2 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l          \|\| -1 =\l             (((:var_0:.w + :var_1:) + :var_0:.v)\l              + -3\l                * (if 0 \&lt;= (((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:)\l                   then\l                     if ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1: = 0\l                     then 0 else 1\l                   else -1))\l             + 2\l               * (if 0 \&lt;= :var_0:.y then if :var_0:.y = 0 then 0 else 1\l                  else -1)\l             &amp;&amp; 3 = ((:var_0:.y + :var_0:.v) + :var_0:.w) + :var_1:\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_254 -&gt; p_253 [label=&quot;&quot;];
p_253 -&gt; p_z3_3490 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_3490 [label=&quot;(let ((a!1 (not (= (+ (w_2244 s_2332) (v_2246 s_2332)) (- 1))))
      (a!4 (and (= 1 (+ (w_2244 s_23…&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_253 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-60f96f89-bd1f-4f76-a3a3-2d25ae871891';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-c251881a-1f01-496b-93f0-6573a48ccf5d';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d9e92a86-8a84-4418-9b37-136f85c215c6';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-e5efca4e-e83c-4777-bc45-59a47a30e2ed"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not\l(((((((((((((not\l             (((((((((((((1 = s.w + s.v &amp;&amp; -3 = s.y\l                          \|\| 1 = s.w + s.v &amp;&amp; -2 = s.y)\l                         \|\| 2 = s.w + s.v &amp;&amp; -2 = s.y)\l                        \|\| 2 = s.w + s.v &amp;&amp; -1 = s.y)\l                       \|\| 3 = s.w + s.v &amp;&amp; -1 = s.y)\l                      \|\| -1 = s.w + s.v &amp;&amp; 0 = s.y)\l                     \|\| 0 = s.w + s.v &amp;&amp; 0 = s.y)\l                    \|\| 1 = s.w + s.v &amp;&amp; 0 = s.y)\l                   \|\| -2 = s.w + s.v &amp;&amp; 1 = s.y)\l                  \|\| -3 = s.w + s.v &amp;&amp; 1 = s.y)\l                 \|\| -1 = s.w + s.v &amp;&amp; 2 = s.y)\l                \|\| -2 = s.w + s.v &amp;&amp; 2 = s.y)\l               \|\| -1 = s.w + s.v &amp;&amp; 3 = s.y)\l              &amp;&amp; ((dw = -1 \|\| dw = 0) \|\| dw = 1))\l             \|\| 1 =\l                (((s.w + dw) + s.v)\l                 + -3\l                   * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                      then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1\l                      else -1))\l                + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l                &amp;&amp; -3 = ((s.y + s.v) + s.w) + dw)\l            \|\| 1 =\l               (((s.w + dw) + s.v)\l                + -3\l                  * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                     then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1\l                     else -1))\l               + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l               &amp;&amp; -2 = ((s.y + s.v) + s.w) + dw)\l           \|\| 2 =\l              (((s.w + dw) + s.v)\l               + -3\l                 * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                    then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1\l                    else -1))\l              + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l              &amp;&amp; -2 = ((s.y + s.v) + s.w) + dw)\l          \|\| 2 =\l             (((s.w + dw) + s.v)\l              + -3\l                * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                   then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 \l                   else -1))\l             + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l             &amp;&amp; -1 = ((s.y + s.v) + s.w) + dw)\l         \|\| 3 =\l            (((s.w + dw) + s.v)\l             + -3\l               * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                  then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 \l                  else -1))\l            + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l            &amp;&amp; -1 = ((s.y + s.v) + s.w) + dw)\l        \|\| -1 =\l           (((s.w + dw) + s.v)\l            + -3\l              * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                 then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l           + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l           &amp;&amp; 0 = ((s.y + s.v) + s.w) + dw)\l       \|\| 0 =\l          (((s.w + dw) + s.v)\l           + -3\l             * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l                then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l          + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l          &amp;&amp; 0 = ((s.y + s.v) + s.w) + dw)\l      \|\| 1 =\l         (((s.w + dw) + s.v)\l          + -3\l            * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l               then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l         + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l         &amp;&amp; 0 = ((s.y + s.v) + s.w) + dw)\l     \|\| -2 =\l        (((s.w + dw) + s.v)\l         + -3\l           * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l              then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l        + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l        &amp;&amp; 1 = ((s.y + s.v) + s.w) + dw)\l    \|\| -3 =\l       (((s.w + dw) + s.v)\l        + -3\l          * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l             then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l       + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l       &amp;&amp; 1 = ((s.y + s.v) + s.w) + dw)\l   \|\| -1 =\l      (((s.w + dw) + s.v)\l       + -3\l         * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l            then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l      + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l      &amp;&amp; 2 = ((s.y + s.v) + s.w) + dw)\l  \|\| -2 =\l     (((s.w + dw) + s.v)\l      + -3\l        * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l           then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l     + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l     &amp;&amp; 2 = ((s.y + s.v) + s.w) + dw)\l \|\| -1 =\l    (((s.w + dw) + s.v)\l     + -3\l       * (if 0 \&lt;= (((s.y + s.v) + s.w) + dw)\l          then if ((s.y + s.v) + s.w) + dw = 0 then 0 else 1 else -1))\l    + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\l    &amp;&amp; 3 = ((s.y + s.v) + s.w) + dw)&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-e5efca4e-e83c-4777-bc45-59a47a30e2ed';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-ce6bbe17-c844-4229-9692-350ea1f2ecdc';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `good_state` is disabled
(non-recursive function)</pre></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `next_state` is disabled
(non-recursive function)</pre></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Theorem:-Multistep-safety">Theorem: Multistep safety<a class="anchor-link" href="#Theorem:-Multistep-safety">&#182;</a></h2><p>We prove: <code>If we start in a good state and simulate the controller w.r.t. an arbitrary sequence of sensor readings, then we still end up in a good state.</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-17" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">disable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">disable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">all_good</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="n">good_state</span> <span class="n">s</span> <span class="o">&amp;&amp;</span> <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
  <span class="o">==&gt;</span>
  <span class="n">good_state</span> <span class="o">((</span><span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span><span class="o">)</span> <span class="o">[@</span><span class="n">trigger</span><span class="o">])</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">final_state</span><span class="o">]</span>
<span class="o">[@@</span><span class="n">forward_chaining</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val all_good : state -&gt; Z.t list -&gt; bool = &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

good_state s &amp;&amp; arbitrary_delta_ws dws ==&gt; good_state (final_state s dws).

1 nontautological subgoal.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. good_state s
 H1. List.for_all anon_fun.arbitrary_delta_ws.0 dws
|---------------------------------------------------------------------------
 good_state (final_state s dws)

Verified up to bound 10 (after 0.284s).

Must try induction.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">final_state</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (dws = [] ==&gt; φ dws s)
 &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
     ==&gt; φ dws s).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.2</span>:

 H0. dws = []
 H1. good_state s
 H2. List.for_all anon_fun.arbitrary_delta_ws.0 dws
|---------------------------------------------------------------------------
 good_state (final_state s dws)

But simplification reduces this to true, using the definitions of
<span class="ansi-blue-intense-fg ansi-bold">List.for_all </span>and<span class="ansi-blue-intense-fg ansi-bold"> final_state</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1</span>:

 H0. not (dws = [])
 H1. good_state (next_state (List.hd dws) s)
     &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)
     ==&gt; good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 H2. good_state s
 H3. List.for_all anon_fun.arbitrary_delta_ws.0 dws
|---------------------------------------------------------------------------
 good_state (final_state s dws)

This simplifies, using the definitions of <span class="ansi-blue-intense-fg ansi-bold">List.for_all </span>and<span class="ansi-blue-intense-fg ansi-bold"> final_state</span> to the
following 3 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1.3</span>:

 H0. List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)
 H1. List.hd dws = -1
 H2. good_state s
 H3. dws &lt;&gt; []
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. good_state (next_state (List.hd dws) s)

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1.2</span>:

 H0. List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)
 H1. List.hd dws = 0
 H2. good_state s
 H3. dws &lt;&gt; []
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. List.hd dws = -1
 C2. good_state (next_state (List.hd dws) s)

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1.1.1</span>:

 H0. List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)
 H1. List.hd dws = 1
 H2. good_state s
 H3. dws &lt;&gt; []
|---------------------------------------------------------------------------
 C0. good_state (final_state (next_state (List.hd dws) s) (List.tl dws))
 C1. List.hd dws = 0
 C2. List.hd dws = -1
 C3. good_state (next_state (List.hd dws) s)

But simplification reduces this to true, using the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">safety_1</span>.

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-proved"><i class="fa fa-check-circle"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-7f7a9bfa-47cf-44fe-ac9d-2394c2d88077"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-cb72f589-6b42-4f5e-84d0-4b6c70f04465"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-726d4514-fc8c-43ec-a3f0-2fc5a5fee16b"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-76d0120c-dab3-4f97-8401-dc5d2b54251b"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>11</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>0.903s</pre></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-bb1af538-abab-45ea-90f9-1f05070bd8a2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.903s, &quot;Goal&quot;]
  good_state :var_0: &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 :var_1:
  ==&gt; good_state (final_state :var_0: :var_1:)</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-f354ac40-3272-4c8e-afae-2a76f69c6def"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(not (good_state s) || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.903s, &quot;1&quot;]
  (not (good_state s) || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
  || good_state (final_state s dws)</pre></li><li><pre>induction on (functional final_state)
:scheme (dws = [] ==&gt; φ dws s)
        &amp;&amp; (not (dws = []) &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)
            ==&gt; φ dws s)</pre></li><li><div><pre>Split ((((not (dws = []) || not (good_state s))
         || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
        || good_state (final_state s dws))
       &amp;&amp; (((not
             (not (dws = [])
              &amp;&amp; ((not (good_state (next_state (List.hd dws) s))
                   || not
                      (List.for_all anon_fun.arbitrary_delta_ws.0
                       (List.tl dws)))
                  || good_state
                     (final_state (next_state (List.hd dws) s) (List.tl dws))))
             || not (good_state s))
            || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
           || good_state (final_state s dws))
       :cases [((not (dws = []) || not (good_state s))
                || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
               || good_state (final_state s dws);
               (((dws = []
                  || not
                     (not
                      (good_state (next_state (List.hd dws) s)
                       &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0
                          (List.tl dws))
                      || good_state
                         (final_state (next_state (List.hd dws) s)
                          (List.tl dws))))
                 || not (good_state s))
                || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
               || good_state (final_state s dws)])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-381d4099-62f7-47c9-a4dd-9885525b3018"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(((dws = []
   || not
      (not
       (good_state (next_state (List.hd dws) s)
        &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws))
       || good_state (final_state (next_state (List.hd dws) s) (List.tl dws))))
  || not (good_state s))
 || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.554s, &quot;1.1&quot;]
  (((dws = []
     || not
        (not
         (good_state (next_state (List.hd dws) s)
          &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws))
         || good_state
            (final_state (next_state (List.hd dws) s) (List.tl dws))))
    || not (good_state s))
   || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
  || good_state (final_state s dws)</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-d2c1c203-6b9b-4bb0-b6f6-f2e542647dc5"><table><tr><td><b>into</b></td><td><pre>((((((good_state (final_state (next_state (List.hd …) s) (List.tl …))
      || not (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))
     || not (List.hd … = -1))
    || not (good_state s))
   || good_state (next_state (List.hd …) s))
  || … = [])
 &amp;&amp; ((((((good_state (final_state (next_state (List.hd …) s) (List.tl …))
          || not (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))
         || not (List.hd … = 0))
        || List.hd … = -1)
       || not (good_state s))
      || good_state (next_state (List.hd …) s))
     || … = []))
&amp;&amp; (((((((good_state (final_state (next_state (List.hd …) s) (List.tl …))
          || not (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))
         || not (List.hd … = 1))
        || List.hd … = 0)
       || List.hd … = -1)
      || not (good_state s))
     || good_state (next_state (List.hd …) s))
    || … = [])</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[final_state, final_state, final_state, List.for_all, final_state,
 final_state, final_state, List.for_all, List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-381d4099-62f7-47c9-a4dd-9885525b3018';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-8b16c8f5-2e78-4337-861c-6684fd2b671f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>((not (dws = []) || not (good_state s))
 || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
|| good_state (final_state s dws)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.554s, &quot;1.2&quot;]
  ((not (dws = []) || not (good_state s))
   || not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))
  || good_state (final_state s dws)</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-67481c4a-38fd-4ef1-923f-cc85c73a3b1e"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[final_state, List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-8b16c8f5-2e78-4337-861c-6684fd2b671f';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f354ac40-3272-4c8e-afae-2a76f69c6def';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-bb1af538-abab-45ea-90f9-1f05070bd8a2';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-10664e47-0c60-4ba6-b047-bb9157c018b7"><textarea style="display: none">digraph &quot;proof&quot; {
p_288 [label=&quot;Start (good_state :var_0:\l       &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 :var_1:\l       ==\&gt; good_state (final_state :var_0: :var_1:) :name \&quot;Goal\&quot; :time 0.903s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_288 -&gt; p_286 [label=&quot;&quot;];
subgraph cluster_287 {
  color=blue;
p_286 [label=&quot;Start ((not (good_state s)\l        \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l       \|\| good_state (final_state s dws) :name \&quot;1\&quot; :time 0.903s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_286 -&gt; p_285 [label=&quot;&quot;];
p_285 [label=&quot;Induct ((functional final_state),\l        :scheme (dws = [] ==\&gt; φ dws s)\l                &amp;&amp; (not (dws = [])\l                    &amp;&amp; φ (List.tl dws) (next_state (List.hd dws) s)\l                    ==\&gt; φ dws s))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_285 -&gt; p_284 [label=&quot;&quot;];
p_284 [label=&quot;Split ((((not (dws = []) \|\| not (good_state s))\l         \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l        \|\| good_state (final_state s dws))\l       &amp;&amp; (((not\l             (not (dws = [])\l              &amp;&amp; ((not (good_state (next_state (List.hd dws) s))\l                   \|\| not\l                      (List.for_all anon_fun.arbitrary_delta_ws.0\l                       (List.tl dws)))\l                  \|\| good_state\l                     (final_state (next_state (List.hd dws) s) (List.tl dws))))\l             \|\| not (good_state s))\l            \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l           \|\| good_state (final_state s dws))\l       :cases [((not (dws = []) \|\| not (good_state s))\l                \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l               \|\| good_state (final_state s dws);\l               (((dws = []\l                  \|\| not\l                     (not\l                      (good_state (next_state (List.hd dws) s)\l                       &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0\l                          (List.tl dws))\l                      \|\| good_state\l                         (final_state (next_state (List.hd dws) s)\l                          (List.tl dws))))\l                 \|\| not (good_state s))\l                \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l               \|\| good_state (final_state s dws)])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_284 -&gt; p_279 [label=&quot;&quot;];
subgraph cluster_280 {
  color=blue;
p_279 [label=&quot;Start ((((dws = []\l          \|\| not\l             (not\l              (good_state (next_state (List.hd dws) s)\l               &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws))\l              \|\| good_state\l                 (final_state (next_state (List.hd dws) s) (List.tl dws))))\l         \|\| not (good_state s))\l        \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l       \|\| good_state (final_state s dws) :name \&quot;1.1\&quot; :time 0.554s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_279 -&gt; p_278 [label=&quot;&quot;];
p_278 [label=&quot;Simplify (((((((good_state\l                (final_state (next_state (List.hd …) s) (List.tl …))\l                \|\| not\l                   (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))\l               \|\| not (List.hd … = -1))\l              \|\| not (good_state s))\l             \|\| good_state (next_state (List.hd …) s))\l            \|\| … = [])\l           &amp;&amp; ((((((good_state\l                    (final_state (next_state (List.hd …) s) (List.tl …))\l                    \|\| not\l                       (List.for_all anon_fun.arbitrary_delta_ws.0\l                        (List.tl …)))\l                   \|\| not (List.hd … = 0))\l                  \|\| List.hd … = -1)\l                 \|\| not (good_state s))\l                \|\| good_state (next_state (List.hd …) s))\l               \|\| … = []))\l          &amp;&amp; (((((((good_state\l                    (final_state (next_state (List.hd …) s) (List.tl …))\l                    \|\| not\l                       (List.for_all anon_fun.arbitrary_delta_ws.0\l                        (List.tl …)))\l                   \|\| not (List.hd … = 1))\l                  \|\| List.hd … = 0)\l                 \|\| List.hd … = -1)\l                \|\| not (good_state s))\l               \|\| good_state (next_state (List.hd …) s))\l              \|\| … = [])\l          :expansions [final_state;\l                       final_state;\l                       final_state;\l                       List.for_all;\l                       final_state;\l                       final_state;\l                       final_state;\l                       List.for_all;\l                       List.for_all]\l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_278 -&gt; p_270 [label=&quot;&quot;];
subgraph cluster_271 {
  color=blue;
p_270 [label=&quot;Start (((((((good_state\l             (final_state (next_state (List.hd …) s) (List.tl …))\l             \|\| not\l                (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))\l            \|\| not (List.hd … = 1))\l           \|\| List.hd … = 0)\l          \|\| List.hd … = -1)\l         \|\| not (good_state s))\l        \|\| good_state (next_state (List.hd …) s))\l       \|\| … = [] :name \&quot;1.1.1\&quot; :time 0.285s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_270 -&gt; p_269 [label=&quot;&quot;];
p_269 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_278 -&gt; p_273 [label=&quot;&quot;];
subgraph cluster_274 {
  color=blue;
p_273 [label=&quot;Start ((((((good_state\l            (final_state (next_state (List.hd …) s) (List.tl …))\l            \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))\l           \|\| not (List.hd … = 0))\l          \|\| List.hd … = -1)\l         \|\| not (good_state s))\l        \|\| good_state (next_state (List.hd …) s))\l       \|\| … = [] :name \&quot;1.1.2\&quot; :time 0.285s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_273 -&gt; p_272 [label=&quot;&quot;];
p_272 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_278 -&gt; p_276 [label=&quot;&quot;];
subgraph cluster_277 {
  color=blue;
p_276 [label=&quot;Start (((((good_state\l           (final_state (next_state (List.hd …) s) (List.tl …))\l           \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl …)))\l          \|\| not (List.hd … = -1))\l         \|\| not (good_state s))\l        \|\| good_state (next_state (List.hd …) s))\l       \|\| … = [] :name \&quot;1.1.3\&quot; :time 0.285s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_276 -&gt; p_275 [label=&quot;&quot;];
p_275 [label=&quot;Simplify (true :expansions [] :rw [safety_1] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_284 -&gt; p_282 [label=&quot;&quot;];
subgraph cluster_283 {
  color=blue;
p_282 [label=&quot;Start (((not (dws = []) \|\| not (good_state s))\l        \|\| not (List.for_all anon_fun.arbitrary_delta_ws.0 dws))\l       \|\| good_state (final_state s dws) :name \&quot;1.2\&quot; :time 0.554s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_282 -&gt; p_281 [label=&quot;&quot;];
p_281 [label=&quot;Simplify (true :expansions [final_state; List.for_all] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-10664e47-0c60-4ba6-b047-bb9157c018b7';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-726d4514-fc8c-43ec-a3f0-2fc5a5fee16b';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cb72f589-6b42-4f5e-84d0-4b6c70f04465';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-7f7a9bfa-47cf-44fe-ac9d-2394c2d88077';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Theorem:-Cannot-get-more-than-3-units-off-course.">Theorem: Cannot get more than 3 units off course.<a class="anchor-link" href="#Theorem:-Cannot-get-more-than-3-units-off-course.">&#182;</a></h1><p>We prove: <code>No matter how the wind behaves, if the vehicle starts at the initial state (0,0,0), then the controller guarantees the vehicle never strays farther than 3 units from the x-axis.</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-19" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">enable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">enable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">vehicle_stays_within_3_units_of_course</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="o">-</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">3</span>
 <span class="o">[@@</span><span class="n">simp</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val vehicle_stays_within_3_units_of_course : Z.t list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-proved"><i class="fa fa-check-circle"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-2049acf8-0225-4ebe-8ca4-51d059317b2c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-0c8e74fa-b9ae-439c-8e49-6be738138986"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-60d2cead-a709-4546-a349-0ccdcc7ba91e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-7ec14125-1ceb-40dc-986d-60819cfe04bb"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.091s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-96f03546-ce97-4986-8230-4818f88eb965"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-cbd7cc53-6fe6-4a53-9389-f0af608918aa"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-a97eff54-467c-4a5f-8e3b-83c289dd05fe"><table><tr><td><b>rlimit count</b></td><td>8582</td></tr><tr><td><b>mk bool var</b></td><td>5</td></tr><tr><td><b>memory</b></td><td>28.760000</td></tr><tr><td><b>max memory</b></td><td>40.700000</td></tr><tr><td><b>num allocs</b></td><td>9352201967.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-96f03546-ce97-4986-8230-4818f88eb965';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-0d497623-5be6-4ddd-ad20-1edda5a50b89"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.091s]
  List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:
  ==&gt; -3 &lt;= (final_state {w = 0; y = 0; v = 0} :var_0:).y
      &amp;&amp; (final_state {w = 0; y = 0; v = 0} :var_0:).y &lt;= 3</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-071efba5-7ef0-4090-9cea-023791259c51"><table><tr><td><b>into</b></td><td><pre>not (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:)
|| -3 &lt;= (final_state {w = 0; y = 0; v = 0} :var_0:).y
   &amp;&amp; (final_state {w = 0; y = 0; v = 0} :var_0:).y &lt;= 3</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-8ec02645-e4fd-4371-a800-b585771f8962"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div></li><li><div><h4>unsat</h4><pre>(mp (asserted (not true)) (rewrite (= (not true) false)) false)</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0d497623-5be6-4ddd-ad20-1edda5a50b89';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-f6d8c0f7-16c0-4a51-b501-078379dbc6d0"><textarea style="display: none">digraph &quot;proof&quot; {
p_292 [label=&quot;Start (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:\l       ==\&gt; -3 \&lt;= (final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l           &amp;&amp; (final_state \{w = 0; y = 0; v = 0\} :var_0:).y \&lt;= 3\l       :time 0.091s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_292 -&gt; p_291 [label=&quot;&quot;];
p_291 [label=&quot;Simplify (not (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:)\l          \|\| -3 \&lt;= (final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l             &amp;&amp; (final_state \{w = 0; y = 0; v = 0\} :var_0:).y \&lt;= 3\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_291 -&gt; p_290 [label=&quot;&quot;];
p_290 [label=&quot;Simplify (true :expansions [] :rw [] :fc [all_good; all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_290 -&gt; p_289 [label=&quot;&quot;];
p_289 -&gt; p_z3_1033 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_1033 [label=&quot;(mp (asserted (not true)) (rewrite (= (not true) false)) false)&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_289 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-f6d8c0f7-16c0-4a51-b501-078379dbc6d0';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-60d2cead-a709-4546-a349-0ccdcc7ba91e';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0c8e74fa-b9ae-439c-8e49-6be738138986';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-c5d75709-a778-45d5-9c5a-ada14ee89b24"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not true&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-c5d75709-a778-45d5-9c5a-ada14ee89b24';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-2049acf8-0225-4ebe-8ca4-51d059317b2c';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">Theorem: If wind is stable for 4 intervals, we get back on course.<a class="anchor-link" href="#Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">&#182;</a></h1><p>We prove: <code>If the wind ever becomes constant for at least 4 sampling intervals, then the vehicle returns to the x-axis and stays there as long as the wind remains constant.</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-21" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">steady_wind</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">for_all</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="k">let</span> <span class="n">at_least_4</span> <span class="n">xs</span> <span class="o">=</span> <span class="k">match</span> <span class="n">xs</span> <span class="k">with</span>
    <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">::</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val steady_wind : Z.t list -&gt; bool = &lt;fun&gt;
val at_least_4 : &#39;a list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-22" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">disable</span> <span class="n">next_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">disable</span> <span class="n">good_state</span><span class="o">;;</span>
<span class="o">#</span><span class="n">max_induct</span> <span class="mi">4</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">good_state_find_and_stay_zt_zero</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">good_state</span> <span class="n">s</span>
 <span class="o">&amp;&amp;</span> <span class="n">steady_wind</span> <span class="n">dws</span>
 <span class="o">&amp;&amp;</span> <span class="n">at_least_4</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="o">(</span><span class="n">final_state</span> <span class="n">s</span> <span class="n">dws</span><span class="o">)</span> <span class="o">[@</span><span class="n">trigger</span><span class="o">]</span> <span class="k">in</span>
 <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">final_state</span><span class="o">]</span>
<span class="o">[@@</span><span class="n">forward_chaining</span><span class="o">]</span>
<span class="o">;;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state_find_and_stay_zt_zero : state -&gt; Z.t list -&gt; bool = &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

good_state s &amp;&amp; steady_wind dws &amp;&amp; at_least_4 dws
==&gt; let (s&#39; : state) = final_state s dws in s&#39;.y = 0.

1 nontautological subgoal.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. good_state s
 H1. List.for_all anon_fun.steady_wind.0 dws
 H2. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H3. (List.tl (List.tl dws)) &lt;&gt; []
 H4. (List.tl dws) &lt;&gt; []
 H5. dws &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;</span>:

 H0. dws &lt;&gt; []
 H1. (List.tl dws) &lt;&gt; []
 H2. (List.tl (List.tl dws)) &lt;&gt; []
 H3. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H4. List.for_all anon_fun.steady_wind.0 (List.tl dws)
 H5. List.hd dws = 0
 H6. good_state s
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;</span>:

 H0. good_state s
 H1. List.hd dws = 0
 H2. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws))
 H3. List.hd (List.tl dws) = 0
 H4. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H5. (List.tl (List.tl dws)) &lt;&gt; []
 H6. (List.tl dws) &lt;&gt; []
 H7. dws &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;</span>:

 H0. dws &lt;&gt; []
 H1. (List.tl dws) &lt;&gt; []
 H2. (List.tl (List.tl dws)) &lt;&gt; []
 H3. (List.tl (List.tl (List.tl dws))) &lt;&gt; []
 H4. List.hd (List.tl dws) = 0
 H5. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl (List.tl dws)))
 H6. List.hd (List.tl (List.tl dws)) = 0
 H7. List.hd dws = 0
 H8. good_state s
|---------------------------------------------------------------------------
 (final_state s dws).y = 0

Verified up to bound 10 (after 0.068s).

We can eliminate destructors by the following
substitution:
 dws -&gt; dws1 :: dws2

This produces the modified subgoal:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;</span>:

 H0. dws2 &lt;&gt; []
 H1. (List.tl dws2) &lt;&gt; []
 H2. (List.tl (List.tl dws2)) &lt;&gt; []
 H3. List.hd dws2 = 0
 H4. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))
 H5. List.hd (List.tl dws2) = 0
 H6. dws1 = 0
 H7. good_state s
|---------------------------------------------------------------------------
 (final_state s (dws1 :: dws2)).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">final_state</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;</span>:

 H0. good_state s
 H1. List.hd (List.tl dws2) = 0
 H2. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))
 H3. List.hd dws2 = 0
 H4. (List.tl (List.tl dws2)) &lt;&gt; []
 H5. (List.tl dws2) &lt;&gt; []
 H6. dws2 &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state (next_state 0 s) dws2).y = 0

Verified up to bound 10 (after 0.068s).

Must try induction.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">final_state</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (dws2 = [] ==&gt; φ dws2 s)
 &amp;&amp; (not (dws2 = []) &amp;&amp; φ (List.tl dws2) s ==&gt; φ dws2 s).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;.2</span>:

 H0. dws2 = []
 H1. good_state s
 H2. List.hd (List.tl dws2) = 0
 H3. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))
 H4. List.hd dws2 = 0
 H5. (List.tl (List.tl dws2)) &lt;&gt; []
 H6. (List.tl dws2) &lt;&gt; []
 H7. dws2 &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state (next_state 0 s) dws2).y = 0

But simplification reduces this to true.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;.1</span>:

 H0. not (dws2 = [])
 H1. (((((good_state s &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)
         &amp;&amp; List.for_all anon_fun.steady_wind.0
            (List.tl (List.tl (List.tl dws2))))
        &amp;&amp; List.hd (List.tl dws2) = 0)
       &amp;&amp; (List.tl (List.tl (List.tl dws2))) &lt;&gt; [])
      &amp;&amp; (List.tl (List.tl dws2)) &lt;&gt; [])
     &amp;&amp; (List.tl dws2) &lt;&gt; []
     ==&gt; (final_state (next_state 0 s) (List.tl dws2)).y = 0
 H2. good_state s
 H3. List.hd (List.tl dws2) = 0
 H4. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))
 H5. List.hd dws2 = 0
 H6. (List.tl (List.tl dws2)) &lt;&gt; []
 H7. (List.tl dws2) &lt;&gt; []
 H8. dws2 &lt;&gt; []
|---------------------------------------------------------------------------
 (final_state (next_state 0 s) dws2).y = 0

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to the following 2
subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;.1.2</span>:

 H0. dws2 &lt;&gt; []
 H1. (List.tl dws2) &lt;&gt; []
 H2. (List.tl (List.tl dws2)) &lt;&gt; []
 H3. List.hd dws2 = 0
 H4. List.hd (List.tl dws2) = 0
 H5. good_state s
 H6. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl (List.tl dws2)))
 H7. List.hd (List.tl (List.tl dws2)) = 0
|---------------------------------------------------------------------------
 C0. (final_state (next_state 0 s) dws2).y = 0
 C1. (List.tl (List.tl (List.tl dws2))) &lt;&gt; []

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">List.for_all</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;.1.2&#39;</span>:

 H0. List.hd (List.tl (List.tl dws2)) = 0
 H1. good_state s
 H2. List.hd (List.tl dws2) = 0
 H3. List.hd dws2 = 0
 H4. (List.tl (List.tl dws2)) &lt;&gt; []
 H5. (List.tl dws2) &lt;&gt; []
 H6. dws2 &lt;&gt; []
|---------------------------------------------------------------------------
 C0. (List.tl (List.tl (List.tl dws2))) &lt;&gt; []
 C1. (final_state (next_state 0 s) dws2).y = 0

But we verify Subgoal 1&#39;&#39;&#39;&#39;&#39;.1.2&#39; by recursive unrolling.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1&#39;&#39;&#39;&#39;&#39;.1.1</span>:

 H0. dws2 &lt;&gt; []
 H1. (List.tl dws2) &lt;&gt; []
 H2. (List.tl (List.tl dws2)) &lt;&gt; []
 H3. List.hd dws2 = 0
 H4. List.hd (List.tl dws2) = 0
 H5. good_state s
 H6. (final_state (next_state 0 s) (List.tl dws2)).y = 0
 H7. (List.tl (List.tl (List.tl dws2))) &lt;&gt; []
 H8. List.for_all anon_fun.steady_wind.0 (List.tl (List.tl (List.tl dws2)))
 H9. List.hd (List.tl (List.tl dws2)) = 0
|---------------------------------------------------------------------------
 (final_state (next_state 0 s) dws2).y = 0

But we verify Subgoal 1&#39;&#39;&#39;&#39;&#39;.1.1 by recursive unrolling.

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-proved"><i class="fa fa-check-circle"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-3b9197de-3b74-41b4-a897-e637adff143e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-2f51610e-2fed-4af2-a476-d550d0b9d12c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-b4ceecb2-5e3c-4537-b1ab-89c4137fe9ef"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-61e8986d-2ee8-4c10-9501-d51c4abac73b"><table><tr><td><b>ground_instances</b></td><td>13</td></tr><tr><td><b>definitions</b></td><td>52</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>1.407s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-b07bb9d7-f379-4f68-807d-56f376da399c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-38eddba3-365b-4872-aff7-567077be06f5"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-987f8b00-18f5-4289-a287-341d6a3ababc"><table><tr><td><b>arith offset eqs</b></td><td>134</td></tr><tr><td><b>num checks</b></td><td>20</td></tr><tr><td><b>arith assert lower</b></td><td>1051</td></tr><tr><td><b>arith pivots</b></td><td>59</td></tr><tr><td><b>rlimit count</b></td><td>319079</td></tr><tr><td><b>mk clause</b></td><td>754</td></tr><tr><td><b>datatype occurs check</b></td><td>290</td></tr><tr><td><b>mk bool var</b></td><td>680</td></tr><tr><td><b>arith assert upper</b></td><td>920</td></tr><tr><td><b>datatype splits</b></td><td>5</td></tr><tr><td><b>decisions</b></td><td>289</td></tr><tr><td><b>arith add rows</b></td><td>562</td></tr><tr><td><b>arith bound prop</b></td><td>148</td></tr><tr><td><b>propagations</b></td><td>3387</td></tr><tr><td><b>interface eqs</b></td><td>2</td></tr><tr><td><b>conflicts</b></td><td>97</td></tr><tr><td><b>arith fixed eqs</b></td><td>179</td></tr><tr><td><b>datatype accessor ax</b></td><td>15</td></tr><tr><td><b>minimized lits</b></td><td>177</td></tr><tr><td><b>arith conflicts</b></td><td>28</td></tr><tr><td><b>arith assert diseq</b></td><td>745</td></tr><tr><td><b>datatype constructor ax</b></td><td>12</td></tr><tr><td><b>final checks</b></td><td>16</td></tr><tr><td><b>added eqs</b></td><td>1593</td></tr><tr><td><b>del clause</b></td><td>607</td></tr><tr><td><b>arith eq adapter</b></td><td>325</td></tr><tr><td><b>memory</b></td><td>47.370000</td></tr><tr><td><b>max memory</b></td><td>50.540000</td></tr><tr><td><b>num allocs</b></td><td>20823965785.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b07bb9d7-f379-4f68-807d-56f376da399c';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-f74cc4bd-98fc-4233-ac58-8cb50d0728cd"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[1.407s, &quot;Goal&quot;]
  good_state :var_0:
  &amp;&amp; List.for_all anon_fun.steady_wind.0 :var_1:
     &amp;&amp; (if (List.tl (List.tl (List.tl :var_1:))) &lt;&gt; []
            &amp;&amp; (List.tl (List.tl :var_1:)) &lt;&gt; []
               &amp;&amp; (List.tl :var_1:) &lt;&gt; [] &amp;&amp; :var_1: &lt;&gt; []
         then true else false)
  ==&gt; (final_state :var_0: :var_1:).y = 0</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-061adaf1-ae36-49b7-ba1b-35929d2d9d15"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(((((not (good_state s) || not (List.for_all anon_fun.steady_wind.0 dws))
    || not ((List.tl (List.tl (List.tl dws))) &lt;&gt; []))
   || not ((List.tl (List.tl dws)) &lt;&gt; []))
  || not ((List.tl dws) &lt;&gt; []))
 || not (dws &lt;&gt; []))
|| (final_state s dws).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[1.407s, &quot;1&quot;]
  (((((not (good_state s) || not (List.for_all anon_fun.steady_wind.0 dws))
      || not ((List.tl (List.tl (List.tl dws))) &lt;&gt; []))
     || not ((List.tl (List.tl dws)) &lt;&gt; []))
    || not ((List.tl dws) &lt;&gt; []))
   || not (dws &lt;&gt; []))
  || (final_state s dws).y = 0</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-a8fc51ea-623d-41fb-bcfb-23a216b3f7d1"><table><tr><td><b>into</b></td><td><pre>(((((((final_state s dws).y = 0 || not (dws &lt;&gt; []))
     || not ((List.tl dws) &lt;&gt; []))
    || not ((List.tl (List.tl dws)) &lt;&gt; []))
   || not ((List.tl (List.tl (List.tl dws))) &lt;&gt; []))
  || not (List.for_all anon_fun.steady_wind.0 (List.tl dws)))
 || not (List.hd dws = 0))
|| not (good_state s)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>List.for_all</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-56e4cb8f-6178-4e83-b4a9-a8bff460beea"><table><tr><td><b>into</b></td><td><pre>((((((((final_state s dws).y = 0 || not (good_state s))
      || not (List.hd dws = 0))
     || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws))))
    || not (List.hd (List.tl dws) = 0))
   || not ((List.tl (List.tl (List.tl dws))) &lt;&gt; []))
  || not ((List.tl (List.tl dws)) &lt;&gt; []))
 || not ((List.tl dws) &lt;&gt; []))
|| not (dws &lt;&gt; [])</pre></td></tr><tr><td><b>expansions</b></td><td><pre>List.for_all</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-13b8588a-261a-4e03-a980-c2a35ba9c681"><table><tr><td><b>into</b></td><td><pre>(((((((((final_state s dws).y = 0 || not (dws &lt;&gt; []))
       || not ((List.tl dws) &lt;&gt; []))
      || not ((List.tl (List.tl dws)) &lt;&gt; []))
     || not ((List.tl (List.tl (List.tl dws))) &lt;&gt; []))
    || not (List.hd (List.tl dws) = 0))
   || not
      (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl (List.tl dws)))))
  || not (List.hd (List.tl (List.tl dws)) = 0))
 || not (List.hd dws = 0))
|| not (good_state s)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>List.for_all</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div></li><li><pre>Elim_destructor (:cstor :: :replace dws1 :: dws2 :context [])</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-fec53f12-53fd-4413-a506-78c3229d2077"><table><tr><td><b>into</b></td><td><pre>(((((((final_state (next_state 0 s) dws2).y = 0 || not (good_state s))
     || not (List.hd (List.tl dws2) = 0))
    || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
   || not (List.hd dws2 = 0))
  || not ((List.tl (List.tl dws2)) &lt;&gt; []))
 || not ((List.tl dws2) &lt;&gt; []))
|| not (dws2 &lt;&gt; [])</pre></td></tr><tr><td><b>expansions</b></td><td><pre>final_state</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div></li><li><pre>induction on (functional final_state)
:scheme (dws2 = [] ==&gt; φ dws2 s)
        &amp;&amp; (not (dws2 = []) &amp;&amp; φ (List.tl dws2) s ==&gt; φ dws2 s)</pre></li><li><div><pre>Split (((((((((not (dws2 = []) || not (good_state s))
              || not (List.hd (List.tl dws2) = 0))
             || not
                (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
            || not (List.hd dws2 = 0))
           || not ((List.tl (List.tl dws2)) &lt;&gt; []))
          || not ((List.tl dws2) &lt;&gt; []))
         || not (dws2 &lt;&gt; []))
        || (final_state (next_state 0 s) dws2).y = 0)
       &amp;&amp; ((((((((not
                  (not (dws2 = [])
                   &amp;&amp; (((((((not (good_state s)
                             || not (List.hd (List.tl (List.tl dws2)) = 0))
                            || not
                               (List.for_all anon_fun.steady_wind.0
                                (List.tl (List.tl (List.tl dws2)))))
                           || not (List.hd (List.tl dws2) = 0))
                          || not ((List.tl (List.tl (List.tl dws2))) &lt;&gt; []))
                         || not ((List.tl (List.tl dws2)) &lt;&gt; []))
                        || not ((List.tl dws2) &lt;&gt; []))
                       || (final_state (next_state 0 s) (List.tl dws2)).y = 0))
                  || not (good_state s))
                 || not (List.hd (List.tl dws2) = 0))
                || not
                   (List.for_all anon_fun.steady_wind.0
                    (List.tl (List.tl dws2))))
               || not (List.hd dws2 = 0))
              || not ((List.tl (List.tl dws2)) &lt;&gt; []))
             || not ((List.tl dws2) &lt;&gt; []))
            || not (dws2 &lt;&gt; []))
           || (final_state (next_state 0 s) dws2).y = 0)
       :cases [(((((((not (dws2 = []) || not (good_state s))
                     || not (List.hd (List.tl dws2) = 0))
                    || not
                       (List.for_all anon_fun.steady_wind.0
                        (List.tl (List.tl dws2))))
                   || not (List.hd dws2 = 0))
                  || not ((List.tl (List.tl dws2)) &lt;&gt; []))
                 || not ((List.tl dws2) &lt;&gt; []))
                || not (dws2 &lt;&gt; []))
               || (final_state (next_state 0 s) dws2).y = 0;
               ((((((((dws2 = []
                       || not
                          (not
                           ((((((good_state s
                                 &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)
                                &amp;&amp; List.for_all anon_fun.steady_wind.0
                                   (List.tl (List.tl (List.tl dws2))))
                               &amp;&amp; List.hd (List.tl dws2) = 0)
                              &amp;&amp; (List.tl (List.tl (List.tl dws2))) &lt;&gt; [])
                             &amp;&amp; (List.tl (List.tl dws2)) &lt;&gt; [])
                            &amp;&amp; (List.tl dws2) &lt;&gt; [])
                           || (final_state (next_state 0 s) (List.tl dws2)).y
                              = 0))
                      || not (good_state s))
                     || not (List.hd (List.tl dws2) = 0))
                    || not
                       (List.for_all anon_fun.steady_wind.0
                        (List.tl (List.tl dws2))))
                   || not (List.hd dws2 = 0))
                  || not ((List.tl (List.tl dws2)) &lt;&gt; []))
                 || not ((List.tl dws2) &lt;&gt; []))
                || not (dws2 &lt;&gt; []))
               || (final_state (next_state 0 s) dws2).y = 0])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-f98c3d0a-7cb1-4e9d-b70f-d27d28468e3a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>((((((((dws2 = []
        || not
           (not
            ((((((good_state s &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)
                 &amp;&amp; List.for_all anon_fun.steady_wind.0
                    (List.tl (List.tl (List.tl dws2))))
                &amp;&amp; List.hd (List.tl dws2) = 0)
               &amp;&amp; (List.tl (List.tl (List.tl dws2))) &lt;&gt; [])
              &amp;&amp; (List.tl (List.tl dws2)) &lt;&gt; [])
             &amp;&amp; (List.tl dws2) &lt;&gt; [])
            || (final_state (next_state 0 s) (List.tl dws2)).y = 0))
       || not (good_state s))
      || not (List.hd (List.tl dws2) = 0))
     || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
    || not (List.hd dws2 = 0))
   || not ((List.tl (List.tl dws2)) &lt;&gt; []))
  || not ((List.tl dws2) &lt;&gt; []))
 || not (dws2 &lt;&gt; []))
|| (final_state (next_state 0 s) dws2).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.714s, &quot;1'''''.1&quot;]
  ((((((((dws2 = []
          || not
             (not
              ((((((good_state s &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)
                   &amp;&amp; List.for_all anon_fun.steady_wind.0
                      (List.tl (List.tl (List.tl dws2))))
                  &amp;&amp; List.hd (List.tl dws2) = 0)
                 &amp;&amp; (List.tl (List.tl (List.tl dws2))) &lt;&gt; [])
                &amp;&amp; (List.tl (List.tl dws2)) &lt;&gt; [])
               &amp;&amp; (List.tl dws2) &lt;&gt; [])
              || (final_state (next_state 0 s) (List.tl dws2)).y = 0))
         || not (good_state s))
        || not (List.hd (List.tl dws2) = 0))
       || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
      || not (List.hd dws2 = 0))
     || not ((List.tl (List.tl dws2)) &lt;&gt; []))
    || not ((List.tl dws2) &lt;&gt; []))
   || not (dws2 &lt;&gt; []))
  || (final_state (next_state 0 s) dws2).y = 0</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-d64877c6-0d54-4b59-a92c-8da7920fbe39"><table><tr><td><b>into</b></td><td><pre>((((((((((final_state (next_state 0 s) dws2).y = 0 || not (dws2 &lt;&gt; []))
        || not ((List.tl dws2) &lt;&gt; []))
       || not ((List.tl (List.tl dws2)) &lt;&gt; []))
      || not (List.hd dws2 = 0))
     || not (List.hd (List.tl dws2) = 0))
    || not (good_state s))
   || (List.tl (List.tl (List.tl dws2))) &lt;&gt; [])
  || not
     (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl (List.tl dws2)))))
 || not (List.hd (List.tl (List.tl dws2)) = 0))
&amp;&amp; (((((((((((final_state (next_state 0 s) dws2).y = 0 || not (dws2 &lt;&gt; []))
            || not ((List.tl dws2) &lt;&gt; []))
           || not ((List.tl (List.tl dws2)) &lt;&gt; []))
          || not (List.hd dws2 = 0))
         || not (List.hd (List.tl dws2) = 0))
        || not (good_state s))
       || not ((final_state (next_state 0 s) (List.tl dws2)).y = 0))
      || not ((List.tl (List.tl (List.tl dws2))) &lt;&gt; []))
     || not
        (List.for_all anon_fun.steady_wind.0
         (List.tl (List.tl (List.tl dws2)))))
    || not (List.hd (List.tl (List.tl dws2)) = 0))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[List.for_all, List.for_all, List.for_all, List.for_all]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>all_good</pre></li></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f98c3d0a-7cb1-4e9d-b70f-d27d28468e3a';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-2b95edb1-1447-4882-b3ea-7110665e47d3"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(((((((not (dws2 = []) || not (good_state s))
      || not (List.hd (List.tl dws2) = 0))
     || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
    || not (List.hd dws2 = 0))
   || not ((List.tl (List.tl dws2)) &lt;&gt; []))
  || not ((List.tl dws2) &lt;&gt; []))
 || not (dws2 &lt;&gt; []))
|| (final_state (next_state 0 s) dws2).y = 0</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.715s, &quot;1'''''.2&quot;]
  (((((((not (dws2 = []) || not (good_state s))
        || not (List.hd (List.tl dws2) = 0))
       || not (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))
      || not (List.hd dws2 = 0))
     || not ((List.tl (List.tl dws2)) &lt;&gt; []))
    || not ((List.tl dws2) &lt;&gt; []))
   || not (dws2 &lt;&gt; []))
  || (final_state (next_state 0 s) dws2).y = 0</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-24bfcc15-1b27-47f4-ad58-cff72067dde9"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2b95edb1-1447-4882-b3ea-7110665e47d3';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-061adaf1-ae36-49b7-ba1b-35929d2d9d15';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f74cc4bd-98fc-4233-ac58-8cb50d0728cd';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-2ed32c8e-e640-4ca4-b327-ef14ca7c7c97"><textarea style="display: none">digraph &quot;proof&quot; {
p_360 [label=&quot;Start (good_state :var_0:\l       &amp;&amp; List.for_all anon_fun.steady_wind.0 :var_1:\l          &amp;&amp; (if (List.tl (List.tl (List.tl :var_1:))) \&lt;\&gt; []\l                 &amp;&amp; (List.tl (List.tl :var_1:)) \&lt;\&gt; []\l                    &amp;&amp; (List.tl :var_1:) \&lt;\&gt; [] &amp;&amp; :var_1: \&lt;\&gt; []\l              then true else false)\l       ==\&gt; (final_state :var_0: :var_1:).y = 0 :name \&quot;Goal\&quot; :time 1.407s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_360 -&gt; p_358 [label=&quot;&quot;];
subgraph cluster_359 {
  color=blue;
p_358 [label=&quot;Start ((((((not (good_state s)\l            \|\| not (List.for_all anon_fun.steady_wind.0 dws))\l           \|\| not ((List.tl (List.tl (List.tl dws))) \&lt;\&gt; []))\l          \|\| not ((List.tl (List.tl dws)) \&lt;\&gt; []))\l         \|\| not ((List.tl dws) \&lt;\&gt; []))\l        \|\| not (dws \&lt;\&gt; []))\l       \|\| (final_state s dws).y = 0 :name \&quot;1\&quot; :time 1.407s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_358 -&gt; p_357 [label=&quot;&quot;];
p_357 [label=&quot;Simplify ((((((((final_state s dws).y = 0 \|\| not (dws \&lt;\&gt; []))\l               \|\| not ((List.tl dws) \&lt;\&gt; []))\l              \|\| not ((List.tl (List.tl dws)) \&lt;\&gt; []))\l             \|\| not ((List.tl (List.tl (List.tl dws))) \&lt;\&gt; []))\l            \|\| not (List.for_all anon_fun.steady_wind.0 (List.tl dws)))\l           \|\| not (List.hd dws = 0))\l          \|\| not (good_state s) :expansions [List.for_all] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_357 -&gt; p_356 [label=&quot;&quot;];
p_356 [label=&quot;Simplify (((((((((final_state s dws).y = 0 \|\| not (good_state s))\l                \|\| not (List.hd dws = 0))\l               \|\| not\l                  (List.for_all anon_fun.steady_wind.0\l                   (List.tl (List.tl dws))))\l              \|\| not (List.hd (List.tl dws) = 0))\l             \|\| not ((List.tl (List.tl (List.tl dws))) \&lt;\&gt; []))\l            \|\| not ((List.tl (List.tl dws)) \&lt;\&gt; []))\l           \|\| not ((List.tl dws) \&lt;\&gt; []))\l          \|\| not (dws \&lt;\&gt; []) :expansions [List.for_all] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_356 -&gt; p_355 [label=&quot;&quot;];
p_355 [label=&quot;Simplify ((((((((((final_state s dws).y = 0 \|\| not (dws \&lt;\&gt; []))\l                 \|\| not ((List.tl dws) \&lt;\&gt; []))\l                \|\| not ((List.tl (List.tl dws)) \&lt;\&gt; []))\l               \|\| not ((List.tl (List.tl (List.tl dws))) \&lt;\&gt; []))\l              \|\| not (List.hd (List.tl dws) = 0))\l             \|\| not\l                (List.for_all anon_fun.steady_wind.0\l                 (List.tl (List.tl (List.tl dws)))))\l            \|\| not (List.hd (List.tl (List.tl dws)) = 0))\l           \|\| not (List.hd dws = 0))\l          \|\| not (good_state s) :expansions [List.for_all] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_355 -&gt; p_354 [label=&quot;&quot;];
p_354 [label=&quot;Elim_destructor (:cstor :: :replace dws1 :: dws2 :context [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_354 -&gt; p_353 [label=&quot;&quot;];
p_353 [label=&quot;Simplify ((((((((final_state (next_state 0 s) dws2).y = 0\l                \|\| not (good_state s))\l               \|\| not (List.hd (List.tl dws2) = 0))\l              \|\| not\l                 (List.for_all anon_fun.steady_wind.0\l                  (List.tl (List.tl dws2))))\l             \|\| not (List.hd dws2 = 0))\l            \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l           \|\| not ((List.tl dws2) \&lt;\&gt; []))\l          \|\| not (dws2 \&lt;\&gt; []) :expansions [final_state] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_353 -&gt; p_352 [label=&quot;&quot;];
p_352 [label=&quot;Induct ((functional final_state),\l        :scheme (dws2 = [] ==\&gt; φ dws2 s)\l                &amp;&amp; (not (dws2 = []) &amp;&amp; φ (List.tl dws2) s ==\&gt; φ dws2 s))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_352 -&gt; p_351 [label=&quot;&quot;];
p_351 [label=&quot;Split (((((((((not (dws2 = []) \|\| not (good_state s))\l              \|\| not (List.hd (List.tl dws2) = 0))\l             \|\| not\l                (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))\l            \|\| not (List.hd dws2 = 0))\l           \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l          \|\| not ((List.tl dws2) \&lt;\&gt; []))\l         \|\| not (dws2 \&lt;\&gt; []))\l        \|\| (final_state (next_state 0 s) dws2).y = 0)\l       &amp;&amp; ((((((((not\l                  (not (dws2 = [])\l                   &amp;&amp; (((((((not (good_state s)\l                             \|\| not (List.hd (List.tl (List.tl dws2)) = 0))\l                            \|\| not\l                               (List.for_all anon_fun.steady_wind.0\l                                (List.tl (List.tl (List.tl dws2)))))\l                           \|\| not (List.hd (List.tl dws2) = 0))\l                          \|\| not ((List.tl (List.tl (List.tl dws2))) \&lt;\&gt; []))\l                         \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l                        \|\| not ((List.tl dws2) \&lt;\&gt; []))\l                       \|\| (final_state (next_state 0 s) (List.tl dws2)).y = 0))\l                  \|\| not (good_state s))\l                 \|\| not (List.hd (List.tl dws2) = 0))\l                \|\| not\l                   (List.for_all anon_fun.steady_wind.0\l                    (List.tl (List.tl dws2))))\l               \|\| not (List.hd dws2 = 0))\l              \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l             \|\| not ((List.tl dws2) \&lt;\&gt; []))\l            \|\| not (dws2 \&lt;\&gt; []))\l           \|\| (final_state (next_state 0 s) dws2).y = 0)\l       :cases [(((((((not (dws2 = []) \|\| not (good_state s))\l                     \|\| not (List.hd (List.tl dws2) = 0))\l                    \|\| not\l                       (List.for_all anon_fun.steady_wind.0\l                        (List.tl (List.tl dws2))))\l                   \|\| not (List.hd dws2 = 0))\l                  \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l                 \|\| not ((List.tl dws2) \&lt;\&gt; []))\l                \|\| not (dws2 \&lt;\&gt; []))\l               \|\| (final_state (next_state 0 s) dws2).y = 0;\l               ((((((((dws2 = []\l                       \|\| not\l                          (not\l                           ((((((good_state s\l                                 &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)\l                                &amp;&amp; List.for_all anon_fun.steady_wind.0\l                                   (List.tl (List.tl (List.tl dws2))))\l                               &amp;&amp; List.hd (List.tl dws2) = 0)\l                              &amp;&amp; (List.tl (List.tl (List.tl dws2))) \&lt;\&gt; [])\l                             &amp;&amp; (List.tl (List.tl dws2)) \&lt;\&gt; [])\l                            &amp;&amp; (List.tl dws2) \&lt;\&gt; [])\l                           \|\| (final_state (next_state 0 s) (List.tl dws2)).y\l                              = 0))\l                      \|\| not (good_state s))\l                     \|\| not (List.hd (List.tl dws2) = 0))\l                    \|\| not\l                       (List.for_all anon_fun.steady_wind.0\l                        (List.tl (List.tl dws2))))\l                   \|\| not (List.hd dws2 = 0))\l                  \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l                 \|\| not ((List.tl dws2) \&lt;\&gt; []))\l                \|\| not (dws2 \&lt;\&gt; []))\l               \|\| (final_state (next_state 0 s) dws2).y = 0])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_351 -&gt; p_346 [label=&quot;&quot;];
subgraph cluster_347 {
  color=blue;
p_346 [label=&quot;Start (((((((((dws2 = []\l               \|\| not\l                  (not\l                   ((((((good_state s &amp;&amp; List.hd (List.tl (List.tl dws2)) = 0)\l                        &amp;&amp; List.for_all anon_fun.steady_wind.0\l                           (List.tl (List.tl (List.tl dws2))))\l                       &amp;&amp; List.hd (List.tl dws2) = 0)\l                      &amp;&amp; (List.tl (List.tl (List.tl dws2))) \&lt;\&gt; [])\l                     &amp;&amp; (List.tl (List.tl dws2)) \&lt;\&gt; [])\l                    &amp;&amp; (List.tl dws2) \&lt;\&gt; [])\l                   \|\| (final_state (next_state 0 s) (List.tl dws2)).y = 0))\l              \|\| not (good_state s))\l             \|\| not (List.hd (List.tl dws2) = 0))\l            \|\| not\l               (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))\l           \|\| not (List.hd dws2 = 0))\l          \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l         \|\| not ((List.tl dws2) \&lt;\&gt; []))\l        \|\| not (dws2 \&lt;\&gt; []))\l       \|\| (final_state (next_state 0 s) dws2).y = 0 :name \&quot;1'''''.1\&quot;\l       :time 0.714s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_346 -&gt; p_345 [label=&quot;&quot;];
p_345 [label=&quot;Simplify (((((((((((final_state (next_state 0 s) dws2).y = 0\l                   \|\| not (dws2 \&lt;\&gt; []))\l                  \|\| not ((List.tl dws2) \&lt;\&gt; []))\l                 \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l                \|\| not (List.hd dws2 = 0))\l               \|\| not (List.hd (List.tl dws2) = 0))\l              \|\| not (good_state s))\l             \|\| (List.tl (List.tl (List.tl dws2))) \&lt;\&gt; [])\l            \|\| not\l               (List.for_all anon_fun.steady_wind.0\l                (List.tl (List.tl (List.tl dws2)))))\l           \|\| not (List.hd (List.tl (List.tl dws2)) = 0))\l          &amp;&amp; (((((((((((final_state (next_state 0 s) dws2).y = 0\l                       \|\| not (dws2 \&lt;\&gt; []))\l                      \|\| not ((List.tl dws2) \&lt;\&gt; []))\l                     \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l                    \|\| not (List.hd dws2 = 0))\l                   \|\| not (List.hd (List.tl dws2) = 0))\l                  \|\| not (good_state s))\l                 \|\| not ((final_state (next_state 0 s) (List.tl dws2)).y = 0))\l                \|\| not ((List.tl (List.tl (List.tl dws2))) \&lt;\&gt; []))\l               \|\| not\l                  (List.for_all anon_fun.steady_wind.0\l                   (List.tl (List.tl (List.tl dws2)))))\l              \|\| not (List.hd (List.tl (List.tl dws2)) = 0))\l          :expansions [List.for_all; List.for_all; List.for_all; List.for_all]\l          :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_345 -&gt; p_339 [label=&quot;&quot;];
subgraph cluster_340 {
  color=blue;
p_339 [label=&quot;Start (((((((((((final_state (next_state 0 s) dws2).y = 0 \|\| not (dws2 \&lt;\&gt; []))\l               \|\| not ((List.tl dws2) \&lt;\&gt; []))\l              \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l             \|\| not (List.hd dws2 = 0))\l            \|\| not (List.hd (List.tl dws2) = 0))\l           \|\| not (good_state s))\l          \|\| not ((final_state (next_state 0 s) (List.tl dws2)).y = 0))\l         \|\| not ((List.tl (List.tl (List.tl dws2))) \&lt;\&gt; []))\l        \|\| not\l           (List.for_all anon_fun.steady_wind.0\l            (List.tl (List.tl (List.tl dws2)))))\l       \|\| not (List.hd (List.tl (List.tl dws2)) = 0) :name \&quot;1'''''.1.1\&quot;\l       :time 0.414s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_339 -&gt; p_337 [label=&quot;&quot;];
subgraph cluster_338 {
  color=blue;
p_337 [label=&quot;Start ((((((((((not (:var_0: \&lt;\&gt; []) \|\| not ((List.tl :var_0:) \&lt;\&gt; []))\l               \|\| not ((List.tl (List.tl :var_0:)) \&lt;\&gt; []))\l              \|\| not (List.hd :var_0: = 0))\l             \|\| not (List.hd (List.tl :var_0:) = 0))\l            \|\| not\l               (if 1 = :var_1:.w + :var_1:.v &amp;&amp; -3 = :var_1:.y then true\l                else\l                if 1 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y then true\l                else\l                if 2 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y then true\l                else\l                if 2 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y then true\l                else …))\l           \|\| not\l              ((final_state\l                \{w = :var_1:.w + 0;\l                 y = ((:var_1:.y + :var_1:.v) + :var_1:.w) + 0;\l                 v =\l                 :var_1:.v\l                 + -3\l                   * (if (((:var_1:.y + :var_1:.v) + :var_1:.w) + 0) \&lt; 0\l                      then -1 else …)\l                   + 2 * (if :var_1:.y \&lt; 0 then -1 else …)\}\l                (List.tl :var_0:)).y\l               = 0))\l          \|\| not ((List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; []))\l         \|\| not\l            (List.for_all anon_fun.steady_wind.0\l             (List.tl (List.tl (List.tl :var_0:)))))\l        \|\| not (List.hd (List.tl (List.tl :var_0:)) = 0))\l       \|\| (final_state\l           \{w = :var_1:.w + 0; y = ((:var_1:.y + :var_1:.v) + :var_1:.w) + 0;\l            v =\l            :var_1:.v\l            + -3\l              * (if (((:var_1:.y + :var_1:.v) + :var_1:.w) + 0) \&lt; 0 then -1\l                 else …)\l              + 2 * (if :var_1:.y \&lt; 0 then -1 else …)\}\l           :var_0:).y\l          = 0\l       :time 0.055s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_337 -&gt; p_336 [label=&quot;&quot;];
p_336 [label=&quot;Simplify ((((((((((not (:var_0: \&lt;\&gt; []) \|\| not ((List.tl :var_0:) \&lt;\&gt; []))\l                  \|\| not ((List.tl (List.tl :var_0:)) \&lt;\&gt; []))\l                 \|\| not (List.hd :var_0: = 0))\l                \|\| not (List.hd (List.tl :var_0:) = 0))\l               \|\| not\l                  ((((((((((((1 = :var_1:.w + :var_1:.v &amp;&amp; -3 = :var_1:.y\l                              \|\| 1 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y)\l                             \|\| 2 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y)\l                            \|\| 2 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y)\l                           \|\| 3 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y)\l                          \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                         \|\| 0 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                        \|\| 1 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                       \|\| -2 = :var_1:.w + :var_1:.v &amp;&amp; 1 = :var_1:.y)\l                      \|\| -3 = :var_1:.w + :var_1:.v &amp;&amp; 1 = :var_1:.y)\l                     \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 2 = :var_1:.y)\l                    \|\| -2 = :var_1:.w + :var_1:.v &amp;&amp; 2 = :var_1:.y)\l                   \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 3 = :var_1:.y))\l              \|\| not\l                 ((final_state\l                   \{w = :var_1:.w; y = (:var_1:.y + :var_1:.v) + :var_1:.w;\l                    v =\l                    (:var_1:.v\l                     + -3\l                       * (if 0 \&lt;= ((:var_1:.y + :var_1:.v) + :var_1:.w)\l                          then … else -1))\l                    + 2 * (if 0 \&lt;= :var_1:.y then … else -1)\}\l                   (List.tl :var_0:)).y\l                  = 0))\l             \|\| not ((List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; []))\l            \|\| not\l               (List.for_all anon_fun.steady_wind.0\l                (List.tl (List.tl (List.tl :var_0:)))))\l           \|\| not (List.hd (List.tl (List.tl :var_0:)) = 0))\l          \|\| (final_state\l              \{w = :var_1:.w; y = (:var_1:.y + :var_1:.v) + :var_1:.w;\l               v =\l               (:var_1:.v\l                + -3\l                  * (if 0 \&lt;= ((:var_1:.y + :var_1:.v) + :var_1:.w) then …\l                     else -1))\l               + 2 * (if 0 \&lt;= :var_1:.y then … else -1)\}\l              :var_0:).y\l             = 0\l          :expansions [sgn; sgn; controller; next_state; good_state] \l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_336 -&gt; p_335 [label=&quot;&quot;];
p_335 [label=&quot;Unroll ([final_state\l         \{w = s.w; y = (s.y + s.v) + s.w;\l          v =\l          (s.v\l           + -3\l             * (if 0 \&lt;= ((s.y + s.v) + s.w)\l                then if (s.y + s.v) + s.w = 0 then 0 else 1 else -1))\l          + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\}\l         dws2],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_335 -&gt; p_334 [label=&quot;&quot;];
p_334 [label=&quot;Unroll ([List.for_all anon_fun.steady_wind.0\l         (List.tl (List.tl (List.tl dws2)))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_334 -&gt; p_333 [label=&quot;&quot;];
p_333 [label=&quot;Unroll ([final_state\l         \{w = s.w; y = (s.y + s.v) + s.w;\l          v =\l          (s.v\l           + -3\l             * (if 0 \&lt;= ((s.y + s.v) + s.w)\l                then if (s.y + s.v) + s.w = 0 then 0 else 1 else -1))\l          + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\}\l         (List.tl dws2)],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_333 -&gt; p_332 [label=&quot;&quot;];
p_332 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd dws2; y = ((… + …) + …) + List.hd dws2;\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;= (((… + …) + …) + List.hd dws2)\l                then if ((… + …) + …) + List.hd dws2 = 0 then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl dws2)],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_332 -&gt; p_331 [label=&quot;&quot;];
p_331 [label=&quot;Unroll ([List.for_all anon_fun.steady_wind.0\l         (List.tl (List.tl (List.tl (List.tl dws2))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_331 -&gt; p_330 [label=&quot;&quot;];
p_330 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl dws2);\l          y = ((… + …) + …) + List.hd (List.tl dws2);\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws2))\l                then\l                  if ((… + …) + …) + List.hd (List.tl dws2) = 0 \l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl dws2))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_330 -&gt; p_329 [label=&quot;&quot;];
p_329 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl dws2);\l          y = ((… + …) + …) + List.hd (List.tl dws2);\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws2))\l                then\l                  if ((… + …) + …) + List.hd (List.tl dws2) = 0 \l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl dws2))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_329 -&gt; p_328 [label=&quot;&quot;];
p_328 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl (List.tl dws2));\l          y = ((… + …) + …) + List.hd (List.tl (List.tl dws2));\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;=\l                   (((… + …) + …) + List.hd (List.tl (List.tl dws2)))\l                then\l                  if ((… + …) + …) + List.hd (List.tl (List.tl dws2)) =\l                     0\l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl (List.tl dws2)))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_328 -&gt; p_327 [label=&quot;&quot;];
p_327 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl (List.tl dws2));\l          y = ((… + …) + …) + List.hd (List.tl (List.tl dws2));\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;=\l                   (((… + …) + …) + List.hd (List.tl (List.tl dws2)))\l                then\l                  if ((… + …) + …) + List.hd (List.tl (List.tl dws2)) =\l                     0\l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl (List.tl dws2)))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_327 -&gt; p_326 [label=&quot;&quot;];
p_326 -&gt; p_z3_21075 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_21075 [label=&quot;(let ((a!1 (ite (= (+ (w_2244 s_2474) (v_2246 s_2474) (y_2245 s_2474)) 0) 0 1))
      (a!3 (ite (&gt;= …&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_326 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
p_345 -&gt; p_343 [label=&quot;&quot;];
subgraph cluster_344 {
  color=blue;
p_343 [label=&quot;Start ((((((((((final_state (next_state 0 s) dws2).y = 0 \|\| not (dws2 \&lt;\&gt; []))\l              \|\| not ((List.tl dws2) \&lt;\&gt; []))\l             \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l            \|\| not (List.hd dws2 = 0))\l           \|\| not (List.hd (List.tl dws2) = 0))\l          \|\| not (good_state s))\l         \|\| (List.tl (List.tl (List.tl dws2))) \&lt;\&gt; [])\l        \|\| not\l           (List.for_all anon_fun.steady_wind.0\l            (List.tl (List.tl (List.tl dws2)))))\l       \|\| not (List.hd (List.tl (List.tl dws2)) = 0) :name \&quot;1'''''.1.2\&quot;\l       :time 0.414s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_343 -&gt; p_342 [label=&quot;&quot;];
p_342 [label=&quot;Simplify (((((((((List.tl (List.tl (List.tl dws2))) \&lt;\&gt; []\l                 \|\| (final_state (next_state 0 s) dws2).y = 0)\l                \|\| not (List.hd (List.tl (List.tl dws2)) = 0))\l               \|\| not (good_state s))\l              \|\| not (List.hd (List.tl dws2) = 0))\l             \|\| not (List.hd dws2 = 0))\l            \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l           \|\| not ((List.tl dws2) \&lt;\&gt; []))\l          \|\| not (dws2 \&lt;\&gt; []) :expansions [List.for_all] :rw []\l          :fc [all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good;\l               all_good])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_342 -&gt; p_325 [label=&quot;&quot;];
subgraph cluster_341 {
  color=blue;
p_325 [label=&quot;Start ((((((((not (List.hd (List.tl (List.tl :var_0:)) = 0)\l              \|\| not\l                 (if 1 = :var_1:.w + :var_1:.v &amp;&amp; -3 = :var_1:.y then true\l                  else\l                  if 1 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y then true\l                  else\l                  if 2 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y then true\l                  else\l                  if 2 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y then true\l                  else …))\l             \|\| not (List.hd (List.tl :var_0:) = 0))\l            \|\| not (List.hd :var_0: = 0))\l           \|\| not ((List.tl (List.tl :var_0:)) \&lt;\&gt; []))\l          \|\| not ((List.tl :var_0:) \&lt;\&gt; []))\l         \|\| not (:var_0: \&lt;\&gt; []))\l        \|\| (List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; [])\l       \|\| (final_state\l           \{w = :var_1:.w + 0; y = ((:var_1:.y + :var_1:.v) + :var_1:.w) + 0;\l            v =\l            :var_1:.v\l            + -3\l              * (if (((:var_1:.y + :var_1:.v) + :var_1:.w) + 0) \&lt; 0 then -1\l                 else …)\l              + 2 * (if :var_1:.y \&lt; 0 then -1 else …)\}\l           :var_0:).y\l          = 0\l       :time 0.032s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_325 -&gt; p_324 [label=&quot;&quot;];
p_324 [label=&quot;Simplify ((((((((not (List.hd (List.tl (List.tl :var_0:)) = 0)\l                 \|\| not\l                    ((((((((((((1 = :var_1:.w + :var_1:.v &amp;&amp; -3 = :var_1:.y\l                                \|\| 1 = :var_1:.w + :var_1:.v\l                                   &amp;&amp; -2 = :var_1:.y)\l                               \|\| 2 = :var_1:.w + :var_1:.v &amp;&amp; -2 = :var_1:.y)\l                              \|\| 2 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y)\l                             \|\| 3 = :var_1:.w + :var_1:.v &amp;&amp; -1 = :var_1:.y)\l                            \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                           \|\| 0 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                          \|\| 1 = :var_1:.w + :var_1:.v &amp;&amp; 0 = :var_1:.y)\l                         \|\| -2 = :var_1:.w + :var_1:.v &amp;&amp; 1 = :var_1:.y)\l                        \|\| -3 = :var_1:.w + :var_1:.v &amp;&amp; 1 = :var_1:.y)\l                       \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 2 = :var_1:.y)\l                      \|\| -2 = :var_1:.w + :var_1:.v &amp;&amp; 2 = :var_1:.y)\l                     \|\| -1 = :var_1:.w + :var_1:.v &amp;&amp; 3 = :var_1:.y))\l                \|\| not (List.hd (List.tl :var_0:) = 0))\l               \|\| not (List.hd :var_0: = 0))\l              \|\| not ((List.tl (List.tl :var_0:)) \&lt;\&gt; []))\l             \|\| not ((List.tl :var_0:) \&lt;\&gt; []))\l            \|\| not (:var_0: \&lt;\&gt; []))\l           \|\| (List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; [])\l          \|\| (final_state\l              \{w = :var_1:.w; y = (:var_1:.y + :var_1:.v) + :var_1:.w;\l               v =\l               (:var_1:.v\l                + -3\l                  * (if 0 \&lt;= ((:var_1:.y + :var_1:.v) + :var_1:.w) then …\l                     else -1))\l               + 2 * (if 0 \&lt;= :var_1:.y then … else -1)\}\l              :var_0:).y\l             = 0\l          :expansions [sgn; sgn; controller; next_state; good_state] \l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_324 -&gt; p_323 [label=&quot;&quot;];
p_323 [label=&quot;Unroll ([final_state\l         \{w = s.w; y = (s.y + s.v) + s.w;\l          v =\l          (s.v\l           + -3\l             * (if 0 \&lt;= ((s.y + s.v) + s.w)\l                then if (s.y + s.v) + s.w = 0 then 0 else 1 else -1))\l          + 2 * (if 0 \&lt;= s.y then if s.y = 0 then 0 else 1 else -1)\}\l         dws2],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_323 -&gt; p_322 [label=&quot;&quot;];
p_322 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd dws2; y = ((… + …) + …) + List.hd dws2;\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;= (((… + …) + …) + List.hd dws2)\l                then if ((… + …) + …) + List.hd dws2 = 0 then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl dws2)],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_322 -&gt; p_321 [label=&quot;&quot;];
p_321 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl dws2);\l          y = ((… + …) + …) + List.hd (List.tl dws2);\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws2))\l                then\l                  if ((… + …) + …) + List.hd (List.tl dws2) = 0 \l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl dws2))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_321 -&gt; p_320 [label=&quot;&quot;];
p_320 [label=&quot;Unroll ([final_state\l         \{w = … + List.hd (List.tl (List.tl dws2));\l          y = ((… + …) + …) + List.hd (List.tl (List.tl dws2));\l          v =\l          (…\l           + -3\l             * (if 0 \&lt;=\l                   (((… + …) + …) + List.hd (List.tl (List.tl dws2)))\l                then\l                  if ((… + …) + …) + List.hd (List.tl (List.tl dws2)) =\l                     0\l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl (List.tl dws2)))],\l        [[controller; sgn; next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_320 -&gt; p_319 [label=&quot;&quot;];
p_319 -&gt; p_z3_16044 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_16044 [label=&quot;(let ((a!1 (ite (= (+ (w_2244 s_2469) (v_2246 s_2469) (y_2245 s_2469)) 0) 0 1))
      (a!4 (not (&gt;= …&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_319 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
p_351 -&gt; p_349 [label=&quot;&quot;];
subgraph cluster_350 {
  color=blue;
p_349 [label=&quot;Start ((((((((not (dws2 = []) \|\| not (good_state s))\l             \|\| not (List.hd (List.tl dws2) = 0))\l            \|\| not\l               (List.for_all anon_fun.steady_wind.0 (List.tl (List.tl dws2))))\l           \|\| not (List.hd dws2 = 0))\l          \|\| not ((List.tl (List.tl dws2)) \&lt;\&gt; []))\l         \|\| not ((List.tl dws2) \&lt;\&gt; []))\l        \|\| not (dws2 \&lt;\&gt; []))\l       \|\| (final_state (next_state 0 s) dws2).y = 0 :name \&quot;1'''''.2\&quot;\l       :time 0.715s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_349 -&gt; p_348 [label=&quot;&quot;];
p_348 [label=&quot;Simplify (true :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-2ed32c8e-e640-4ca4-b327-ef14ca7c7c97';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-b4ceecb2-5e3c-4537-b1ab-89c4137fe9ef';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2f51610e-2fed-4af2-a476-d550d0b9d12c';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-3b9197de-3b74-41b4-a897-e637adff143e';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You may enjoy reading the above proof! Now, we prove the final part of our main safety theorem.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-24" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">enable</span> <span class="n">good_state</span><span class="o">;;</span>

<span class="n">theorem</span> <span class="n">good_state_find_and_stay_0_from_origin</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">steady_wind</span> <span class="n">dws</span>
 <span class="o">&amp;&amp;</span> <span class="n">at_least_4</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">[@@</span><span class="n">simp</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val good_state_find_and_stay_0_from_origin : Z.t list -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-proved"><i class="fa fa-check-circle"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-d5e40d8c-d18b-4fb5-947a-ada1183a90c1"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-3fd395f5-4ba4-4753-a096-26c16fd65f16"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-7f70c13f-bc1a-409a-b77c-cb17a583a54e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-79d2d12f-6037-4171-a4e2-846c1b0eb211"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.115s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-c023cd25-394b-419d-ae4f-3532df5614c9"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-73717c74-0ebd-4a6d-98d1-b3620038673a"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-f0231feb-71fb-4666-b00d-d6426566194c"><table><tr><td><b>rlimit count</b></td><td>13608</td></tr><tr><td><b>mk bool var</b></td><td>5</td></tr><tr><td><b>memory</b></td><td>51.500000</td></tr><tr><td><b>max memory</b></td><td>51.680000</td></tr><tr><td><b>num allocs</b></td><td>23782467325.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c023cd25-394b-419d-ae4f-3532df5614c9';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-9e85e772-e486-44c6-8da8-6331ab41ea8e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.115s]
  List.for_all anon_fun.steady_wind.0 :var_0:
  &amp;&amp; (if (List.tl (List.tl (List.tl :var_0:))) &lt;&gt; []
         &amp;&amp; (List.tl (List.tl :var_0:)) &lt;&gt; []
            &amp;&amp; (List.tl :var_0:) &lt;&gt; [] &amp;&amp; :var_0: &lt;&gt; []
      then true else false)
  ==&gt; (final_state {w = 0; y = 0; v = 0} :var_0:).y = 0</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-e4047cfa-c9fb-4951-a40a-948d75f978c0"><table><tr><td><b>into</b></td><td><pre>not
((((List.for_all anon_fun.steady_wind.0 :var_0:
    &amp;&amp; (List.tl (List.tl (List.tl :var_0:))) &lt;&gt; [])
   &amp;&amp; (List.tl (List.tl :var_0:)) &lt;&gt; [])
  &amp;&amp; (List.tl :var_0:) &lt;&gt; [])
 &amp;&amp; :var_0: &lt;&gt; [])
|| (final_state {w = 0; y = 0; v = 0} :var_0:).y = 0</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-a5a15c77-09b4-4059-82d4-344304aefc81"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>all_good</pre></li><li><pre>all_good</pre></li><li><pre>good_state_find_and_stay_zt_zero</pre></li><li><pre>good_state_find_and_stay_zt_zero</pre></li></ul></td></tr></table></div></div></li><li><div><h4>unsat</h4><pre>(mp (asserted (not true)) (rewrite (= (not true) false)) false)</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-9e85e772-e486-44c6-8da8-6331ab41ea8e';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-f278941d-4a49-4672-a85e-b4cf576294a6"><textarea style="display: none">digraph &quot;proof&quot; {
p_364 [label=&quot;Start (List.for_all anon_fun.steady_wind.0 :var_0:\l       &amp;&amp; (if (List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; []\l              &amp;&amp; (List.tl (List.tl :var_0:)) \&lt;\&gt; []\l                 &amp;&amp; (List.tl :var_0:) \&lt;\&gt; [] &amp;&amp; :var_0: \&lt;\&gt; []\l           then true else false)\l       ==\&gt; (final_state \{w = 0; y = 0; v = 0\} :var_0:).y = 0 :time 0.115s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_364 -&gt; p_363 [label=&quot;&quot;];
p_363 [label=&quot;Simplify (not\l          ((((List.for_all anon_fun.steady_wind.0 :var_0:\l              &amp;&amp; (List.tl (List.tl (List.tl :var_0:))) \&lt;\&gt; [])\l             &amp;&amp; (List.tl (List.tl :var_0:)) \&lt;\&gt; [])\l            &amp;&amp; (List.tl :var_0:) \&lt;\&gt; [])\l           &amp;&amp; :var_0: \&lt;\&gt; [])\l          \|\| (final_state \{w = 0; y = 0; v = 0\} :var_0:).y = 0 :expansions []\l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_363 -&gt; p_362 [label=&quot;&quot;];
p_362 [label=&quot;Simplify (true :expansions [] :rw []\l          :fc [all_good;\l               all_good;\l               good_state_find_and_stay_zt_zero;\l               good_state_find_and_stay_zt_zero])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_362 -&gt; p_361 [label=&quot;&quot;];
p_361 -&gt; p_z3_824 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_824 [label=&quot;(mp (asserted (not true)) (rewrite (= (not true) false)) false)&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_361 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-f278941d-4a49-4672-a85e-b4cf576294a6';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-7f70c13f-bc1a-409a-b77c-cb17a583a54e';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3fd395f5-4ba4-4753-a096-26c16fd65f16';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-2e73b995-71bd-435d-bcc8-38c00c7b4702"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not true&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-2e73b995-71bd-435d-bcc8-38c00c7b4702';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-d5e40d8c-d18b-4fb5-947a-ada1183a90c1';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Experiments-with-a-flawed-version">Experiments with a flawed version<a class="anchor-link" href="#Experiments-with-a-flawed-version">&#182;</a></h1><p>Now that we've verified the controller, let us imagine instead that we'd made a mistake in its design and use Imandra to find such a mistake. For example, what if we'd defined the controller as follows?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-26" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_controller</span> <span class="n">sgn_y</span> <span class="n">sgn_old_y</span> <span class="o">=</span>
  <span class="o">(-</span><span class="mi">4</span> <span class="o">*</span> <span class="n">sgn_y</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sgn_old_y</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_controller : Z.t -&gt; Z.t -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-27" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="o">=</span>
  <span class="o">{</span> <span class="n">w</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">;</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span>
        <span class="n">bad_controller</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">dw</span><span class="o">))</span>
          <span class="o">(</span><span class="n">sgn</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_next_state : Z.t -&gt; state -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-28" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">bad_final_state</span> <span class="n">s</span> <span class="n">dws</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">dws</span> <span class="k">with</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="o">|</span> <span class="n">dw</span> <span class="o">::</span> <span class="n">dws&#39;</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">bad_next_state</span> <span class="n">dw</span> <span class="n">s</span> <span class="k">in</span>
    <span class="n">bad_final_state</span> <span class="n">s&#39;</span> <span class="n">dws&#39;</span>
<span class="o">[@@</span><span class="n">adm</span> <span class="n">dws</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_final_state : state -&gt; Z.t list -&gt; state = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-6ea12149-4a13-4cb2-b481-559ec294100c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-43989e82-0aad-43c0-9557-a51ee619ca30"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `bad_final_state (bad_next_state (List.hd dws) s) (List.tl dws)` from `bad_final_state s dws`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-d9d79e52-b564-48ec-a0f7-db8b1f9d0fd0"><table><tr><td><b>original</b></td><td>bad_final_state s dws</td></tr><tr><td><b>sub</b></td><td>bad_final_state (bad_next_state (List.hd dws) s) (List.tl dws)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count dws)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl dws))</td></tr><tr><td><b>path</b></td><td>[not (dws = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-7ae655d6-eb1b-4cc4-bee8-a4f841ee342c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-acd9a80e-a06e-4495-a53e-70bef867cf77"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-7b95c1cb-e6ca-4fa1-a312-4e06476068f1"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.021s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-f02ef952-0eb2-4195-9842-10500aaf187e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-0f13869c-278e-4241-842f-31b837ac6841"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-7106398b-43de-405e-842a-988cf9373b36"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>19</td></tr><tr><td><b>arith pivots</b></td><td>11</td></tr><tr><td><b>rlimit count</b></td><td>15882</td></tr><tr><td><b>mk clause</b></td><td>19</td></tr><tr><td><b>datatype occurs check</b></td><td>43</td></tr><tr><td><b>mk bool var</b></td><td>83</td></tr><tr><td><b>arith assert upper</b></td><td>12</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>13</td></tr><tr><td><b>arith add rows</b></td><td>17</td></tr><tr><td><b>arith bound prop</b></td><td>1</td></tr><tr><td><b>propagations</b></td><td>13</td></tr><tr><td><b>conflicts</b></td><td>9</td></tr><tr><td><b>arith fixed eqs</b></td><td>8</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>49</td></tr><tr><td><b>del clause</b></td><td>7</td></tr><tr><td><b>arith eq adapter</b></td><td>11</td></tr><tr><td><b>memory</b></td><td>51.400000</td></tr><tr><td><b>max memory</b></td><td>51.680000</td></tr><tr><td><b>num allocs</b></td><td>24000076548.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f02ef952-0eb2-4195-9842-10500aaf187e';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-8ac94811-0f37-42a7-a8dd-aedfa33c5254"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.021s]
  not (dws = [])
  &amp;&amp; Ordinal.count dws &gt;= 0 &amp;&amp; Ordinal.count (List.tl dws) &gt;= 0
  ==&gt; List.tl dws = []
      || Ordinal.Int (Ordinal.count (List.tl dws)) Ordinal.&lt;&lt;
         Ordinal.Int (Ordinal.count dws)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-a88f103c-2549-4e9b-b235-4a65b99dea42"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (dws = []) &amp;&amp; Ordinal.count dws &gt;= 0)
  &amp;&amp; Ordinal.count (List.tl dws) &gt;= 0)
 || List.tl dws = [])
|| Ordinal.Int (Ordinal.count (List.tl dws)) Ordinal.&lt;&lt;
   Ordinal.Int (Ordinal.count dws)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3e858164-c05f-437c-8d5c-cf79de06ad81"><table><tr><td><b>expr</b></td><td><pre>(|\|Ordinal.&lt;&lt;_132\||
  (|\|Ordinal.Int_123\||
    (|\|count_`int list`_2578\|| (|\|get.::.1_2529\||…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-d6ffff66-637c-4454-8c48-2fd23644a840"><table><tr><td><b>expr</b></td><td><pre>(|\|count_`int list`_2578\|| (|\|get.::.1_2529\|| dws_2568))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9ed75766-5d99-4c44-86a9-e3c4f1c5c343"><table><tr><td><b>expr</b></td><td><pre>(|\|count_`int list`_2578\|| dws_2568)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (&gt;= (ite (&gt;= (|\|get.::.0_2528\|| dws_2568) 0)
                    (|\|get.::.0_2528\|| d…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-8ac94811-0f37-42a7-a8dd-aedfa33c5254';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-acd9a80e-a06e-4495-a53e-70bef867cf77';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-7ae655d6-eb1b-4cc4-bee8-a4f841ee342c';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-43989e82-0aad-43c0-9557-a51ee619ca30';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6ea12149-4a13-4cb2-b481-559ec294100c';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, let's try one of our main safety theorems:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-30" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">vehicle_stays_within_3_units_of_course</span> <span class="n">dws</span> <span class="o">=</span>
 <span class="n">arbitrary_delta_ws</span> <span class="n">dws</span>
 <span class="o">==&gt;</span>
 <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">bad_final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="n">dws</span> <span class="k">in</span>
 <span class="o">-</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">s&#39;</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">3</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val vehicle_stays_within_3_units_of_course : Z.t list -&gt; bool = &lt;fun&gt;
module CX : sig val dws : Z.t list end
<span class="ansi-red-intense-fg ansi-bold">Error</span>: vehicle_stays_within_3_units_of_course is not a theorem.
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Counterexample (after 8 steps, 0.040s):
 let dws = [1; 1; 1]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-vr imandra-vr-refuted"><i class="fa fa-times-circle-o"></i><span>Refuted</span></div><div><div class="imandra-alternatives" id="alt-db42a3cf-7ed7-4028-9998-7f28c0ea1cea"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof-attempt</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-385591b4-43fe-4a74-90fa-914f4660b2c1"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not\l(not (List.for_all anon_fun.arbitrary_delta_ws.0 dws)\l \|\| -3 \&lt;= (bad_final_state \{w = 0; y = 0; v = 0\} dws).y\l    &amp;&amp; (bad_final_state \{w = 0; y = 0; v = 0\} dws).y \&lt;= 3)&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_20 [label=&quot;List.for_all anon_fun.arbitrary_delta_ws.0 dws&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_20 -&gt; expr_389 [label=&quot;=&quot;];
expr_389 [label=&quot;dws = []\l\|\| ((List.hd dws = -1 \|\| List.hd dws = 0) \|\| List.hd dws = 1)\l   &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_20 [label=&quot;calls&quot;];
call_701 [label=&quot;List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl (List.tl dws))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_701 -&gt; expr_1113 [label=&quot;=&quot;];
expr_1113 [label=&quot;List.tl (List.tl dws) = []\l\|\| ((List.hd (List.tl (List.tl dws)) = -1\l     \|\| List.hd (List.tl (List.tl dws)) = 0)\l    \|\| List.hd (List.tl (List.tl dws)) = 1)\l   &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0\l      (List.tl (List.tl (List.tl dws)))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_703 -&gt; call_701 [label=&quot;calls&quot;];
call_197 [label=&quot;bad_final_state\l\{w = 0 + List.hd dws; y = ((0 + 0) + 0) + List.hd dws;\l v =\l (0\l  + -4\l    * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l       then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1 else -1))\l + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1)\}\l(List.tl dws)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_197 -&gt; expr_512 [label=&quot;=&quot;];
expr_512 [label=&quot;if List.tl dws = []\lthen\l  \{w = 0 + List.hd dws; y = ((0 + 0) + 0) + List.hd dws;\l   v =\l   (0\l    + -4\l      * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l         then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1 else -1))\l   + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1)\}\lelse\l  bad_final_state\l  \{w = (0 + List.hd dws) + List.hd (List.tl dws);\l   y =\l   (((((0 + 0) + 0) + List.hd dws)\l     + (0\l        + -4\l          * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l             then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1 else -1))\l       + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1))\l    + 0 + List.hd dws)\l   + List.hd (List.tl dws);\l   v =\l   (((0\l      + -4\l        * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l           then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1 else -1))\l     + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1))\l    + -4\l      * (if 0 \&lt;=\l            ((((((0 + 0) + 0) + List.hd dws)\l               + (0\l                  + -4\l                    * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l                       then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1\l                       else -1))\l                 + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1))\l              + 0 + List.hd dws)\l             + List.hd (List.tl dws))\l         then … else -1))\l   + 2 * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws) then … else -1)\}\l  (List.tl (List.tl dws))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_198 -&gt; call_197 [label=&quot;calls&quot;];
call_22 [label=&quot;bad_final_state \{w = 0; y = 0; v = 0\} dws&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_22 -&gt; expr_198 [label=&quot;=&quot;];
expr_198 [label=&quot;if dws = [] then \{w = 0; y = 0; v = 0\}\lelse\l  bad_final_state\l  \{w = 0 + List.hd dws; y = ((0 + 0) + 0) + List.hd dws;\l   v =\l   (0 + -4 * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws) then … else -1))\l   + 2 * (if 0 \&lt;= 0 then … else -1)\}\l  (List.tl dws)&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_22 [label=&quot;calls&quot;];
call_899 [label=&quot;bad_final_state\l\{w = … + List.hd (List.tl (List.tl dws));\l y = ((… + …) + …) + List.hd (List.tl (List.tl dws));\l v =\l (…\l  + -4\l    * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l       then\l         if ((… + …) + …) + List.hd (List.tl (List.tl dws)) = 0 \l         then 0 else 1\l       else -1))\l + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l(List.tl (List.tl (List.tl dws)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_899 -&gt; expr_1534 [label=&quot;=&quot;];
expr_1534 [label=&quot;if List.tl (List.tl (List.tl dws)) = []\lthen\l  \{w = … + List.hd (List.tl (List.tl dws));\l   y = ((… + …) + …) + List.hd (List.tl (List.tl dws));\l   v =\l   (…\l    + -4\l      * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l         then\l           if ((… + …) + …) + List.hd (List.tl (List.tl dws)) = 0\l           then 0 else 1\l         else -1))\l   + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\lelse\l  bad_final_state\l  \{w =\l   (… + List.hd (List.tl (List.tl dws)))\l   + List.hd (List.tl (List.tl (List.tl dws)));\l   y =\l   (((((… + …) + …) + List.hd (List.tl (List.tl dws)))\l     + (…\l        + -4\l          * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l             then\l               if ((… + …) + …) + List.hd (List.tl (List.tl dws)) = 0\l               then 0 else 1\l             else -1))\l       + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l    + … + List.hd (List.tl (List.tl dws)))\l   + List.hd (List.tl (List.tl (List.tl dws)));\l   v =\l   (((…\l      + -4\l        * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l           then\l             if ((… + …) + …) + List.hd (List.tl (List.tl dws)) = 0\l             then 0 else 1\l           else -1))\l     + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l    + -4\l      * (if 0 \&lt;=\l            ((((((… + …) + …) + List.hd (List.tl (List.tl dws)))\l               + (…\l                  + -4\l                    * (if 0 \&lt;=\l                          (((… + …) + …)\l                           + List.hd (List.tl (List.tl dws)))\l                       then\l                         if ((… + …) + …)\l                            + List.hd (List.tl (List.tl dws)) = 0\l                         then 0 else 1\l                       else -1))\l                 + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l              + … + List.hd (List.tl (List.tl dws)))\l             + List.hd (List.tl (List.tl (List.tl dws))))\l         then … else -1))\l   + 2\l     * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l        then … else -1)\}\l  (List.tl (List.tl (List.tl (List.tl dws))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_900 -&gt; call_899 [label=&quot;calls&quot;];
call_1110 [label=&quot;List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl (List.tl (List.tl dws)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1110 -&gt; expr_1805 [label=&quot;=&quot;];
expr_1805 [label=&quot;List.tl (List.tl (List.tl dws)) = []\l\|\| ((List.hd (List.tl (List.tl (List.tl dws))) = -1\l     \|\| List.hd (List.tl (List.tl (List.tl dws))) = 0)\l    \|\| List.hd (List.tl (List.tl (List.tl dws))) = 1)\l   &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0\l      (List.tl (List.tl (List.tl (List.tl dws))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1113 -&gt; call_1110 [label=&quot;calls&quot;];
call_511 [label=&quot;bad_final_state\l\{w = … + List.hd (List.tl dws);\l y = ((… + …) + …) + List.hd (List.tl dws);\l v =\l (…\l  + -4\l    * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l       then if ((… + …) + …) + List.hd (List.tl dws) = 0 then 0 else 1\l       else -1))\l + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l(List.tl (List.tl dws))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_511 -&gt; expr_900 [label=&quot;=&quot;];
expr_900 [label=&quot;if List.tl (List.tl dws) = []\lthen\l  \{w = … + List.hd (List.tl dws);\l   y = ((… + …) + …) + List.hd (List.tl dws);\l   v =\l   (…\l    + -4\l      * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l         then\l           if ((… + …) + …) + List.hd (List.tl dws) = 0 then 0 else 1\l         else -1))\l   + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\lelse\l  bad_final_state\l  \{w = (… + List.hd (List.tl dws)) + List.hd (List.tl (List.tl dws));\l   y =\l   (((((… + …) + …) + List.hd (List.tl dws))\l     + (…\l        + -4\l          * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l             then\l               if ((… + …) + …) + List.hd (List.tl dws) = 0 then 0\l               else 1\l             else -1))\l       + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l    + … + List.hd (List.tl dws))\l   + List.hd (List.tl (List.tl dws));\l   v =\l   (((…\l      + -4\l        * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l           then\l             if ((… + …) + …) + List.hd (List.tl dws) = 0 then 0 else 1\l           else -1))\l     + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l    + -4\l      * (if 0 \&lt;=\l            ((((((… + …) + …) + List.hd (List.tl dws))\l               + (…\l                  + -4\l                    * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l                       then\l                         if ((… + …) + …) + List.hd (List.tl dws) = 0\l                         then 0 else 1\l                       else -1))\l                 + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1))\l              + … + List.hd (List.tl dws))\l             + List.hd (List.tl (List.tl dws)))\l         then … else -1))\l   + 2\l     * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws)) then …\l        else -1)\}\l  (List.tl (List.tl (List.tl dws)))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_512 -&gt; call_511 [label=&quot;calls&quot;];
call_387 [label=&quot;List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_387 -&gt; expr_703 [label=&quot;=&quot;];
expr_703 [label=&quot;List.tl dws = []\l\|\| ((List.hd (List.tl dws) = -1 \|\| List.hd (List.tl dws) = 0)\l    \|\| List.hd (List.tl dws) = 1)\l   &amp;&amp; List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl (List.tl dws))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_389 -&gt; call_387 [label=&quot;calls&quot;];
call_1803 [label=&quot;List.for_all anon_fun.arbitrary_delta_ws.0\l(List.tl (List.tl (List.tl (List.tl dws))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1805 -&gt; call_1803 [label=&quot;calls&quot;];
call_1533 [label=&quot;bad_final_state\l\{w = … + List.hd (List.tl (List.tl (List.tl dws)));\l y = ((… + …) + …) + List.hd (List.tl (List.tl (List.tl dws)));\l v =\l (…\l  + -4\l    * (if 0 \&lt;=\l          (((… + …) + …) + List.hd (List.tl (List.tl (List.tl dws))))\l       then\l         if ((… + …) + …) + List.hd (List.tl (List.tl (List.tl dws))) =\l            0\l         then 0 else 1\l       else -1))\l + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l(List.tl (List.tl (List.tl (List.tl dws))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1534 -&gt; call_1533 [label=&quot;calls&quot;];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-385591b4-43fe-4a74-90fa-914f4660b2c1';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-523745cf-acd9-451b-bc11-8f8d213ca696"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-a9ab9a9e-253f-4870-ba42-a031f03af705"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-31d0ab72-a50f-43da-9064-41c62aa8e5e8"><table><tr><td><b>ground_instances</b></td><td>8</td></tr><tr><td><b>definitions</b></td><td>12</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.040s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-34ec9414-f24a-42b2-a2d0-71848473d3c3"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-02bbada5-c2b7-4aa8-8de0-bb5b9dba71b2"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-f051f71f-76f4-44f1-83fc-92c0684f2e68"><table><tr><td><b>arith offset eqs</b></td><td>36</td></tr><tr><td><b>num checks</b></td><td>17</td></tr><tr><td><b>arith assert lower</b></td><td>257</td></tr><tr><td><b>arith pivots</b></td><td>29</td></tr><tr><td><b>rlimit count</b></td><td>10281</td></tr><tr><td><b>mk clause</b></td><td>402</td></tr><tr><td><b>datatype occurs check</b></td><td>263</td></tr><tr><td><b>mk bool var</b></td><td>505</td></tr><tr><td><b>arith assert upper</b></td><td>208</td></tr><tr><td><b>datatype splits</b></td><td>41</td></tr><tr><td><b>decisions</b></td><td>194</td></tr><tr><td><b>arith add rows</b></td><td>101</td></tr><tr><td><b>arith bound prop</b></td><td>57</td></tr><tr><td><b>propagations</b></td><td>1009</td></tr><tr><td><b>interface eqs</b></td><td>12</td></tr><tr><td><b>conflicts</b></td><td>44</td></tr><tr><td><b>arith fixed eqs</b></td><td>66</td></tr><tr><td><b>datatype accessor ax</b></td><td>38</td></tr><tr><td><b>minimized lits</b></td><td>30</td></tr><tr><td><b>arith conflicts</b></td><td>4</td></tr><tr><td><b>arith assert diseq</b></td><td>145</td></tr><tr><td><b>datatype constructor ax</b></td><td>46</td></tr><tr><td><b>final checks</b></td><td>39</td></tr><tr><td><b>added eqs</b></td><td>672</td></tr><tr><td><b>del clause</b></td><td>104</td></tr><tr><td><b>arith eq adapter</b></td><td>117</td></tr><tr><td><b>memory</b></td><td>52.240000</td></tr><tr><td><b>max memory</b></td><td>52.240000</td></tr><tr><td><b>num allocs</b></td><td>24253136199.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-34ec9414-f24a-42b2-a2d0-71848473d3c3';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-c0ab1e09-1ef1-4687-822e-f65d5099d65a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.040s]
  List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:
  ==&gt; -3 &lt;= (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y
      &amp;&amp; (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y &lt;= 3</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-6056d6b8-5ed3-4e84-ae3f-8719916ae799"><table><tr><td><b>into</b></td><td><pre>not (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:)
|| -3 &lt;= (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y
   &amp;&amp; (bad_final_state {w = 0; y = 0; v = 0} :var_0:).y &lt;= 3</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b96c5199-aab7-4515-b262-32f3c0b5b367"><table><tr><td><b>expr</b></td><td><pre>(bad_final_state_2559 (|\|rec_mk.state_2593\|| 0 0 0) dws_2587)</pre></td></tr><tr><td><b>expansions</b></td><td><ul><li><pre>sgn</pre></li><li><pre>sgnbad_controller</pre></li><li><pre>sgnbad_controllerbad_next_state</pre></li></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-21d138aa-3ad7-41f6-b2f3-1145df3fdfb5"><table><tr><td><b>expr</b></td><td><pre>(|\|`List.for_all anon_fun.arbitrary_delta_ws.0[0]`_2589\|| dws_2587)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9d6fcde2-b795-487e-a5ad-66ea9135cfff"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (+ (y_2245 (|\|rec_mk.state_2593\|| 0 0 0))
              (v_2246 (|\|rec_mk.state_2593\|…</pre></td></tr><tr><td><b>expansions</b></td><td><ul><li><pre>sgn</pre></li><li><pre>sgnbad_controller</pre></li><li><pre>sgnbad_controllerbad_next_state</pre></li></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9c074eea-13aa-47ee-839f-a11baba16cec"><table><tr><td><b>expr</b></td><td><pre>(|\|`List.for_all anon_fun.arbitrary_delta_ws.0[0]`_2589\||
  (|\|get.::.1_2586\|| dws_2587))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-28200495-58f8-4a0e-932f-80255032fde6"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (+ (y_2245 (|\|rec_mk.state_2593\|| 0 0 0))
              (v_2246 (|\|rec_mk.state_2593\|…</pre></td></tr><tr><td><b>expansions</b></td><td><ul><li><pre>sgn</pre></li><li><pre>sgnbad_controller</pre></li><li><pre>sgnbad_controllerbad_next_state</pre></li></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0d473275-4821-415b-a12f-4523c4faec54"><table><tr><td><b>expr</b></td><td><pre>(|\|`List.for_all anon_fun.arbitrary_delta_ws.0[0]`_2589\||
  (|\|get.::.1_2586\|| (|\|get.::.1_2586…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-d9eb81d6-e245-4289-a9a7-4ae1ca811429"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (+ (y_2245 (|\|rec_mk.state_2593\|| 0 0 0))
              (v_2246 (|\|rec_mk.state_2593\|…</pre></td></tr><tr><td><b>expansions</b></td><td><ul><li><pre>sgn</pre></li><li><pre>sgnbad_controller</pre></li><li><pre>sgnbad_controllerbad_next_state</pre></li></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c02230c1-93f0-4d58-bf1b-935291ccb991"><table><tr><td><b>expr</b></td><td><pre>(|\|`List.for_all anon_fun.arbitrary_delta_ws.0[0]`_2589\||
  (|\|get.::.1_2586\|| (|\|get.::.1_2586…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let dws = [1; 1; 1]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c0ab1e09-1ef1-4687-822e-f65d5099d65a';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-1e860808-15dd-41b4-a81c-d747d80ecc7a"><textarea style="display: none">digraph &quot;proof&quot; {
p_381 [label=&quot;Start (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:\l       ==\&gt; -3 \&lt;= (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l           &amp;&amp; (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y \&lt;= 3\l       :time 0.040s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_381 -&gt; p_380 [label=&quot;&quot;];
p_380 [label=&quot;Simplify (not (List.for_all anon_fun.arbitrary_delta_ws.0 :var_0:)\l          \|\| -3 \&lt;= (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y\l             &amp;&amp; (bad_final_state \{w = 0; y = 0; v = 0\} :var_0:).y \&lt;= 3\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_380 -&gt; p_379 [label=&quot;&quot;];
p_379 [label=&quot;Unroll ([bad_final_state \{w = 0; y = 0; v = 0\} dws],\l        [[sgn; bad_controller; bad_next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_379 -&gt; p_378 [label=&quot;&quot;];
p_378 [label=&quot;Unroll ([List.for_all anon_fun.arbitrary_delta_ws.0 dws], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_378 -&gt; p_377 [label=&quot;&quot;];
p_377 [label=&quot;Unroll ([bad_final_state\l         \{w = 0 + List.hd dws; y = ((0 + 0) + 0) + List.hd dws;\l          v =\l          (0\l           + -4\l             * (if 0 \&lt;= (((0 + 0) + 0) + List.hd dws)\l                then if ((0 + 0) + 0) + List.hd dws = 0 then 0 else 1 \l                else -1))\l          + 2 * (if 0 \&lt;= 0 then if 0 = 0 then 0 else 1 else -1)\}\l         (List.tl dws)],\l        [[sgn; bad_controller; bad_next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_377 -&gt; p_376 [label=&quot;&quot;];
p_376 [label=&quot;Unroll ([List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl dws)], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_376 -&gt; p_375 [label=&quot;&quot;];
p_375 [label=&quot;Unroll ([bad_final_state\l         \{w = … + List.hd (List.tl dws);\l          y = ((… + …) + …) + List.hd (List.tl dws);\l          v =\l          (…\l           + -4\l             * (if 0 \&lt;= (((… + …) + …) + List.hd (List.tl dws))\l                then\l                  if ((… + …) + …) + List.hd (List.tl dws) = 0 \l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl dws))],\l        [[sgn; bad_controller; bad_next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_375 -&gt; p_374 [label=&quot;&quot;];
p_374 [label=&quot;Unroll ([List.for_all anon_fun.arbitrary_delta_ws.0 (List.tl (List.tl dws))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_374 -&gt; p_373 [label=&quot;&quot;];
p_373 [label=&quot;Unroll ([bad_final_state\l         \{w = … + List.hd (List.tl (List.tl dws));\l          y = ((… + …) + …) + List.hd (List.tl (List.tl dws));\l          v =\l          (…\l           + -4\l             * (if 0 \&lt;=\l                   (((… + …) + …) + List.hd (List.tl (List.tl dws)))\l                then\l                  if ((… + …) + …) + List.hd (List.tl (List.tl dws)) =\l                     0\l                  then 0 else 1\l                else -1))\l          + 2 * (if 0 \&lt;= … then if … = 0 then 0 else 1 else -1)\}\l         (List.tl (List.tl (List.tl dws)))],\l        [[sgn; bad_controller; bad_next_state]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_373 -&gt; p_372 [label=&quot;&quot;];
p_372 [label=&quot;Unroll ([List.for_all anon_fun.arbitrary_delta_ws.0\l         (List.tl (List.tl (List.tl dws)))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_372 -&gt; p_371 [label=&quot;&quot;];
p_371 [label=&quot;Sat (Some  let dws = [1; 1; 1]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-1e860808-15dd-41b4-a81c-d747d80ecc7a';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-a9ab9a9e-253f-4870-ba42-a031f03af705';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-523745cf-acd9-451b-bc11-8f8d213ca696';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-db42a3cf-7ed7-4028-9998-7f28c0ea1cea';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Imandra shows us that with our flawed controller, this conjecture is not true! In fact, Imandra computes a counterexample consisting of a sequence of three <code>1</code>-valued wind speed sensor readings.</p>
<p>If we plug these in, we can see the counterexample in action:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Simple%20Vehicle%20Controller.ipynb%23try-cell-32" target="_blank">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">bad_final_state</span> <span class="o">{</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">v</span><span class="o">=</span><span class="mi">0</span><span class="o">}</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">1</span><span class="o">;</span><span class="mi">1</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : state = {w = 3; y = 4; v = -4}
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Happy verifying!</p>

</div>
</div>
</div>
  
 


      </div><div class="content-nav">
          <ul>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Verifying-a-simple-autonomous-vehicle-controller-in-Imandra">Verifying a simple autonomous vehicle controller in Imandra</a></li>
          
            <li class="content-nav__item content-nav__item--h2"><a href="#The-controller-and-its-environment">The controller and its environment</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#The-Imandra-model">The Imandra model</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Our-controller-and-state-transitions">Our controller and state transitions</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Sensing-the-environment">Sensing the environment</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#The-top-level-state-machine">The top-level state machine</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Verifying-our-controller">Verifying our controller</a></li>
          
            <li class="content-nav__item content-nav__item--h2"><a href="#Theorem:-Single-step-safety">Theorem: Single step safety</a></li>
          
            <li class="content-nav__item content-nav__item--h2"><a href="#Theorem:-Multistep-safety">Theorem: Multistep safety</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Theorem:-Cannot-get-more-than-3-units-off-course.">Theorem: Cannot get more than 3 units off course.</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Theorem:-If-wind-is-stable-for-4-intervals,-we-get-back-on-course.">Theorem: If wind is stable for 4 intervals, we get back on course.</a></li>
          
            <li class="content-nav__item content-nav__item--h1"><a href="#Experiments-with-a-flawed-version">Experiments with a flawed version</a></li>
          
          </ul>
        </div></div>
  </div>
</body>
</html>
