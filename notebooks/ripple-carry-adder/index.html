<!DOCTYPE html>
<html>
    <head><meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Imandra Documentation - Verifying a Ripple Carry Adder</title>
        <meta property="og:url" content="https://docs.imandra.ai/imandra-docs/notebooks/ripple-carry-adder/">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Imandra Documentation - Verifying a Ripple Carry Adder">
        <meta property="og:description" content="In this notebook, we'll verify a simple hardware design in Imandra, that of a full (arbitrary width) ripple-carry adder. We'll express this simple piece of hardware at the gate level. The theorem we'll prove expresses that our (arbitrary width) adder circuit is correct for all possible bit sequences.">
        <meta property="og:image" content="https://storage.googleapis.com/imandra-assets/images/og_image_default_i78.jpg">


        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116937440-6"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'UA-116937440-1');
        </script>
        <script type="text/javascript"> var sc_project=11767520; var sc_invisible=1; var sc_security="fa7e88d1"; </script>
        <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
        <noscript><div class="statcounter">
            <a title="Web Analytics" href="http://statcounter.com/" target="_blank">
                <img class="statcounter" src="//c.statcounter.com/11767520/0/fa7e88d1/1/" alt="Web Analytics"></a>
        </div></noscript>
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i%7CMerriweather:300,300i,400,400i%7CRoboto+Slab:300,300i,400,400i">

        <link rel="stylesheet" href="/imandra-docs/static/style/style.min.9ef6027e.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/nbextensions/nbimandra/styles.b466ce6f.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/docs-styles.86fc0481.css" type="text/css">
        
        <link rel="stylesheet" href="/imandra-docs/static/jekyll-styles.8c9c0088.css" type="text/css">
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script src="/imandra-docs/static/nbimandra-rjs-bundle.2469bcb7.js"></script>

        <style type="text/css">
         .highlight .hll { background-color: #ffffcc }
         .highlight  { background: #f8f8f8; }
         .highlight .c { color: #408080; font-style: italic } /* Comment */
         .highlight .err { border: 1px solid #FF0000 } /* Error */
         .highlight .k { color: #008000; font-weight: bold } /* Keyword */
         .highlight .o { color: #666666 } /* Operator */
         .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
         .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
         .highlight .cp { color: #BC7A00 } /* Comment.Preproc */
         .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
         .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
         .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
         .highlight .gd { color: #A00000 } /* Generic.Deleted */
         .highlight .ge { font-style: italic } /* Generic.Emph */
         .highlight .gr { color: #FF0000 } /* Generic.Error */
         .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
         .highlight .gi { color: #00A000 } /* Generic.Inserted */
         .highlight .go { color: #888888 } /* Generic.Output */
         .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
         .highlight .gs { font-weight: bold } /* Generic.Strong */
         .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
         .highlight .gt { color: #0044DD } /* Generic.Traceback */
         .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
         .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
         .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
         .highlight .kp { color: #008000 } /* Keyword.Pseudo */
         .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
         .highlight .kt { color: #B00040 } /* Keyword.Type */
         .highlight .m { color: #666666 } /* Literal.Number */
         .highlight .s { color: #BA2121 } /* Literal.String */
         .highlight .na { color: #7D9029 } /* Name.Attribute */
         .highlight .nb { color: #008000 } /* Name.Builtin */
         .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
         .highlight .no { color: #880000 } /* Name.Constant */
         .highlight .nd { color: #AA22FF } /* Name.Decorator */
         .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
         .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
         .highlight .nf { color: #0000FF } /* Name.Function */
         .highlight .nl { color: #A0A000 } /* Name.Label */
         .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
         .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
         .highlight .nv { color: #19177C } /* Name.Variable */
         .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
         .highlight .w { color: #bbbbbb } /* Text.Whitespace */
         .highlight .mb { color: #666666 } /* Literal.Number.Bin */
         .highlight .mf { color: #666666 } /* Literal.Number.Float */
         .highlight .mh { color: #666666 } /* Literal.Number.Hex */
         .highlight .mi { color: #666666 } /* Literal.Number.Integer */
         .highlight .mo { color: #666666 } /* Literal.Number.Oct */
         .highlight .sa { color: #BA2121 } /* Literal.String.Affix */
         .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
         .highlight .sc { color: #BA2121 } /* Literal.String.Char */
         .highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
         .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
         .highlight .s2 { color: #BA2121 } /* Literal.String.Double */
         .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
         .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
         .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
         .highlight .sx { color: #008000 } /* Literal.String.Other */
         .highlight .sr { color: #BB6688 } /* Literal.String.Regex */
         .highlight .s1 { color: #BA2121 } /* Literal.String.Single */
         .highlight .ss { color: #19177C } /* Literal.String.Symbol */
         .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
         .highlight .fm { color: #0000FF } /* Name.Function.Magic */
         .highlight .vc { color: #19177C } /* Name.Variable.Class */
         .highlight .vg { color: #19177C } /* Name.Variable.Global */
         .highlight .vi { color: #19177C } /* Name.Variable.Instance */
         .highlight .vm { color: #19177C } /* Name.Variable.Magic */
         .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
        </style>

        <!-- Loading mathjax macro -->
        <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --><script>
  function handleCopyClick() {
      var el = this;
      var terminal = el.closest('.terminal');
      var highlight = terminal.getElementsByClassName('highlight')[0];
      copyToClipboardMsg(highlight);

      terminal.classList.add('terminal--hide');
      setTimeout(function () {
          terminal.classList.remove('terminal--hide');
      }, 2000);


      function copyToClipboardMsg(elem) {
          var succeed = copyToClipboard(elem);
          var msg;
          if (!succeed) {
              msg = 'Error!';
          } else {
              msg = 'Copied!';
          }

          var msgElem = terminal.querySelector('.terminal__copy-msg');
          msgElem.innerHTML = msg;
          setTimeout(function () {
              msgElem.innerHTML = 'You rock!';
          }, 1000);
      }

      function copyToClipboard(elem) {
          // create hidden text element, if it doesn't already exist
          var targetId = '_hiddenCopyText_';
          var isInput = elem.tagName === 'INPUT' || elem.tagName === 'TEXTAREA';
          var origSelectionStart, origSelectionEnd;
          if (isInput) {
              // can just use the original source element for the selection and copy
              target = elem;
              origSelectionStart = elem.selectionStart;
              origSelectionEnd = elem.selectionEnd;
          } else {
              // must use a temporary form element for the selection and copy
              target = terminal.querySelector('#' + targetId);
              if (!target) {
                  var target = document.createElement('textarea');
                  // target.style.display = 'flex';
                  // target.style.position = 'absolute';
                  // target.style.left = '-1000%';
                  target.id = targetId;
                 elem.appendChild(target);
              }
              target.textContent = elem.textContent.trim();
          }

          // select the content
          var currentFocus = document.activeElement;
          target.focus();
          target.setSelectionRange(0, target.value.length);

          // copy the selection
          var succeed;
          try {
              succeed = document.execCommand('copy');
          } catch (e) {
              succeed = false;
          }
          // restore original focus
          if (currentFocus && typeof currentFocus.focus === 'function') {
              currentFocus.focus();
          }

          if (isInput) {
              // restore prior selection
              elem.setSelectionRange(origSelectionStart, origSelectionEnd);
          } else {
              // clear temporary content
              elem.removeChild(target);
          }
          return succeed;
      }
  }
</script>
    </head>
    <body>
        <div class="background">
        </div>
        <div class="page-container">
            <main class="main-content-column">
                <!-- Jupyter (Imandra core docs) version -->
<header class="header">
    <div class="top-row-container">
        <div class="top-row">

            <div id="toggler--left" class="side__left-menu-toggler">
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="side__toggle-text">Docs</p>
            </div>

            <div class="side__logo-container">
                <a class="side__logo-link" href="/">
                    <img class="side__logo " src = "/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-docs.svg">
                </a>
            </div>

            <div id="toggler--right" class="side__right-menu-toggler">
                <p class="side__toggle-text">Pages</p>
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <nav class="side__nav-container side__nav-container--hidden">

                <ul class="side__nav-list">
                    
                    <li class="side__nav-list-item TopNavListItem">
                        <a class="side__nav-link" href="/">Documentation Home</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item TopNavListItem">
                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs">Imandra</a>
                        
                        <ul class="side__nav-list--sub-level-1">
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/welcome">A Quick Tour</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" target="_blank" rel="noopener noreferrer" href="/imandra-docs/odoc/imandra-base/Imandra_prelude/">Standard Library</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" target="_blank" rel="noopener noreferrer" href="/imandra-docs/odoc/">API Docs</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/installation">Installation</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-simple">Installer</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-docker">Docker Image</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-vscode">VSCode</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-jupyter">Jupyter</a>
                                        
                                    </li>
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/logic-and-program-modes">Logic and Program Modes</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/verification-commands">Verification</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-commands">Commands</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes">Attributes</a>
                                        
                                        <ul class="side__nav-list--sub-level-3">
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes/#Verification-Hints">Verification Hints</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes/#Rule-Classes">Rule Classes</a>
                                            </li>
                                            
                                        </ul>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-unrolling">Unrolling</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification">Simplification</a>
                                        
                                        <ul class="side__nav-list--sub-level-3">
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification/#Rewrite-Rules">Rewrite Rules</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification/#Forward-chaining-Rules">Forward-chaining Rules</a>
                                            </li>
                                            
                                        </ul>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-blast">Blast</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction">Induction</a>
                                        
                                        <ul class="side__nav-list--sub-level-3">
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction/#Functional-Induction">Functional Induction</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction/#Structural-Induction">Structural Induction</a>
                                            </li>
                                            
                                        </ul>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall">Waterfall</a>
                                        
                                        <ul class="side__nav-list--sub-level-3">
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Simplification">Simplification</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Unrolling-check">Unrolling check</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Destructor-Elimination">Destructor Elimination</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Fertilization">Fertilization</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Generalization">Generalization</a>
                                            </li>
                                            
                                            <li class="side__nav-list-item--sub-level-3">
                                              <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall/#Induction">Induction</a>
                                            </li>
                                            
                                        </ul>
                                        
                                    </li>
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/proving-program-termination">Proving Program Termination</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                Region Decomposition
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/decomposition-flags">Decomposition Flags</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/imandra-tools-intro">Imandra Tools Introduction</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/idf">Iterative Decomposition Framework</a>
                                        
                                    </li>
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/extracting-ocaml-modules-with-imandra-extract">Extracting OCaml modules with imandra-extract</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                </ul>
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/examples">Examples</a>
                                
                                <ul class="side__nav-list--sub-level-2">
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/recursion-induction-and-rewriting">Recursion, Induction and Rewriting</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-merge-sort">Verifying Merge Sort in Imandra</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/ubs-case-study">Analysing the UBS ATS Dark Pool</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/six-swiss-exchange-pricing">Region Decomposition - Exchange Pricing</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/webservice-auth-logic">Analysing Web-app Authentication Logic</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/simple-vehicle-controller">Simple Vehicle Controller</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/simple-stoplight-model">Simple Car Intersection model</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs/notebooks/ripple-carry-adder">Verifying a Ripple Carry Adder</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-an-ros-node">Creating and Verifying a ROS Node</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-tic-tac-toe">Tic Tac Toe with ReasonML</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/probabilistic-reasoning-in-reasonml">Probabilistic Reasoning in ReasonML</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/sudoku">Solving Sudoku with Imandra</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/crossing-river-safely">Crossing the River Safely</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-facetime-state-machines">Exploring The Apple FaceTime Bug with ReasonML State Machines</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/key-pair-security">Key Pair Security in Imandra</a>
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2">
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/a-comparison-with-tla-plus">A comparison with TLA+</a>
                                        
                                    </li>
                                    
                                </ul>
                            </li>
                            
                        </ul>
                        
                    </li>
                    
                    <li class="side__nav-list-item TopNavListItem">
                        <a class="side__nav-link" href="/ipl">Imandra Protocol Language</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item TopNavListItem">
                        <a class="side__nav-link" href="/fix-engine">FIX Engine</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>
    </div>

    <div class="background">
    </div>

    <div class="template-header">
        <div class="top-bar">
            <nav class="top-bar__nav-container">
                <a href="#" class="top-bar__toggle">≡</a>
                <ul class="top-bar__nav-list top-bar__nav-list--hidden">
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/">Home</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://try.imandra.ai/">Try</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://medium.com/imandra">Blog</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/research">Research</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://docs.imandra.ai/">Docs</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/media">Media</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/about">About AI</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/careers">CAREERS</a></li>
                    <li class="top-bar__nav-list-item"><a class="top-bar__nav-link" href="https://www.imandra.ai/contact">CONTACT</a></li>
                </ul>
            </nav>
        </div>

        <div class="template-header__image-container template-header__image-container--jupyter">
            <div class="template-header__image" href ="/imandra-docs">
                <img class="site-specific-image" src="/imandra-docs/static/img/site_specific_image_v_2.svg">
            </div>
        </div>
        
    </div>

    <script>
        document.getElementById('toggler--left').addEventListener('click', function () {
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.remove('side__toggle--active');
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.toggle('side__toggle--active');
            document.getElementsByClassName('side__nav-container')[0].classList.toggle('side__nav-container--hidden');
            document.getElementsByClassName('top-bar__nav-list')[0].classList.add('top-bar__nav-list--hidden');
        });

        document.getElementById('toggler--right').addEventListener('click', function () {
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.remove('side__toggle--active');
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.toggle('side__toggle--active');
            document.getElementsByClassName('side__nav-container')[0].classList.add('side__nav-container--hidden');
            document.getElementsByClassName('top-bar__nav-list')[0].classList.toggle('top-bar__nav-list--hidden');
        });

    </script>
</header>
                <article class="article__container article__container--notebooks">
                    <div class="main-content main-content--jupyter">
                        
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Verifying-a-Ripple-Carry-Adder-in-Imandra">Verifying a Ripple-Carry Adder in Imandra<a class="anchor-link" href="#Verifying-a-Ripple-Carry-Adder-in-Imandra">&#182;</a></h1><p><img src="https://upload.wikimedia.org/wikipedia/commons/5/57/Fulladder.gif"></p>
<p>In this notebook, we'll verify a simple hardware design in Imandra, that of a full (arbitrary width) <em>ripple-carry adder</em>.</p>
<p>We'll express this simple piece of hardware at the <em>gate</em> level.</p>
<p>The correctness theorem we'll prove is as follows:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><div class="highlight"><pre><span></span><span class="n">theorem</span> <span class="n">full_ripple_carry_adder_correct</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">a</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">b</span> <span class="o">==&gt;</span>
  <span class="n">int_of_bits</span> <span class="o">(</span><span class="n">ripple_carry_adder</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)</span> <span class="o">=</span>
  <span class="n">int_of_bits</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bits</span> <span class="n">b</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">cin</span>
</pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>This theorem expresses that our (arbitrary width) adder circuit is correct for all possible bit sequences.</p>
<h1 id="Building-the-circuit-in-Imandra">Building the circuit in Imandra<a class="anchor-link" href="#Building-the-circuit-in-Imandra">&#182;</a></h1><p>We begin by defining <code>xor</code> and our basic building blocks <code>adder_sum</code> and <code>adder_carry_out</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-4" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">xor</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">:</span> <span class="kt">bool</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;&gt;</span> <span class="n">y</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val xor : bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We now define the basic sum and carry circuits for our adder.</p>
<table border="0">
    <tr><td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/1-bit_full-adder.svg/215px-1-bit_full-adder.svg.png"></td><td>&nbsp;</td><td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Full-adder_logic_diagram.svg/400px-Full-adder_logic_diagram.svg.png"></td></tr>
</table><p>We'll define two functions: <code>adder_sum</code> and <code>adder_carry_out</code>. Notice these are purely logical (<em>"combinational"</em>), i.e., they're defined using combinations of logic gates like <code>xor</code>, <code>and</code> (<code>&amp;&amp;</code>), and <code>or</code> (<code>||</code>) operating on <code>bool</code> values.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-6" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">adder_sum</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="n">xor</span> <span class="o">(</span><span class="n">xor</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">cin</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val adder_sum : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-7" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">adder_carry_out</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="o">((</span><span class="n">xor</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">cin</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">a</span> <span class="o">&amp;&amp;</span> <span class="n">b</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val adder_carry_out : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>To help us understand and document how it works, we can use Imandra's <code>Document</code> machinery to produce a truth-table for our one-bit full adder circuit:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-9" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">args</span> <span class="o">=</span> <span class="nn">CCList</span><span class="p">.</span><span class="n">cartesian_product</span> <span class="o">[[</span><span class="bp">true</span><span class="o">;</span> <span class="bp">false</span><span class="o">];</span> <span class="o">[</span><span class="bp">true</span><span class="o">;</span> <span class="bp">false</span><span class="o">];</span> <span class="o">[</span><span class="bp">true</span><span class="o">;</span> <span class="bp">false</span><span class="o">]]</span> <span class="k">in</span>
<span class="k">let</span> <span class="n">pb</span> <span class="n">b</span> <span class="o">=</span> <span class="nn">Document</span><span class="p">.</span><span class="n">s</span> <span class="o">(</span><span class="n">string_of_bool</span> <span class="n">b</span><span class="o">)</span> <span class="k">in</span>
<span class="nn">Imandra</span><span class="p">.</span><span class="n">display</span> <span class="o">@@</span> 
 <span class="nn">Document</span><span class="p">.</span><span class="o">(</span><span class="n">tbl</span> <span class="o">~</span><span class="n">headers</span><span class="o">:[</span><span class="s2">&quot;a&quot;</span><span class="o">;</span><span class="s2">&quot;b&quot;</span><span class="o">;</span><span class="s2">&quot;cin&quot;</span><span class="o">;</span><span class="s2">&quot;sum&quot;</span><span class="o">;</span><span class="s2">&quot;cout&quot;</span><span class="o">]</span> <span class="o">@@</span>
  <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">(</span><span class="k">function</span> <span class="o">[</span><span class="n">a</span><span class="o">;</span><span class="n">b</span><span class="o">;</span><span class="n">cin</span><span class="o">]</span> <span class="o">-&gt;</span> 
   <span class="o">[</span><span class="n">pb</span> <span class="n">a</span><span class="o">;</span> <span class="n">pb</span> <span class="n">b</span><span class="o">;</span> <span class="n">pb</span> <span class="n">cin</span><span class="o">;</span> <span class="n">pb</span> <span class="o">(</span><span class="n">adder_sum</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">);</span> <span class="n">pb</span> <span class="o">(</span><span class="n">adder_carry_out</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)]</span>
   <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">[]</span><span class="o">)</span>
   <span class="n">args</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : unit = ()
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-table" id="table-9fcce534-ca25-4670-a481-11e00c528aa6"><table><thead><tr><th>a</th><th>b</th><th>cin</th><th>sum</th><th>cout</th></tr></thead><tr><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td></tr><tr><td>false</td><td>true</td><td>false</td><td>true</td><td>false</td></tr><tr><td>false</td><td>true</td><td>true</td><td>false</td><td>true</td></tr><tr><td>true</td><td>false</td><td>false</td><td>true</td><td>false</td></tr><tr><td>true</td><td>false</td><td>true</td><td>false</td><td>true</td></tr><tr><td>true</td><td>true</td><td>false</td><td>false</td><td>true</td></tr><tr><td>true</td><td>true</td><td>true</td><td>true</td><td>true</td></tr></table></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We can now define our ripple-carry adder, for arbitrary length bitvector inputs.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-11" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">ripple_carry_adder</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span><span class="o">)</span> <span class="o">(</span><span class="n">cin</span> <span class="o">:</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span> <span class="k">with</span>
  <span class="o">|</span> <span class="n">a1</span> <span class="o">::</span> <span class="n">a&#39;</span><span class="o">,</span> <span class="n">b1</span> <span class="o">::</span> <span class="n">b&#39;</span> <span class="o">-&gt;</span>
    <span class="n">adder_sum</span> <span class="n">a1</span> <span class="n">b1</span> <span class="n">cin</span> <span class="o">::</span>
    <span class="n">ripple_carry_adder</span> <span class="n">a&#39;</span> <span class="n">b&#39;</span> <span class="o">(</span><span class="n">adder_carry_out</span> <span class="n">a1</span> <span class="n">b1</span> <span class="n">cin</span><span class="o">)</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="k">if</span> <span class="n">cin</span> <span class="k">then</span> <span class="o">[</span><span class="n">cin</span><span class="o">]</span> <span class="k">else</span> <span class="bp">[]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val ripple_carry_adder : bool list -&gt; bool list -&gt; bool -&gt; bool list = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-26844331-13d7-4fc8-817f-6b6f2a177431"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-3dcbf716-3b7e-4939-ae95-636fa469d96f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `ripple_carry_adder (List.tl a) (List.tl b)
(adder_carry_out (List.hd a) (List.hd b) cin)` from `ripple_carry_adder a b cin`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-0f0a489d-adc2-4223-8974-51cc54f348a4"><table><tr><td><b>original</b></td><td>ripple_carry_adder a b cin</td></tr><tr><td><b>sub</b></td><td>ripple_carry_adder (List.tl a) (List.tl b)
(adder_carry_out (List.hd a) (List.hd b) cin)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count a)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl a))</td></tr><tr><td><b>path</b></td><td>[b &lt;&gt; [] &amp;&amp; a &lt;&gt; []]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-3f0d93e6-da8a-41c9-9877-8fa2e4659725"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-2db95a2c-de81-4728-917f-20b945376961"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-2aa303fa-e9bc-4245-bca1-cda0f1e1effc"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.018s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-d006052f-bfec-45c4-a885-1144f911a955"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-de81e90f-b997-4f60-9408-742cb08503ee"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-11b6f016-cb69-4d63-9864-d06f99170b96"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>8</td></tr><tr><td><b>arith pivots</b></td><td>4</td></tr><tr><td><b>rlimit count</b></td><td>2128</td></tr><tr><td><b>mk clause</b></td><td>30</td></tr><tr><td><b>datatype occurs check</b></td><td>22</td></tr><tr><td><b>mk bool var</b></td><td>84</td></tr><tr><td><b>arith assert upper</b></td><td>5</td></tr><tr><td><b>datatype splits</b></td><td>6</td></tr><tr><td><b>decisions</b></td><td>28</td></tr><tr><td><b>arith add rows</b></td><td>6</td></tr><tr><td><b>propagations</b></td><td>30</td></tr><tr><td><b>conflicts</b></td><td>9</td></tr><tr><td><b>arith fixed eqs</b></td><td>4</td></tr><tr><td><b>datatype accessor ax</b></td><td>10</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>14</td></tr><tr><td><b>num allocs</b></td><td>943910761</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>87</td></tr><tr><td><b>del clause</b></td><td>17</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>15.740000</td></tr><tr><td><b>max memory</b></td><td>20.770000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d006052f-bfec-45c4-a885-1144f911a955';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-9fd2375e-fcc1-4010-8070-8dc77ea30c9b"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.018s]
  (b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
  &amp;&amp; Ordinal.count a &gt;= 0 &amp;&amp; Ordinal.count (List.tl a) &gt;= 0
  ==&gt; not ((List.tl b) &lt;&gt; [] &amp;&amp; (List.tl a) &lt;&gt; [])
      || Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
         (Ordinal.Int (Ordinal.count a))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-ccf9cf5a-2a6b-4c69-97db-e4c8545d1ace"><table><tr><td><b>into</b></td><td><pre>(not
 (((b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) &amp;&amp; Ordinal.count a &gt;= 0)
  &amp;&amp; Ordinal.count (List.tl a) &gt;= 0)
 || not ((List.tl b) &lt;&gt; [] &amp;&amp; (List.tl a) &lt;&gt; []))
|| Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
   (Ordinal.Int (Ordinal.count a))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-6326d0eb-e9c3-42ba-944b-b23f75c41d53"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_116| (|Ordinal.Int_107|
                    (|count_`bool list`_1496| (|get.::.1_1482| …</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-d7dd04fb-8bcb-4fd0-a67e-2715bff3bda9"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_1496| (|get.::.1_1482| a_1483))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-381a510c-95c0-45d7-a138-03c2328ba4e1"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_1496| a_1483)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (= (|count_`bool list`_1496| a_1483)
              (+ 1 (|count_`bool list`_1496| (|get.:…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-9fd2375e-fcc1-4010-8070-8dc77ea30c9b';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-2db95a2c-de81-4728-917f-20b945376961';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3f0d93e6-da8a-41c9-9877-8fa2e4659725';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3dcbf716-3b7e-4939-ae95-636fa469d96f';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-26844331-13d7-4fc8-817f-6b6f2a177431';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Let's now compute with our adder to get a feel for it.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-13" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">zero</span> <span class="o">=</span> <span class="bp">[]</span>
<span class="k">let</span> <span class="n">one</span> <span class="o">=</span> <span class="o">[</span><span class="bp">true</span><span class="o">]</span>
<span class="k">let</span> <span class="n">two</span> <span class="o">=</span> <span class="o">[</span><span class="bp">false</span><span class="o">;</span> <span class="bp">true</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val zero : &#39;a list = []
val one : bool list = [true]
val two : bool list = [false; true]
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-14" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">ripple_carry_adder</span> <span class="n">zero</span> <span class="n">zero</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool list = []
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-15" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">ripple_carry_adder</span> <span class="n">one</span> <span class="n">one</span> <span class="bp">false</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool list = [false; true]
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-16" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">ripple_carry_adder</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">false</span> <span class="o">=</span> <span class="o">[</span><span class="bp">false</span><span class="o">;</span> <span class="bp">false</span><span class="o">;</span> <span class="bp">false</span><span class="o">;</span> <span class="bp">true</span><span class="o">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool list -&gt; bool list -&gt; bool = &lt;fun&gt;
module CX : sig val a : bool list val b : bool list end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 4 steps, 0.019s):
 let (a : bool list) = [true; true; false]
 let (b : bool list) = [true; false; true]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-184f95bb-b906-4c26-8fd7-ee5b172b6a96"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-a03093c4-267a-4d55-8245-3c561c028723"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;ripple_carry_adder a b false = false :: (false :: (false :: (true :: …)))&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1108 [label=&quot;ripple_carry_adder (List.tl (List.tl (List.tl (List.tl a))))\l(List.tl (List.tl (List.tl (List.tl b))))\l(not (List.hd (List.tl (List.tl (List.tl a)))) =\l List.hd (List.tl (List.tl (List.tl b)))\l &amp;&amp; (not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l     &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l         &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l         \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l     \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b)))\l \|\| List.hd (List.tl (List.tl (List.tl a)))\l    &amp;&amp; List.hd (List.tl (List.tl (List.tl b))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1112 -&gt; call_1108 [label=&quot;calls&quot;];
call_363 [label=&quot;ripple_carry_adder (List.tl (List.tl a)) (List.tl (List.tl b))\l(not (List.hd (List.tl a)) = List.hd (List.tl b)\l &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_363 -&gt; expr_733 [label=&quot;=&quot;];
expr_733 [label=&quot;if (List.tl (List.tl b)) \&lt;\&gt; [] &amp;&amp; (List.tl (List.tl a)) \&lt;\&gt; []\lthen\l  ((List.hd (List.tl (List.tl a)) = List.hd (List.tl (List.tl b))) =\l   (not (List.hd (List.tl a)) = List.hd (List.tl b)\l    &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l    \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b)))\l  ::\l  (ripple_carry_adder (List.tl (List.tl (List.tl a)))\l   (List.tl (List.tl (List.tl b)))\l   (not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l    &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l        &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l        \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l    \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b))))\lelse\lif not (List.hd (List.tl a)) = List.hd (List.tl b)\l   &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l   \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b)\lthen\l  [not (List.hd (List.tl a)) = List.hd (List.tl b)\l   &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l   \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b)]\lelse []&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_367 -&gt; call_363 [label=&quot;calls&quot;];
call_16 [label=&quot;ripple_carry_adder a b false&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_16 -&gt; expr_172 [label=&quot;=&quot;];
expr_172 [label=&quot;if b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; []\lthen\l  ((List.hd a = List.hd b) = false) ::\l  (ripple_carry_adder (List.tl a) (List.tl b)\l   (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b))\lelse []&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_16 [label=&quot;calls&quot;];
call_170 [label=&quot;ripple_carry_adder (List.tl a) (List.tl b)\l(not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_170 -&gt; expr_367 [label=&quot;=&quot;];
expr_367 [label=&quot;if (List.tl b) \&lt;\&gt; [] &amp;&amp; (List.tl a) \&lt;\&gt; []\lthen\l  ((List.hd (List.tl a) = List.hd (List.tl b)) =\l   (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b))\l  ::\l  (ripple_carry_adder (List.tl (List.tl a)) (List.tl (List.tl b))\l   (not (List.hd (List.tl a)) = List.hd (List.tl b)\l    &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l    \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b)))\lelse\lif not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b\lthen [not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b] \lelse []&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_172 -&gt; call_170 [label=&quot;calls&quot;];
call_729 [label=&quot;ripple_carry_adder (List.tl (List.tl (List.tl a)))\l(List.tl (List.tl (List.tl b)))\l(not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l     &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l     \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_729 -&gt; expr_1112 [label=&quot;=&quot;];
expr_1112 [label=&quot;if (List.tl (List.tl (List.tl b))) \&lt;\&gt; []\l   &amp;&amp; (List.tl (List.tl (List.tl a))) \&lt;\&gt; []\lthen\l  ((List.hd (List.tl (List.tl (List.tl a))) =\l    List.hd (List.tl (List.tl (List.tl b))))\l   =\l   (not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l    &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l        &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l        \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l    \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b))))\l  ::\l  (ripple_carry_adder (List.tl (List.tl (List.tl (List.tl a))))\l   (List.tl (List.tl (List.tl (List.tl b))))\l   (not (List.hd (List.tl (List.tl (List.tl a)))) =\l    List.hd (List.tl (List.tl (List.tl b)))\l    &amp;&amp; (not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l        &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l            &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false\l                \|\| List.hd a &amp;&amp; List.hd b)\l            \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l        \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b)))\l    \|\| List.hd (List.tl (List.tl (List.tl a)))\l       &amp;&amp; List.hd (List.tl (List.tl (List.tl b)))))\lelse\lif not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l   &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l       &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l       \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l   \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b))\lthen\l  [not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l   &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l       &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l       \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l   \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b))]\lelse []&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_733 -&gt; call_729 [label=&quot;calls&quot;];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-a03093c4-267a-4d55-8245-3c561c028723';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-a6df369f-fbe3-4773-8a52-6b7048c9d065"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-ea58edf0-68a5-43ff-9ef0-39095a6eb49d"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-a1743b90-3c5e-4b36-8d80-92392e524379"><table><tr><td><b>ground_instances</b></td><td>4</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.019s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-e06c2c1e-292d-4ccb-b3e8-b4c102c0533a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-be5410b4-7f67-4401-9207-60dce8e8c262"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-2f82abbe-1abd-4bcc-a85b-5f4acba9eba1"><table><tr><td><b>num checks</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>4164</td></tr><tr><td><b>mk clause</b></td><td>197</td></tr><tr><td><b>datatype occurs check</b></td><td>56</td></tr><tr><td><b>mk bool var</b></td><td>186</td></tr><tr><td><b>datatype splits</b></td><td>12</td></tr><tr><td><b>decisions</b></td><td>53</td></tr><tr><td><b>propagations</b></td><td>204</td></tr><tr><td><b>conflicts</b></td><td>16</td></tr><tr><td><b>datatype accessor ax</b></td><td>27</td></tr><tr><td><b>minimized lits</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>28</td></tr><tr><td><b>num allocs</b></td><td>981669898</td></tr><tr><td><b>final checks</b></td><td>11</td></tr><tr><td><b>added eqs</b></td><td>281</td></tr><tr><td><b>del clause</b></td><td>46</td></tr><tr><td><b>memory</b></td><td>19.800000</td></tr><tr><td><b>max memory</b></td><td>20.770000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-e06c2c1e-292d-4ccb-b3e8-b4c102c0533a';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-6c6dc189-9ece-4393-9a11-a5e8375932e2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.019s]
  ripple_carry_adder :var_0: :var_1: false =
  false :: (false :: (false :: (true :: …)))</pre></li><li><div>unroll<div class="imandra-table" id="table-a390d954-ee39-4c81-b214-6b245cdce4cd"><table><tr><td><b>expr</b></td><td><pre>(ripple_carry_adder_1000 a_1012 b_1013 false)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8061e71a-241f-4378-8a55-c839d0ee817b"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (and (= (not (|get.::.0_1513| a_1012)) (|get.::.0_1513| b_1013))
                false)))…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-6b90bab3-e86b-4a77-9509-21a8c796f87a"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (= (not (|get.::.0_1513| (|get.::.1_1514| a_1012)))
              (|get.::.0_1513| (|get.…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-e0c2a8a6-5ba3-49b2-972c-c77623c5f06e"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (not (|get.::.0_1513| (|get.::.1_1514| (|get.::.1_1514| a_1012)))))
      (a!3 (= (not (|…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (a : bool list) = [true; true; false]
 let (b : bool list) = [true; false; true]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6c6dc189-9ece-4393-9a11-a5e8375932e2';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-6c93d57b-9bb5-48e4-bd81-9a809c94bc51"><textarea style="display: none">digraph &quot;proof&quot; {
p_250 [label=&quot;Start (ripple_carry_adder :var_0: :var_1: false =\l       false :: (false :: (false :: (true :: …))) :time 0.019s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_250 -&gt; p_249 [label=&quot;&quot;];
p_249 [label=&quot;Unroll ([ripple_carry_adder a b false], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_249 -&gt; p_248 [label=&quot;&quot;];
p_248 [label=&quot;Unroll ([ripple_carry_adder (List.tl a) (List.tl b)\l         (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_248 -&gt; p_247 [label=&quot;&quot;];
p_247 [label=&quot;Unroll ([ripple_carry_adder (List.tl (List.tl a)) (List.tl (List.tl b))\l         (not (List.hd (List.tl a)) = List.hd (List.tl b)\l          &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)\l          \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_247 -&gt; p_246 [label=&quot;&quot;];
p_246 [label=&quot;Unroll ([ripple_carry_adder (List.tl (List.tl (List.tl a)))\l         (List.tl (List.tl (List.tl b)))\l         (not (List.hd (List.tl (List.tl a))) = List.hd (List.tl (List.tl b))\l          &amp;&amp; (not (List.hd (List.tl a)) = List.hd (List.tl b)\l              &amp;&amp; (not (List.hd a) = List.hd b &amp;&amp; false\l                  \|\| List.hd a &amp;&amp; List.hd b)\l              \|\| List.hd (List.tl a) &amp;&amp; List.hd (List.tl b))\l          \|\| List.hd (List.tl (List.tl a)) &amp;&amp; List.hd (List.tl (List.tl b)))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_246 -&gt; p_245 [label=&quot;&quot;];
p_245 [label=&quot;Sat (Some  let (a : bool list) = [true; true; false]\l let (b : bool list) = [true; false; true]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-6c93d57b-9bb5-48e4-bd81-9a809c94bc51';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-ea58edf0-68a5-43ff-9ef0-39095a6eb49d';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a6df369f-fbe3-4773-8a52-6b7048c9d065';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-184f95bb-b906-4c26-8fd7-ee5b172b6a96';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Relating-bit-sequences-to-natural-numbers">Relating bit sequences to natural numbers<a class="anchor-link" href="#Relating-bit-sequences-to-natural-numbers">&#182;</a></h1><p>Let's now define some functions to relate our bit sequences to natural numbers. These will be useful both in our computations and in our expression of our correctness criteria for the circut.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-18" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">int_of_bit</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">:</span> <span class="nn">Z</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span>
 <span class="k">if</span> <span class="n">a</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">int_of_bits</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span><span class="o">)</span> <span class="o">:</span> <span class="nn">Z</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">a</span> <span class="k">with</span>
   <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="mi">0</span>
   <span class="o">|</span> <span class="n">a</span> <span class="o">::</span> <span class="n">a&#39;</span> <span class="o">-&gt;</span> <span class="n">int_of_bit</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="o">(</span><span class="n">int_of_bits</span> <span class="n">a&#39;</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val int_of_bit : bool -&gt; Z.t = &lt;fun&gt;
val int_of_bits : bool list -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-0a35b0cc-2be1-4be2-ad3c-e93913912f61"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-e8bdae1b-8bdf-4767-8381-a15878ca84ac"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `int_of_bits (List.tl a)` from `int_of_bits a`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-e4a575e8-82cd-439b-9512-31593f03c092"><table><tr><td><b>original</b></td><td>int_of_bits a</td></tr><tr><td><b>sub</b></td><td>int_of_bits (List.tl a)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count a)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl a))</td></tr><tr><td><b>path</b></td><td>[not (a = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-c0f5684a-4545-4bdc-ab22-de3307c98457"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-f52f9d37-166a-49de-acb5-58df7fe15944"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-1f8b8a78-34b7-4891-8307-17c1970215b0"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.048s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-cacd9235-9c18-4165-941e-16d6943b8fe3"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-016396f7-363d-4d7e-a528-a9f077cf1072"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-0f78a571-7bd3-4a1a-95f3-32ec2f418c19"><table><tr><td><b>num checks</b></td><td>7</td></tr><tr><td><b>arith assert lower</b></td><td>6</td></tr><tr><td><b>arith pivots</b></td><td>4</td></tr><tr><td><b>rlimit count</b></td><td>1908</td></tr><tr><td><b>mk clause</b></td><td>11</td></tr><tr><td><b>datatype occurs check</b></td><td>33</td></tr><tr><td><b>mk bool var</b></td><td>58</td></tr><tr><td><b>arith assert upper</b></td><td>4</td></tr><tr><td><b>datatype splits</b></td><td>6</td></tr><tr><td><b>decisions</b></td><td>16</td></tr><tr><td><b>arith add rows</b></td><td>5</td></tr><tr><td><b>propagations</b></td><td>10</td></tr><tr><td><b>conflicts</b></td><td>7</td></tr><tr><td><b>arith fixed eqs</b></td><td>3</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>num allocs</b></td><td>1014983687</td></tr><tr><td><b>final checks</b></td><td>9</td></tr><tr><td><b>added eqs</b></td><td>48</td></tr><tr><td><b>del clause</b></td><td>5</td></tr><tr><td><b>arith eq adapter</b></td><td>3</td></tr><tr><td><b>memory</b></td><td>23.170000</td></tr><tr><td><b>max memory</b></td><td>23.170000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cacd9235-9c18-4165-941e-16d6943b8fe3';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-a13d88d2-ef52-4923-ab38-3a393b9508f7"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.048s]
  not (a = []) &amp;&amp; Ordinal.count a &gt;= 0 &amp;&amp; Ordinal.count (List.tl a) &gt;= 0
  ==&gt; List.tl a = []
      || Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
         (Ordinal.Int (Ordinal.count a))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-e68e6306-3d90-43e5-81c2-550770f4242f"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (a = []) &amp;&amp; Ordinal.count a &gt;= 0) &amp;&amp; Ordinal.count (List.tl a) &gt;= 0)
 || List.tl a = [])
|| Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
   (Ordinal.Int (Ordinal.count a))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-d7566ad1-4047-4068-97ab-e7d4c5f39f27"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_116| (|Ordinal.Int_107|
                    (|count_`bool list`_1535| (|get.::.1_1525| …</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-6d0a92dc-b082-4b28-aa01-99be3a4881cb"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_1535| (|get.::.1_1525| a_1526))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-a74e95c2-8e77-4ceb-9b73-26a43b3a2fd9"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_1535| a_1526)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (= (|count_`bool list`_1535| a_1526)
              (+ 1 (|count_`bool list`_1535| (|get.:…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a13d88d2-ef52-4923-ab38-3a393b9508f7';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-f52f9d37-166a-49de-acb5-58df7fe15944';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c0f5684a-4545-4bdc-ab22-de3307c98457';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-e8bdae1b-8bdf-4767-8381-a15878ca84ac';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0a35b0cc-2be1-4be2-ad3c-e93913912f61';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Let's experiment with these a bit, to ensure we understand their endianness (among other things).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-20" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">int_of_bits</span> <span class="o">[</span><span class="bp">true</span><span class="o">;</span> <span class="bp">false</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 1
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-21" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">int_of_bits</span> <span class="o">[</span><span class="bp">false</span><span class="o">;</span> <span class="bp">true</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 2
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-22" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">int_of_bits</span> <span class="o">[</span><span class="bp">true</span><span class="o">;</span> <span class="bp">true</span><span class="o">;</span> <span class="bp">true</span><span class="o">;</span> <span class="bp">true</span><span class="o">;]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 15
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We can of course use Imandra to obtain some interesting examples by querying for interesting inputs to our functions via <code>instance</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-24" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">int_of_bits</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">256</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool list -&gt; bool = &lt;fun&gt;
module CX : sig val a : bool list end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 10 steps, 0.083s):
 let (a : bool list) =
   [false; false; false; false; false; false; false; false; true]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-492e6900-d7e8-411f-bffd-7e95a827c55c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-749269de-026e-45b3-942e-e5f448e2bcad"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;int_of_bits a = 256&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_315 [label=&quot;int_of_bits (List.tl (List.tl (List.tl a)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_315 -&gt; expr_598 [label=&quot;=&quot;];
expr_598 [label=&quot;if List.tl (List.tl (List.tl a)) = [] then 0\lelse\l  (if List.hd (List.tl (List.tl (List.tl a))) then 1 else 0)\l  + 2 * int_of_bits (List.tl (List.tl (List.tl (List.tl a))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_318 -&gt; call_315 [label=&quot;calls&quot;];
call_938 [label=&quot;int_of_bits (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_938 -&gt; expr_1112 [label=&quot;=&quot;];
expr_1112 [label=&quot;if List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))) = [] then 0\lelse\l  (if List.hd (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))\l   then 1 else 0)\l  + 2\l    * int_of_bits\l      (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_941 -&gt; call_938 [label=&quot;calls&quot;];
call_595 [label=&quot;int_of_bits (List.tl (List.tl (List.tl (List.tl a))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_595 -&gt; expr_763 [label=&quot;=&quot;];
expr_763 [label=&quot;if List.tl (List.tl (List.tl (List.tl a))) = [] then 0\lelse\l  (if List.hd (List.tl (List.tl (List.tl (List.tl a)))) then 1 else 0)\l  + 2 * int_of_bits (List.tl (List.tl (List.tl (List.tl (List.tl a)))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_598 -&gt; call_595 [label=&quot;calls&quot;];
call_1846 [label=&quot;int_of_bits\l(List.tl\l (List.tl\l  (List.tl\l   (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1849 -&gt; call_1846 [label=&quot;calls&quot;];
call_1426 [label=&quot;int_of_bits\l(List.tl\l (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1426 -&gt; expr_1593 [label=&quot;=&quot;];
expr_1593 [label=&quot;if List.tl\l   (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))) =\l   []\lthen 0\lelse\l  (if List.hd\l      (List.tl\l       (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))\l   then 1 else 0)\l  + 2\l    * int_of_bits\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1429 -&gt; call_1426 [label=&quot;calls&quot;];
call_1590 [label=&quot;int_of_bits\l(List.tl\l (List.tl\l  (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1590 -&gt; expr_1849 [label=&quot;=&quot;];
expr_1849 [label=&quot;if List.tl\l   (List.tl\l    (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))\l   = []\lthen 0\lelse\l  (if List.hd\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))))\l   then 1 else 0)\l  + 2\l    * int_of_bits\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1593 -&gt; call_1590 [label=&quot;calls&quot;];
call_760 [label=&quot;int_of_bits (List.tl (List.tl (List.tl (List.tl (List.tl a)))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_760 -&gt; expr_941 [label=&quot;=&quot;];
expr_941 [label=&quot;if List.tl (List.tl (List.tl (List.tl (List.tl a)))) = [] then 0\lelse\l  (if List.hd (List.tl (List.tl (List.tl (List.tl (List.tl a))))) then 1\l   else 0)\l  + 2\l    * int_of_bits\l      (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_763 -&gt; call_760 [label=&quot;calls&quot;];
call_170 [label=&quot;int_of_bits (List.tl (List.tl a))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_170 -&gt; expr_318 [label=&quot;=&quot;];
expr_318 [label=&quot;if List.tl (List.tl a) = [] then 0\lelse\l  (if List.hd (List.tl (List.tl a)) then 1 else 0)\l  + 2 * int_of_bits (List.tl (List.tl (List.tl a)))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_173 -&gt; call_170 [label=&quot;calls&quot;];
call_10 [label=&quot;int_of_bits a&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_10 -&gt; expr_66 [label=&quot;=&quot;];
expr_66 [label=&quot;if a = [] then 0\lelse (if List.hd a then 1 else 0) + 2 * int_of_bits (List.tl a)&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_10 [label=&quot;calls&quot;];
call_63 [label=&quot;int_of_bits (List.tl a)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_63 -&gt; expr_173 [label=&quot;=&quot;];
expr_173 [label=&quot;if List.tl a = [] then 0\lelse\l  (if List.hd (List.tl a) then 1 else 0)\l  + 2 * int_of_bits (List.tl (List.tl a))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_66 -&gt; call_63 [label=&quot;calls&quot;];
call_1109 [label=&quot;int_of_bits\l(List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1109 -&gt; expr_1429 [label=&quot;=&quot;];
expr_1429 [label=&quot;if List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))) = []\lthen 0\lelse\l  (if List.hd\l      (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))\l   then 1 else 0)\l  + 2\l    * int_of_bits\l      (List.tl\l       (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_1112 -&gt; call_1109 [label=&quot;calls&quot;];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-749269de-026e-45b3-942e-e5f448e2bcad';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-dac81daa-2169-41f8-99b2-6e2f7de53d8b"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-a5dc8ff1-259c-4287-b94c-3b65cc4fb3f9"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-e507c0b1-f490-4c97-9725-c8c413f3d952"><table><tr><td><b>ground_instances</b></td><td>10</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.084s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-fa114b56-2972-4909-8c7b-c2b186242a60"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-22564ee7-df9b-4b27-86d3-227915e1e946"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-d0262a84-d35a-4847-929f-19dfdb8e97c3"><table><tr><td><b>arith offset eqs</b></td><td>13</td></tr><tr><td><b>num checks</b></td><td>21</td></tr><tr><td><b>arith assert lower</b></td><td>269</td></tr><tr><td><b>arith pivots</b></td><td>69</td></tr><tr><td><b>rlimit count</b></td><td>14247</td></tr><tr><td><b>mk clause</b></td><td>605</td></tr><tr><td><b>datatype occurs check</b></td><td>162</td></tr><tr><td><b>mk bool var</b></td><td>1236</td></tr><tr><td><b>arith gcd tests</b></td><td>10</td></tr><tr><td><b>arith assert upper</b></td><td>256</td></tr><tr><td><b>datatype splits</b></td><td>124</td></tr><tr><td><b>decisions</b></td><td>190</td></tr><tr><td><b>arith add rows</b></td><td>114</td></tr><tr><td><b>arith bound prop</b></td><td>19</td></tr><tr><td><b>propagations</b></td><td>708</td></tr><tr><td><b>conflicts</b></td><td>82</td></tr><tr><td><b>arith fixed eqs</b></td><td>66</td></tr><tr><td><b>datatype accessor ax</b></td><td>108</td></tr><tr><td><b>minimized lits</b></td><td>12</td></tr><tr><td><b>arith conflicts</b></td><td>15</td></tr><tr><td><b>arith assert diseq</b></td><td>131</td></tr><tr><td><b>datatype constructor ax</b></td><td>133</td></tr><tr><td><b>num allocs</b></td><td>1053673039</td></tr><tr><td><b>final checks</b></td><td>49</td></tr><tr><td><b>added eqs</b></td><td>1395</td></tr><tr><td><b>del clause</b></td><td>582</td></tr><tr><td><b>arith eq adapter</b></td><td>276</td></tr><tr><td><b>memory</b></td><td>27.070000</td></tr><tr><td><b>max memory</b></td><td>27.070000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-fa114b56-2972-4909-8c7b-c2b186242a60';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-5634d107-072c-4885-ace2-9eb9e32b2645"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.084s] int_of_bits :var_0: = 256</pre></li><li><div>unroll<div class="imandra-table" id="table-201b4b5b-0ac4-4f81-9df6-007d12b50f9a"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 a_1021)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-63bf65e4-7f13-4aa5-80b8-c12723a185df"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 (|get.::.1_1541| a_1021))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-db8e9a1e-4a1c-4119-ad28-1da5e5d0b17a"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 (|get.::.1_1541| (|get.::.1_1541| a_1021)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c0bba450-c0db-46e3-86c9-fbfa98c39726"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-4cd9cdb9-0a2e-4a6a-8123-76836eaa73c1"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
  (int_o…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-a51bd8f8-553a-4cfb-b1b9-9aae5f84da6e"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
  (int_o…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0757d57a-44bd-4e6a-bc85-863f7d25a472"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
  (int_o…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-e2c0e9e3-92c0-4132-8c1f-2d839450b2e6"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
  (int_o…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ae35cacd-6e36-4142-871d-3f883dfe952c"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
(let ((a…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-a082ae67-b035-43ec-8ee5-a3bcddeec4eb"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| (|get.::.1_1541| a_1021))))))
(let ((a…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (a : bool list) =
   [false; false; false; false; false; false; false; false; true]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-5634d107-072c-4885-ace2-9eb9e32b2645';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-ea5a4e57-e0f9-4a4c-96ed-cc0a07a2c1b3"><textarea style="display: none">digraph &quot;proof&quot; {
p_268 [label=&quot;Start (int_of_bits :var_0: = 256 :time 0.084s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_268 -&gt; p_267 [label=&quot;&quot;];
p_267 [label=&quot;Unroll ([int_of_bits a], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_267 -&gt; p_266 [label=&quot;&quot;];
p_266 [label=&quot;Unroll ([int_of_bits (List.tl a)], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_266 -&gt; p_265 [label=&quot;&quot;];
p_265 [label=&quot;Unroll ([int_of_bits (List.tl (List.tl a))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_265 -&gt; p_264 [label=&quot;&quot;];
p_264 [label=&quot;Unroll ([int_of_bits (List.tl (List.tl (List.tl a)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_264 -&gt; p_263 [label=&quot;&quot;];
p_263 [label=&quot;Unroll ([int_of_bits (List.tl (List.tl (List.tl (List.tl a))))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_263 -&gt; p_262 [label=&quot;&quot;];
p_262 [label=&quot;Unroll ([int_of_bits (List.tl (List.tl (List.tl (List.tl (List.tl a)))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_262 -&gt; p_261 [label=&quot;&quot;];
p_261 [label=&quot;Unroll ([int_of_bits\l         (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_261 -&gt; p_260 [label=&quot;&quot;];
p_260 [label=&quot;Unroll ([int_of_bits\l         (List.tl\l          (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_260 -&gt; p_259 [label=&quot;&quot;];
p_259 [label=&quot;Unroll ([int_of_bits\l         (List.tl\l          (List.tl\l           (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a))))))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_259 -&gt; p_258 [label=&quot;&quot;];
p_258 [label=&quot;Unroll ([int_of_bits\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl a)))))))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_258 -&gt; p_257 [label=&quot;&quot;];
p_257 [label=&quot;Sat (Some  let (a : bool list) =\l   [false; false; false; false; false; false; false; false; true]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-ea5a4e57-e0f9-4a4c-96ed-cc0a07a2c1b3';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-a5dc8ff1-259c-4287-b94c-3b65cc4fb3f9';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-dac81daa-2169-41f8-99b2-6e2f7de53d8b';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-492e6900-d7e8-411f-bffd-7e95a827c55c';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-25" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">int_of_bits</span> <span class="o">(</span><span class="n">ripple_carry_adder</span> <span class="nn">CX</span><span class="p">.</span><span class="n">a</span> <span class="nn">CX</span><span class="p">.</span><span class="n">a</span> <span class="bp">false</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 512
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Verifying-our-circuit:-The-adder-is-correct-for-all-possible-inputs">Verifying our circuit: The adder is correct for all possible inputs<a class="anchor-link" href="#Verifying-our-circuit:-The-adder-is-correct-for-all-possible-inputs">&#182;</a></h1><p>Let's now prove our main theorem, namely that <code>ripple_carry_adder</code> is correct.</p>
<p>We'll prove this theorem by induction following the recursive definition of <code>ripple_carry_adder</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-27" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">full_ripple_carry_adder_correct</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">a</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">b</span> <span class="o">==&gt;</span>
  <span class="n">int_of_bits</span> <span class="o">(</span><span class="n">ripple_carry_adder</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)</span> <span class="o">=</span>
  <span class="n">int_of_bits</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bits</span> <span class="n">b</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">cin</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">ripple_carry_adder</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val full_ripple_carry_adder_correct : bool list -&gt; bool list -&gt; bool -&gt; bool =
  &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

List.length a = List.length b
==&gt; int_of_bits (ripple_carry_adder a b cin) =
    (int_of_bits a + int_of_bits b) + int_of_bit cin.

1 nontautological subgoal.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">ripple_carry_adder</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (not (b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) ==&gt; φ cin b a)
 &amp;&amp; ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
     &amp;&amp; φ (adder_carry_out (List.hd a) (List.hd b) cin) (List.tl b)
        (List.tl a)
     ==&gt; φ cin b a).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2</span>:

 H0. List.length a = List.length b
|---------------------------------------------------------------------------
 C0. b &lt;&gt; [] &amp;&amp; a &lt;&gt; []
 C1. int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)

This simplifies, using the definitions of <span class="ansi-blue-intense-fg ansi-bold">List.length</span>,<span class="ansi-blue-intense-fg ansi-bold"> int_of_bits </span>and<span class="ansi-blue-intense-fg ansi-bold">
ripple_carry_adder</span> to the following 4 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.4</span>:

 H0. List.length a = 0
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a + int_of_bits b
 C2. cin

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.4&#39;</span>:

 H0. a = []
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a
 C2. cin

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.3</span>:

 H0. 0 = List.length b
 H1. b &lt;&gt; []
|---------------------------------------------------------------------------
 C0. a &lt;&gt; []
 C1. 0 = int_of_bits a + int_of_bits b
 C2. cin

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>,
and the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.2</span>:

 H0. List.length a = 0
 H1. cin
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a + int_of_bits b

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.2&#39;</span>:

 H0. a = []
 H1. cin
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.1</span>:

 H0. 0 = List.length b
 H1. b &lt;&gt; []
 H2. cin
|---------------------------------------------------------------------------
 C0. a &lt;&gt; []
 C1. 0 = int_of_bits a + int_of_bits b

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>,
and the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. b &lt;&gt; []
 H1. a &lt;&gt; []
 H2. List.length (List.tl a) = List.length (List.tl b)
     ==&gt; int_of_bits
         (ripple_carry_adder (List.tl a) (List.tl b)
          (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
         =
         (int_of_bits (List.tl a) + int_of_bits (List.tl b))
         + (if not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b
            then 1 else 0)
 H3. List.length a = List.length b
|---------------------------------------------------------------------------
 int_of_bits (ripple_carry_adder a b cin) =
 (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)

But simplification reduces this to true, using the definitions of
<span class="ansi-blue-intense-fg ansi-bold">List.length</span>,<span class="ansi-blue-intense-fg ansi-bold"> int_of_bits </span>and<span class="ansi-blue-intense-fg ansi-bold"> ripple_carry_adder</span>.

<span class="ansi-cyan-intense-fg ansi-bold"> ⓘ </span> Rules:
    (:def List.length)
    (:def int_of_bits)
    (:def ripple_carry_adder)
    (:rw List.len_zero_is_empty)
    (:fc List.len_nonnegative)
    (:induct ripple_carry_adder)

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-e831be58-8811-46eb-aaa8-7179de47815c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-d9f401fa-f47f-4bd5-b3ba-dce32c5f9ded"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-5e373627-1fca-46ce-a126-ff63309877b5"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>33</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>2.477s</pre></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-88a9d6e3-6f52-4268-8380-918ac7faa750"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.477s, &quot;Goal&quot;]
  List.length :var_0: = List.length :var_1:
  ==&gt; int_of_bits (ripple_carry_adder :var_0: :var_1: :var_2:) =
      (int_of_bits :var_0: + int_of_bits :var_1:)
      + (if :var_2: then 1 else 0)</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-13138dcd-9c10-4fda-8cd8-142dc724bfa5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>not (List.length a = List.length b)
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.472s, &quot;1&quot;]
  not (List.length a = List.length b)
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</pre></li><li><pre>induction on (functional ripple_carry_adder)
:scheme (not (b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) ==&gt; φ cin b a)
        &amp;&amp; ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
            &amp;&amp; φ (adder_carry_out (List.hd a) (List.hd b) cin) (List.tl b)
               (List.tl a)
            ==&gt; φ cin b a)</pre></li><li><div><pre>Split (((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [] || not (List.length a = List.length b))
        || int_of_bits (ripple_carry_adder a b cin) =
           (int_of_bits a + int_of_bits b) + (if cin then 1 else 0))
       &amp;&amp; ((not
            ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
             &amp;&amp; (not (List.length (List.tl a) = List.length (List.tl b))
                 || int_of_bits
                    (ripple_carry_adder (List.tl a) (List.tl b)
                     (not (List.hd a) = List.hd b &amp;&amp; cin
                      || List.hd a &amp;&amp; List.hd b))
                    =
                    (int_of_bits (List.tl a) + int_of_bits (List.tl b))
                    + (if not (List.hd a) = List.hd b &amp;&amp; cin
                          || List.hd a &amp;&amp; List.hd b
                       then 1 else 0)))
            || not (List.length a = List.length b))
           || int_of_bits (ripple_carry_adder a b cin) =
              (int_of_bits a + int_of_bits b) + (if cin then 1 else 0))
       :cases [(not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
               || int_of_bits (ripple_carry_adder a b cin) =
                  (int_of_bits a + int_of_bits b) + (if cin then 1 else 0);
               (((not (b &lt;&gt; []) || not (a &lt;&gt; []))
                 || not
                    (not (List.length (List.tl a) = List.length (List.tl b))
                     || int_of_bits
                        (ripple_carry_adder (List.tl a) (List.tl b)
                         (not (List.hd a) = List.hd b &amp;&amp; cin
                          || List.hd a &amp;&amp; List.hd b))
                        =
                        (int_of_bits (List.tl a) + int_of_bits (List.tl b))
                        + (if not (List.hd a) = List.hd b &amp;&amp; cin
                              || List.hd a &amp;&amp; List.hd b
                           then 1 else 0)))
                || not (List.length a = List.length b))
               || int_of_bits (ripple_carry_adder a b cin) =
                  (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-6a01c350-6538-4d08-b3d8-08abaf9b47e3"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(((not (b &lt;&gt; []) || not (a &lt;&gt; []))
  || not
     (not (List.length (List.tl a) = List.length (List.tl b))
      || int_of_bits
         (ripple_carry_adder (List.tl a) (List.tl b)
          (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
         =
         (int_of_bits (List.tl a) + int_of_bits (List.tl b))
         + (if not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b
            then 1 else 0)))
 || not (List.length a = List.length b))
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.467s, &quot;1&quot;]
  (((not (b &lt;&gt; []) || not (a &lt;&gt; []))
    || not
       (not (List.length (List.tl a) = List.length (List.tl b))
        || int_of_bits
           (ripple_carry_adder (List.tl a) (List.tl b)
            (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
           =
           (int_of_bits (List.tl a) + int_of_bits (List.tl b))
           + (if not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b
              then 1 else 0)))
   || not (List.length a = List.length b))
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-e1b86dbe-b006-4000-a9ee-789474e36c2c"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[List.length, List.length, List.length, List.length, List.length,
 List.length, List.length, List.length, List.length, List.length,
 List.length, List.length, List.length, List.length, List.length,
 List.length, int_of_bits, int_of_bits, int_of_bits, ripple_carry_adder]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6a01c350-6538-4d08-b3d8-08abaf9b47e3';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-a532fcdd-8411-414d-9964-5b57bf928d80"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</span></div></div><div class="panel-body collapse"><ul><li><pre>start[2.467s, &quot;2&quot;]
  (not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-661b2195-1d33-4ebd-8199-73b3014da938"><table><tr><td><b>into</b></td><td><pre>(((((not (List.length a = 0) || b &lt;&gt; []) || 0 = int_of_bits a + int_of_bits b)
   || cin)
  &amp;&amp; ((((not (0 = List.length b) || a &lt;&gt; []) || not (b &lt;&gt; []))
       || 0 = int_of_bits a + int_of_bits b)
      || cin))
 &amp;&amp; (((not (List.length a = 0) || b &lt;&gt; [])
      || 0 = int_of_bits a + int_of_bits b)
     || not cin))
&amp;&amp; ((((not (0 = List.length b) || a &lt;&gt; []) || not (b &lt;&gt; []))
     || 0 = int_of_bits a + int_of_bits b)
    || not cin)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[List.length, List.length, List.length, List.length, int_of_bits,
 int_of_bits, ripple_carry_adder]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a532fcdd-8411-414d-9964-5b57bf928d80';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-13138dcd-9c10-4fda-8cd8-142dc724bfa5';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-88a9d6e3-6f52-4268-8380-918ac7faa750';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-483118ee-d6c8-4660-9f6d-1611e7752d0e"><textarea style="display: none">digraph &quot;proof&quot; {
p_293 [label=&quot;Start (List.length :var_0: = List.length :var_1:\l       ==\&gt; int_of_bits (ripple_carry_adder :var_0: :var_1: :var_2:) =\l           (int_of_bits :var_0: + int_of_bits :var_1:)\l           + (if :var_2: then 1 else 0)\l       :name \&quot;Goal\&quot; :time 2.477s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_293 -&gt; p_291 [label=&quot;&quot;];
subgraph cluster_292 {
  color=blue;
p_291 [label=&quot;Start (not (List.length a = List.length b)\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)\l       :name \&quot;1\&quot; :time 2.472s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_291 -&gt; p_290 [label=&quot;&quot;];
p_290 [label=&quot;Induct ((functional ripple_carry_adder),\l        :scheme (not (b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; []) ==\&gt; φ cin b a)\l                &amp;&amp; ((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l                    &amp;&amp; φ (adder_carry_out (List.hd a) (List.hd b) cin)\l                       (List.tl b) (List.tl a)\l                    ==\&gt; φ cin b a))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_290 -&gt; p_289 [label=&quot;&quot;];
p_289 [label=&quot;Split (((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [] \|\| not (List.length a = List.length b))\l        \|\| int_of_bits (ripple_carry_adder a b cin) =\l           (int_of_bits a + int_of_bits b) + (if cin then 1 else 0))\l       &amp;&amp; ((not\l            ((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l             &amp;&amp; (not (List.length (List.tl a) = List.length (List.tl b))\l                 \|\| int_of_bits\l                    (ripple_carry_adder (List.tl a) (List.tl b)\l                     (not (List.hd a) = List.hd b &amp;&amp; cin\l                      \|\| List.hd a &amp;&amp; List.hd b))\l                    =\l                    (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                    + (if not (List.hd a) = List.hd b &amp;&amp; cin\l                          \|\| List.hd a &amp;&amp; List.hd b\l                       then 1 else 0)))\l            \|\| not (List.length a = List.length b))\l           \|\| int_of_bits (ripple_carry_adder a b cin) =\l              (int_of_bits a + int_of_bits b) + (if cin then 1 else 0))\l       :cases [(not (List.length a = List.length b) \|\| b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l               \|\| int_of_bits (ripple_carry_adder a b cin) =\l                  (int_of_bits a + int_of_bits b) + (if cin then 1 else 0);\l               (((not (b \&lt;\&gt; []) \|\| not (a \&lt;\&gt; []))\l                 \|\| not\l                    (not (List.length (List.tl a) = List.length (List.tl b))\l                     \|\| int_of_bits\l                        (ripple_carry_adder (List.tl a) (List.tl b)\l                         (not (List.hd a) = List.hd b &amp;&amp; cin\l                          \|\| List.hd a &amp;&amp; List.hd b))\l                        =\l                        (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                        + (if not (List.hd a) = List.hd b &amp;&amp; cin\l                              \|\| List.hd a &amp;&amp; List.hd b\l                           then 1 else 0)))\l                \|\| not (List.length a = List.length b))\l               \|\| int_of_bits (ripple_carry_adder a b cin) =\l                  (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_289 -&gt; p_270 [label=&quot;&quot;];
subgraph cluster_271 {
  color=blue;
p_270 [label=&quot;Start ((((not (b \&lt;\&gt; []) \|\| not (a \&lt;\&gt; []))\l         \|\| not\l            (not (List.length (List.tl a) = List.length (List.tl b))\l             \|\| int_of_bits\l                (ripple_carry_adder (List.tl a) (List.tl b)\l                 (not (List.hd a) = List.hd b &amp;&amp; cin\l                  \|\| List.hd a &amp;&amp; List.hd b))\l                =\l                (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                + (if not (List.hd a) = List.hd b &amp;&amp; cin\l                      \|\| List.hd a &amp;&amp; List.hd b\l                   then 1 else 0)))\l        \|\| not (List.length a = List.length b))\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)\l       :name \&quot;1\&quot; :time 2.467s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_270 -&gt; p_269 [label=&quot;&quot;];
p_269 [label=&quot;Simplify (true\l          :expansions [List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       int_of_bits;\l                       int_of_bits;\l                       int_of_bits;\l                       ripple_carry_adder]\l          :rw []\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_289 -&gt; p_287 [label=&quot;&quot;];
subgraph cluster_288 {
  color=blue;
p_287 [label=&quot;Start ((not (List.length a = List.length b) \|\| b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + (if cin then 1 else 0)\l       :name \&quot;2\&quot; :time 2.467s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_287 -&gt; p_286 [label=&quot;&quot;];
p_286 [label=&quot;Simplify ((((((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l              \|\| 0 = int_of_bits a + int_of_bits b)\l             \|\| cin)\l            &amp;&amp; ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l                 \|\| 0 = int_of_bits a + int_of_bits b)\l                \|\| cin))\l           &amp;&amp; (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l                \|\| 0 = int_of_bits a + int_of_bits b)\l               \|\| not cin))\l          &amp;&amp; ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l               \|\| 0 = int_of_bits a + int_of_bits b)\l              \|\| not cin)\l          :expansions [List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       int_of_bits;\l                       int_of_bits;\l                       ripple_carry_adder]\l          :rw []\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_286 -&gt; p_273 [label=&quot;&quot;];
subgraph cluster_274 {
  color=blue;
p_273 [label=&quot;Start ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l        \|\| 0 = int_of_bits a + int_of_bits b)\l       \|\| not cin :name \&quot;2.1\&quot; :time 2.062s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_273 -&gt; p_272 [label=&quot;&quot;];
p_272 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_286 -&gt; p_277 [label=&quot;&quot;];
subgraph cluster_278 {
  color=blue;
p_277 [label=&quot;Start (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l        \|\| 0 = int_of_bits a + int_of_bits b)\l       \|\| not cin :name \&quot;2.2\&quot; :time 2.065s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_277 -&gt; p_276 [label=&quot;&quot;];
p_276 [label=&quot;Simplify (((not (a = []) \|\| not cin) \|\| b \&lt;\&gt; []) \|\| 0 = int_of_bits a\l          :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_276 -&gt; p_275 [label=&quot;&quot;];
p_275 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_286 -&gt; p_280 [label=&quot;&quot;];
subgraph cluster_281 {
  color=blue;
p_280 [label=&quot;Start ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l        \|\| 0 = int_of_bits a + int_of_bits b)\l       \|\| cin :name \&quot;2.3\&quot; :time 2.065s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_280 -&gt; p_279 [label=&quot;&quot;];
p_279 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_286 -&gt; p_284 [label=&quot;&quot;];
subgraph cluster_285 {
  color=blue;
p_284 [label=&quot;Start (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l        \|\| 0 = int_of_bits a + int_of_bits b)\l       \|\| cin :name \&quot;2.4\&quot; :time 2.066s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_284 -&gt; p_283 [label=&quot;&quot;];
p_283 [label=&quot;Simplify (((not (a = []) \|\| b \&lt;\&gt; []) \|\| 0 = int_of_bits a) \|\| cin\l          :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_283 -&gt; p_282 [label=&quot;&quot;];
p_282 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-483118ee-d6c8-4660-9f6d-1611e7752d0e';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-d9f401fa-f47f-4bd5-b3ba-dce32c5f9ded';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-e831be58-8811-46eb-aaa8-7179de47815c';
  fold.hydrate(target);
});
</script></div></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Excellent!</p>
<p>Note that we were able to prove this main theorem without introducing any auxiliary lemmas.</p>
<p>Nevertheless, it's almost always useful to prove local lemmas about our functions.</p>
<p>For example, the following is a very useful property to know about our single-step adder, <code>adder_sum</code>. We'll introduce it as a <code>rewrite</code> rule so that we may use it for an alternative proof of our main theorem.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-29" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">single_adder_circuit_correct</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="n">int_of_bit</span> <span class="o">(</span><span class="n">adder_sum</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)</span>
    <span class="o">=</span> <span class="n">int_of_bit</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">b</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">cin</span> <span class="o">-</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="o">(</span><span class="n">int_of_bit</span> <span class="o">(</span><span class="n">adder_carry_out</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)))</span>
<span class="o">[@@</span><span class="n">rewrite</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val single_adder_circuit_correct : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-alternatives" id="alt-167f5158-a17c-42b4-af0d-b188f37de8ec"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>proof</a></li><li class="" data-toggle="tab"><a>call graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-89a694d2-9670-4831-bab5-6f15562376ff"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-ef7628fc-77cf-4341-b21f-75e84ca8cdff"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-37474298-4028-41ee-ba88-05bddc3c0c22"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.036s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-3183a605-9aba-4365-a9a5-da09190bec4c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-fba5ff0e-0168-4bbf-a1f8-8917853a776f"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-abec5b43-81b0-409e-b8eb-3961ad5d79cd"><table><tr><td><b>num checks</b></td><td>1</td></tr><tr><td><b>arith assert lower</b></td><td>60</td></tr><tr><td><b>arith pivots</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>1505</td></tr><tr><td><b>mk clause</b></td><td>160</td></tr><tr><td><b>mk bool var</b></td><td>133</td></tr><tr><td><b>arith assert upper</b></td><td>60</td></tr><tr><td><b>decisions</b></td><td>17</td></tr><tr><td><b>propagations</b></td><td>158</td></tr><tr><td><b>conflicts</b></td><td>17</td></tr><tr><td><b>minimized lits</b></td><td>12</td></tr><tr><td><b>arith conflicts</b></td><td>16</td></tr><tr><td><b>arith assert diseq</b></td><td>1</td></tr><tr><td><b>added eqs</b></td><td>98</td></tr><tr><td><b>del clause</b></td><td>136</td></tr><tr><td><b>arith eq adapter</b></td><td>59</td></tr><tr><td><b>memory</b></td><td>33.460000</td></tr><tr><td><b>max memory</b></td><td>57.200000</td></tr><tr><td><b>num allocs</b></td><td>6949992674.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3183a605-9aba-4365-a9a5-da09190bec4c';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-db7282b1-d649-48aa-a03b-7a1fa0a5f9ba"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.036s]
  (if not (not (:var_0: = :var_1:) = :var_2:) then 1 else 0) =
  (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))
   + (if :var_2: then 1 else 0))
  -
  (2
   * (if not (:var_0: = :var_1:) &amp;&amp; :var_2: || :var_0: &amp;&amp; :var_1: then 1
      else 0))</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-8c25f3b5-e713-4683-92f0-e8a781303a27"><table><tr><td><b>into</b></td><td><pre>(if (:var_0: = :var_1:) = :var_2: then 1 else 0) =
(((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))
 + (if :var_2: then 1 else 0))
+ -2
  * (if not :var_0: = :var_1: &amp;&amp; :var_2: || :var_0: &amp;&amp; :var_1: then 1 else 0)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h4>unsat</h4><pre>(let ((a!1 (= (ite (= (= a_2090 b_2091) cin_2092) 1 0) 1))
      (a!2 (&lt;= (ite (= (= a_2090 b_2091) …</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-db7282b1-d649-48aa-a03b-7a1fa0a5f9ba';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-1663e12b-d56c-4cb7-a645-cb263aceb18d"><textarea style="display: none">digraph &quot;proof&quot; {
p_296 [label=&quot;Start ((if not (not (:var_0: = :var_1:) = :var_2:) then 1 else 0) =\l       (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))\l        + (if :var_2: then 1 else 0))\l       -\l       (2\l        * (if not (:var_0: = :var_1:) &amp;&amp; :var_2: \|\| :var_0: &amp;&amp; :var_1: \l           then 1 else 0))\l       :time 0.036s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_296 -&gt; p_295 [label=&quot;&quot;];
p_295 [label=&quot;Simplify ((if (:var_0: = :var_1:) = :var_2: then 1 else 0) =\l          (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))\l           + (if :var_2: then 1 else 0))\l          + -2\l            * (if not :var_0: = :var_1: &amp;&amp; :var_2: \|\| :var_0: &amp;&amp; :var_1:\l               then 1 else 0)\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_295 -&gt; p_294 [label=&quot;&quot;];
p_294 -&gt; p_z3_560 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_560 [label=&quot;(let ((a!1 (= (ite (= (= a_2090 b_2091) cin_2092) 1 0) 1))
      (a!2 (&lt;= (ite (= (= a_2090 b_2091) …&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_294 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-1663e12b-d56c-4cb7-a645-cb263aceb18d';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-ef7628fc-77cf-4341-b21f-75e84ca8cdff';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-89a694d2-9670-4831-bab5-6f15562376ff';
  fold.hydrate(target);
});
</script></div></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-2c19b71c-7428-4fe1-beb0-455b2dc5cc11"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not\l((if (a = b) = cin then 1 else 0) =\l (((if a then 1 else 0) + (if b then 1 else 0)) + (if cin then 1 else 0))\l + -2 * (if not a = b &amp;&amp; cin \|\| a &amp;&amp; b then 1 else 0))&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-2c19b71c-7428-4fe1-beb0-455b2dc5cc11';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-167f5158-a17c-42b4-af0d-b188f37de8ec';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `int_of_bit` is disabled
(non-recursive function)
See https://docs.imandra.ai/imandra-docs/notebooks/verification-simplification</pre></div></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="color:yellow" class="imandra-warn"><h4 style="color:yellow" class="imandra-warn">Warning</h4><pre>Pattern will match only if `adder_sum` is disabled
(non-recursive function)
See https://docs.imandra.ai/imandra-docs/notebooks/verification-simplification</pre></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Notice the above <code>Warnings</code>, in particular about <code>int_of_bit</code> and <code>adder_sum</code>. These are printed because we've specified Imandra to install this theorem as a <code>rewrite</code> rule, and the LHS (left-hand-side) of the rule contains non-recursive functions which will, unless they are disabled, be expanded before rewriting can be applied.</p>
<p>Can you see an alternative proof of our main theorem which makes use of this rule? We just need to follow the advice of the warning!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-31" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">theorem</span> <span class="n">full_ripple_carry_adder_correct</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">a</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">b</span> <span class="o">==&gt;</span>
  <span class="n">int_of_bits</span> <span class="o">(</span><span class="n">ripple_carry_adder</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)</span> <span class="o">=</span>
  <span class="n">int_of_bits</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bits</span> <span class="n">b</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">cin</span>
<span class="o">[@@</span><span class="n">induct</span> <span class="n">functional</span> <span class="n">ripple_carry_adder</span><span class="o">]</span>
<span class="o">[@@</span><span class="n">disable</span> <span class="n">adder_sum</span><span class="o">,</span> <span class="n">int_of_bit</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val full_ripple_carry_adder_correct : bool list -&gt; bool list -&gt; bool -&gt; bool =
  &lt;fun&gt;
<span class="ansi-white-intense-fg ansi-bold">Goal</span>:

List.length a = List.length b
==&gt; int_of_bits (ripple_carry_adder a b cin) =
    (int_of_bits a + int_of_bits b) + int_of_bit cin.

1 nontautological subgoal.

We shall induct according to a scheme derived from <span class="ansi-blue-intense-fg ansi-bold">ripple_carry_adder</span>.

<span class="ansi-cyan-intense-fg ansi-bold">Induction scheme</span>:

 (not (b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) ==&gt; φ a cin b)
 &amp;&amp; ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
     &amp;&amp; φ (List.tl a) (adder_carry_out (List.hd a) (List.hd b) cin)
        (List.tl b)
     ==&gt; φ a cin b).

2 nontautological subgoals.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2</span>:

 H0. List.length a = List.length b
|---------------------------------------------------------------------------
 C0. b &lt;&gt; [] &amp;&amp; a &lt;&gt; []
 C1. int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + int_of_bit cin

This simplifies, using the definitions of <span class="ansi-blue-intense-fg ansi-bold">List.length</span>,<span class="ansi-blue-intense-fg ansi-bold"> int_of_bits </span>and<span class="ansi-blue-intense-fg ansi-bold">
ripple_carry_adder</span> to the following 4 subgoals:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.4</span>:

 H0. List.length a = 0
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin
 C2. cin

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.4&#39;</span>:

 H0. a = []
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a + int_of_bit false
 C2. cin

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.4&#39;&#39;</span>:

|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bit false
 C2. cin

But we verify Subgoal 2.4&#39;&#39; by recursive unrolling.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.3</span>:

 H0. 0 = List.length b
 H1. b &lt;&gt; []
|---------------------------------------------------------------------------
 C0. a &lt;&gt; []
 C1. 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin
 C2. cin

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>,
and the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.2</span>:

 H0. List.length a = 0
 H1. cin
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin

This simplifies, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span> to:

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.2&#39;</span>:

 H0. a = []
 H1. cin
|---------------------------------------------------------------------------
 C0. b &lt;&gt; []
 C1. 0 = int_of_bits a

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 2.1</span>:

 H0. 0 = List.length b
 H1. b &lt;&gt; []
 H2. cin
|---------------------------------------------------------------------------
 C0. a &lt;&gt; []
 C1. int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin

But simplification reduces this to true, using the definition of <span class="ansi-blue-intense-fg ansi-bold">int_of_bits</span>,
and the rewrite rule <span class="ansi-magenta-intense-fg ansi-bold">List.len_zero_is_empty</span>.

<span class="ansi-white-intense-fg ansi-bold">Subgoal 1</span>:

 H0. b &lt;&gt; []
 H1. a &lt;&gt; []
 H2. List.length (List.tl a) = List.length (List.tl b)
     ==&gt; int_of_bits
         (ripple_carry_adder (List.tl a) (List.tl b)
          (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
         =
         (int_of_bits (List.tl a) + int_of_bits (List.tl b))
         + int_of_bit
           (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b)
 H3. List.length a = List.length b
|---------------------------------------------------------------------------
 int_of_bits (ripple_carry_adder a b cin) =
 (int_of_bits a + int_of_bits b) + int_of_bit cin

But simplification reduces this to true, using the definitions of
<span class="ansi-blue-intense-fg ansi-bold">List.length</span>,<span class="ansi-blue-intense-fg ansi-bold"> int_of_bits </span>and<span class="ansi-blue-intense-fg ansi-bold"> ripple_carry_adder</span>, and the rewrite rule
<span class="ansi-magenta-intense-fg ansi-bold">single_adder_circuit_correct</span>.

<span class="ansi-cyan-intense-fg ansi-bold"> ⓘ </span> Rules:
    (:def List.length)
    (:def int_of_bits)
    (:def ripple_carry_adder)
    (:rw List.len_zero_is_empty)
    (:rw single_adder_circuit_correct)
    (:fc List.len_nonnegative)
    (:induct ripple_carry_adder)

</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Proved</span></div><div><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-8745e2e2-8b89-49c9-9403-078f0d4ff9f2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-aeef2d55-72f3-4572-a0e6-48ac9a01565e"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-afec6908-d227-4e56-a73d-f9b403d02adc"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>27</td></tr><tr><td><b>inductions</b></td><td>1</td></tr><tr><td><b>search_time</b></td><td><pre>0.785s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-c920949b-a71a-49f8-9d28-d6059e1e22b6"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-f4171e4c-8ec8-40a7-8ce1-54c16e945b4d"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-693bf84b-e85c-4b67-9a67-90a2f0ab8a7a"><table><tr><td><b>rlimit count</b></td><td>12309</td></tr><tr><td><b>mk bool var</b></td><td>5</td></tr><tr><td><b>memory</b></td><td>63.850000</td></tr><tr><td><b>max memory</b></td><td>64.150000</td></tr><tr><td><b>num allocs</b></td><td>9104043033.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c920949b-a71a-49f8-9d28-d6059e1e22b6';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-cdccb5f7-e67c-4218-b8d4-dc63f8a1dfce"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.785s, &quot;Goal&quot;]
  List.length :var_0: = List.length :var_1:
  ==&gt; int_of_bits (ripple_carry_adder :var_0: :var_1: :var_2:) =
      (int_of_bits :var_0: + int_of_bits :var_1:) + int_of_bit :var_2:</pre></li><li><div><h4>subproof</h4><div class="imandra-fold panel panel-default" id="fold-c6cad87c-bd72-429b-9efc-e226a8b603ca"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>not (List.length a = List.length b)
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + int_of_bit cin</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.785s, &quot;1&quot;]
  not (List.length a = List.length b)
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + int_of_bit cin</pre></li><li><pre>induction on (functional ripple_carry_adder)
:scheme (not (b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) ==&gt; φ a cin b)
        &amp;&amp; ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
            &amp;&amp; φ (List.tl a) (adder_carry_out (List.hd a) (List.hd b) cin)
               (List.tl b)
            ==&gt; φ a cin b)</pre></li><li><div><pre>Split (((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [] || not (List.length a = List.length b))
        || int_of_bits (ripple_carry_adder a b cin) =
           (int_of_bits a + int_of_bits b) + int_of_bit cin)
       &amp;&amp; ((not
            ((b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
             &amp;&amp; (not (List.length (List.tl a) = List.length (List.tl b))
                 || int_of_bits
                    (ripple_carry_adder (List.tl a) (List.tl b)
                     (not (List.hd a) = List.hd b &amp;&amp; cin
                      || List.hd a &amp;&amp; List.hd b))
                    =
                    (int_of_bits (List.tl a) + int_of_bits (List.tl b))
                    + int_of_bit
                      (not (List.hd a) = List.hd b &amp;&amp; cin
                       || List.hd a &amp;&amp; List.hd b)))
            || not (List.length a = List.length b))
           || int_of_bits (ripple_carry_adder a b cin) =
              (int_of_bits a + int_of_bits b) + int_of_bit cin)
       :cases [(not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
               || int_of_bits (ripple_carry_adder a b cin) =
                  (int_of_bits a + int_of_bits b) + int_of_bit cin;
               (((not (b &lt;&gt; []) || not (a &lt;&gt; []))
                 || not
                    (not (List.length (List.tl a) = List.length (List.tl b))
                     || int_of_bits
                        (ripple_carry_adder (List.tl a) (List.tl b)
                         (not (List.hd a) = List.hd b &amp;&amp; cin
                          || List.hd a &amp;&amp; List.hd b))
                        =
                        (int_of_bits (List.tl a) + int_of_bits (List.tl b))
                        + int_of_bit
                          (not (List.hd a) = List.hd b &amp;&amp; cin
                           || List.hd a &amp;&amp; List.hd b)))
                || not (List.length a = List.length b))
               || int_of_bits (ripple_carry_adder a b cin) =
                  (int_of_bits a + int_of_bits b) + int_of_bit cin])</pre><ul><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-e739a79a-7a73-47ae-a2a4-4889b65857ed"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(((not (b &lt;&gt; []) || not (a &lt;&gt; []))
  || not
     (not (List.length (List.tl a) = List.length (List.tl b))
      || int_of_bits
         (ripple_carry_adder (List.tl a) (List.tl b)
          (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
         =
         (int_of_bits (List.tl a) + int_of_bits (List.tl b))
         + int_of_bit
           (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b)))
 || not (List.length a = List.length b))
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + int_of_bit cin</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.782s, &quot;1&quot;]
  (((not (b &lt;&gt; []) || not (a &lt;&gt; []))
    || not
       (not (List.length (List.tl a) = List.length (List.tl b))
        || int_of_bits
           (ripple_carry_adder (List.tl a) (List.tl b)
            (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b))
           =
           (int_of_bits (List.tl a) + int_of_bits (List.tl b))
           + int_of_bit
             (not (List.hd a) = List.hd b &amp;&amp; cin || List.hd a &amp;&amp; List.hd b)))
   || not (List.length a = List.length b))
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + int_of_bit cin</pre></li><li><div><h6>simplify</h6><div class="imandra-table" id="table-a63ad838-9193-4a4e-9ec5-533215e73e9f"><table><tr><td><b>into</b></td><td><pre>true</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[List.length, List.length, List.length, List.length, List.length,
 List.length, List.length, List.length, List.length, List.length,
 int_of_bits, int_of_bits, int_of_bits, ripple_carry_adder]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><pre>single_adder_circuit_correct</pre></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li></ul></td></tr></table></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-e739a79a-7a73-47ae-a2a4-4889b65857ed';
  fold.hydrate(target);
});
</script></div></div></li><li><div><h5>subproof</h5><div class="imandra-fold panel panel-default" id="fold-f88c832d-c828-4988-a088-a444ef3e9627"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>(not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
|| int_of_bits (ripple_carry_adder a b cin) =
   (int_of_bits a + int_of_bits b) + int_of_bit cin</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.782s, &quot;2&quot;]
  (not (List.length a = List.length b) || b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
  || int_of_bits (ripple_carry_adder a b cin) =
     (int_of_bits a + int_of_bits b) + int_of_bit cin</pre></li><li><div><div><h6>simplify</h6><div class="imandra-table" id="table-f94f4b12-00a0-442a-8bd7-a0ae04b6e79a"><table><tr><td><b>into</b></td><td><pre>(((((not (List.length a = 0) || b &lt;&gt; [])
    || 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)
   || cin)
  &amp;&amp; ((((not (0 = List.length b) || a &lt;&gt; []) || not (b &lt;&gt; []))
       || 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)
      || cin))
 &amp;&amp; (((not (List.length a = 0) || b &lt;&gt; [])
      || int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin)
     || not cin))
&amp;&amp; ((((not (0 = List.length b) || a &lt;&gt; []) || not (b &lt;&gt; []))
     || int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin)
    || not cin)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[List.length, List.length, List.length, List.length, int_of_bits,
 int_of_bits, ripple_carry_adder]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li><li><pre>List.len_nonnegative</pre></li></ul></td></tr></table></div></div><ul><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li><li><pre>Subproof</pre></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f88c832d-c828-4988-a088-a444ef3e9627';
  fold.hydrate(target);
});
</script></div></div></li></ul></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c6cad87c-bd72-429b-9efc-e226a8b603ca';
  fold.hydrate(target);
});
</script></div></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cdccb5f7-e67c-4218-b8d4-dc63f8a1dfce';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-c02186cb-583f-47ba-86ea-83a2e12b48eb"><textarea style="display: none">digraph &quot;proof&quot; {
p_325 [label=&quot;Start (List.length :var_0: = List.length :var_1:\l       ==\&gt; int_of_bits (ripple_carry_adder :var_0: :var_1: :var_2:) =\l           (int_of_bits :var_0: + int_of_bits :var_1:) + int_of_bit :var_2:\l       :name \&quot;Goal\&quot; :time 0.785s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_325 -&gt; p_323 [label=&quot;&quot;];
subgraph cluster_324 {
  color=blue;
p_323 [label=&quot;Start (not (List.length a = List.length b)\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + int_of_bit cin\l       :name \&quot;1\&quot; :time 0.785s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_323 -&gt; p_322 [label=&quot;&quot;];
p_322 [label=&quot;Induct ((functional ripple_carry_adder),\l        :scheme (not (b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; []) ==\&gt; φ a cin b)\l                &amp;&amp; ((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l                    &amp;&amp; φ (List.tl a)\l                       (adder_carry_out (List.hd a) (List.hd b) cin)\l                       (List.tl b)\l                    ==\&gt; φ a cin b))&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_322 -&gt; p_321 [label=&quot;&quot;];
p_321 [label=&quot;Split (((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [] \|\| not (List.length a = List.length b))\l        \|\| int_of_bits (ripple_carry_adder a b cin) =\l           (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       &amp;&amp; ((not\l            ((b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l             &amp;&amp; (not (List.length (List.tl a) = List.length (List.tl b))\l                 \|\| int_of_bits\l                    (ripple_carry_adder (List.tl a) (List.tl b)\l                     (not (List.hd a) = List.hd b &amp;&amp; cin\l                      \|\| List.hd a &amp;&amp; List.hd b))\l                    =\l                    (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                    + int_of_bit\l                      (not (List.hd a) = List.hd b &amp;&amp; cin\l                       \|\| List.hd a &amp;&amp; List.hd b)))\l            \|\| not (List.length a = List.length b))\l           \|\| int_of_bits (ripple_carry_adder a b cin) =\l              (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       :cases [(not (List.length a = List.length b) \|\| b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l               \|\| int_of_bits (ripple_carry_adder a b cin) =\l                  (int_of_bits a + int_of_bits b) + int_of_bit cin;\l               (((not (b \&lt;\&gt; []) \|\| not (a \&lt;\&gt; []))\l                 \|\| not\l                    (not (List.length (List.tl a) = List.length (List.tl b))\l                     \|\| int_of_bits\l                        (ripple_carry_adder (List.tl a) (List.tl b)\l                         (not (List.hd a) = List.hd b &amp;&amp; cin\l                          \|\| List.hd a &amp;&amp; List.hd b))\l                        =\l                        (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                        + int_of_bit\l                          (not (List.hd a) = List.hd b &amp;&amp; cin\l                           \|\| List.hd a &amp;&amp; List.hd b)))\l                \|\| not (List.length a = List.length b))\l               \|\| int_of_bits (ripple_carry_adder a b cin) =\l                  (int_of_bits a + int_of_bits b) + int_of_bit cin])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_321 -&gt; p_301 [label=&quot;&quot;];
subgraph cluster_302 {
  color=blue;
p_301 [label=&quot;Start ((((not (b \&lt;\&gt; []) \|\| not (a \&lt;\&gt; []))\l         \|\| not\l            (not (List.length (List.tl a) = List.length (List.tl b))\l             \|\| int_of_bits\l                (ripple_carry_adder (List.tl a) (List.tl b)\l                 (not (List.hd a) = List.hd b &amp;&amp; cin\l                  \|\| List.hd a &amp;&amp; List.hd b))\l                =\l                (int_of_bits (List.tl a) + int_of_bits (List.tl b))\l                + int_of_bit\l                  (not (List.hd a) = List.hd b &amp;&amp; cin\l                   \|\| List.hd a &amp;&amp; List.hd b)))\l        \|\| not (List.length a = List.length b))\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + int_of_bit cin\l       :name \&quot;1\&quot; :time 0.782s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_301 -&gt; p_300 [label=&quot;&quot;];
p_300 [label=&quot;Simplify (true\l          :expansions [List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       int_of_bits;\l                       int_of_bits;\l                       int_of_bits;\l                       ripple_carry_adder]\l          :rw [single_adder_circuit_correct]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_321 -&gt; p_319 [label=&quot;&quot;];
subgraph cluster_320 {
  color=blue;
p_319 [label=&quot;Start ((not (List.length a = List.length b) \|\| b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; [])\l       \|\| int_of_bits (ripple_carry_adder a b cin) =\l          (int_of_bits a + int_of_bits b) + int_of_bit cin\l       :name \&quot;2\&quot; :time 0.782s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_319 -&gt; p_318 [label=&quot;&quot;];
p_318 [label=&quot;Simplify ((((((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l              \|\| 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l             \|\| cin)\l            &amp;&amp; ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l                 \|\| 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l                \|\| cin))\l           &amp;&amp; (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l                \|\| int_of_bit true =\l                   (int_of_bits a + int_of_bits b) + int_of_bit cin)\l               \|\| not cin))\l          &amp;&amp; ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l               \|\| int_of_bit true =\l                  (int_of_bits a + int_of_bits b) + int_of_bit cin)\l              \|\| not cin)\l          :expansions [List.length;\l                       List.length;\l                       List.length;\l                       List.length;\l                       int_of_bits;\l                       int_of_bits;\l                       ripple_carry_adder]\l          :rw []\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_318 -&gt; p_304 [label=&quot;&quot;];
subgraph cluster_305 {
  color=blue;
p_304 [label=&quot;Start ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l        \|\| int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       \|\| not cin :name \&quot;2.1\&quot; :time 0.671s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_304 -&gt; p_303 [label=&quot;&quot;];
p_303 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_318 -&gt; p_308 [label=&quot;&quot;];
subgraph cluster_309 {
  color=blue;
p_308 [label=&quot;Start (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l        \|\| int_of_bit true = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       \|\| not cin :name \&quot;2.2\&quot; :time 0.671s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_308 -&gt; p_307 [label=&quot;&quot;];
p_307 [label=&quot;Simplify (((not (a = []) \|\| not cin) \|\| b \&lt;\&gt; []) \|\| 0 = int_of_bits a\l          :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_307 -&gt; p_306 [label=&quot;&quot;];
p_306 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_318 -&gt; p_311 [label=&quot;&quot;];
subgraph cluster_312 {
  color=blue;
p_311 [label=&quot;Start ((((not (0 = List.length b) \|\| a \&lt;\&gt; []) \|\| not (b \&lt;\&gt; []))\l        \|\| 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       \|\| cin :name \&quot;2.3\&quot; :time 0.672s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_311 -&gt; p_310 [label=&quot;&quot;];
p_310 [label=&quot;Simplify (true :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
p_318 -&gt; p_316 [label=&quot;&quot;];
subgraph cluster_317 {
  color=blue;
p_316 [label=&quot;Start (((not (List.length a = 0) \|\| b \&lt;\&gt; [])\l        \|\| 0 = (int_of_bits a + int_of_bits b) + int_of_bit cin)\l       \|\| cin :name \&quot;2.4\&quot; :time 0.672s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_316 -&gt; p_315 [label=&quot;&quot;];
p_315 [label=&quot;Simplify (((not (a = []) \|\| b \&lt;\&gt; []) \|\| 0 = int_of_bits a + int_of_bit false)\l          \|\| cin :expansions [int_of_bits] :rw [List.len_zero_is_empty]\l          :fc [List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative;\l               List.len_nonnegative])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_315 -&gt; p_314 [label=&quot;&quot;];
p_314 [label=&quot;Simplify ((b \&lt;\&gt; [] \|\| 0 = int_of_bit false) \|\| cin :expansions [int_of_bits]\l          :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_314 -&gt; p_299 [label=&quot;&quot;];
subgraph cluster_313 {
  color=blue;
p_299 [label=&quot;Start ((:var_1: \&lt;\&gt; [] \|\| 0 = 0) \|\| :var_3: :time 0.023s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_299 -&gt; p_298 [label=&quot;&quot;];
p_298 [label=&quot;Simplify (true :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_298 -&gt; p_297 [label=&quot;&quot;];
p_297 -&gt; p_z3_62 [label=&quot;&quot;,fontname=&quot;courier&quot;,fontsize=14];
p_z3_62 [label=&quot;(mp (asserted (not true)) (rewrite (= (not true) false)) false)&quot;,shape=box,fontname=&quot;courier&quot;,fontsize=14];p_297 [label=&quot;unsat&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
}
}
}
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-c02186cb-583f-47ba-86ea-83a2e12b48eb';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-aeef2d55-72f3-4572-a0e6-48ac9a01565e';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-8745e2e2-8b89-49c9-9403-078f0d4ff9f2';
  fold.hydrate(target);
});
</script></div></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>If we inspect the proof, we'll find that our rewrite rule <code>single_adder_circuit_correct</code> was used to close our key subgoal under our induction. Beautiful!</p>
<h1 id="Examining-a-flawed-circuit-with-Imandra">Examining a flawed circuit with Imandra<a class="anchor-link" href="#Examining-a-flawed-circuit-with-Imandra">&#182;</a></h1><p>Now that we've verified our adder, let's imagine we'd instead designed a flawed version of our circut and use Imandra to analyse it.</p>
<p>Can you spot the error?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-33" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_adder_sum</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="n">not</span> <span class="o">((</span><span class="n">xor</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">||</span> <span class="n">cin</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_adder_sum : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-34" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">bad_adder_carry_out</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">=</span>
  <span class="o">((</span><span class="n">xor</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">cin</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">a</span> <span class="o">&amp;&amp;</span> <span class="n">b</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_adder_carry_out : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-35" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">verify</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span> <span class="o">-&gt;</span> 
 <span class="n">int_of_bit</span> <span class="o">(</span><span class="n">bad_adder_sum</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">)</span>
    <span class="o">=</span> <span class="n">int_of_bit</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">b</span> <span class="o">+</span> <span class="n">int_of_bit</span> <span class="n">cin</span> <span class="o">-</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="o">(</span><span class="n">int_of_bit</span> <span class="o">(</span><span class="n">bad_adder_carry_out</span> <span class="n">a</span> <span class="n">b</span> <span class="n">cin</span><span class="o">))))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool -&gt; bool -&gt; bool -&gt; bool = &lt;fun&gt;
module CX : sig val a : bool val b : bool val cin : bool end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Counterexample (after 0 steps, 0.025s):
 let (a : bool) = true
 let (b : bool) = true
 let (cin : bool) = true
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px dashed #D84315; border-bottom: 1px dashed #D84315"><i class="fa fa-times-circle-o" style="margin-right: 0.5em; color: #D84315"></i><span>Refuted</span></div><div><div class="imandra-alternatives" id="alt-cd919f3d-e7d4-4e39-9c40-ebc0bf2d4477"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-22e0bb5b-2d1f-4c16-bfef-beaa62e31578"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not\l((if not a = b \|\| cin then 0 else 1) =\l (((if a then 1 else 0) + (if b then 1 else 0)) + (if cin then 1 else 0))\l + -2 * (if not a = b &amp;&amp; cin \|\| a &amp;&amp; b then 1 else 0))&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-22e0bb5b-2d1f-4c16-bfef-beaa62e31578';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-388a85cd-4791-4ded-852e-6c7143900fe1"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-6fc77668-f51f-4f81-bbac-21f6586cbaba"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-bda0a5fd-643d-400a-8e92-a3ad92cbb6a5"><table><tr><td><b>ground_instances</b></td><td>0</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.025s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-ef8be9eb-5a38-4895-abb3-77b16b914877"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-d31a7380-9d43-4327-8f0b-a7be157ca6c0"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-080cc571-4c4e-4034-9a53-dd2add86e904"><table><tr><td><b>num checks</b></td><td>1</td></tr><tr><td><b>arith assert lower</b></td><td>5</td></tr><tr><td><b>arith pivots</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>761</td></tr><tr><td><b>mk clause</b></td><td>39</td></tr><tr><td><b>mk bool var</b></td><td>38</td></tr><tr><td><b>arith assert upper</b></td><td>7</td></tr><tr><td><b>decisions</b></td><td>4</td></tr><tr><td><b>propagations</b></td><td>14</td></tr><tr><td><b>arith fixed eqs</b></td><td>1</td></tr><tr><td><b>arith assert diseq</b></td><td>1</td></tr><tr><td><b>final checks</b></td><td>1</td></tr><tr><td><b>added eqs</b></td><td>9</td></tr><tr><td><b>del clause</b></td><td>2</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>35.150000</td></tr><tr><td><b>max memory</b></td><td>75.740000</td></tr><tr><td><b>num allocs</b></td><td>15313222168.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-ef8be9eb-5a38-4895-abb3-77b16b914877';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-be12da91-27d0-409a-a379-c4889befb230"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.025s]
  (if not (not (:var_0: = :var_1:) || :var_2:) then 1 else 0) =
  (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))
   + (if :var_2: then 1 else 0))
  -
  (2
   * (if not (:var_0: = :var_1:) &amp;&amp; :var_2: || :var_0: &amp;&amp; :var_1: then 1
      else 0))</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-6105171e-ecb7-4732-8951-fb954aac1c9d"><table><tr><td><b>into</b></td><td><pre>(if not :var_0: = :var_1: || :var_2: then 0 else 1) =
(((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))
 + (if :var_2: then 1 else 0))
+ -2
  * (if not :var_0: = :var_1: &amp;&amp; :var_2: || :var_0: &amp;&amp; :var_1: then 1 else 0)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (a : bool) = true
 let (b : bool) = true
 let (cin : bool) = true
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-be12da91-27d0-409a-a379-c4889befb230';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-a6a169ea-a87a-40fa-ba2d-e74e91316099"><textarea style="display: none">digraph &quot;proof&quot; {
p_328 [label=&quot;Start ((if not (not (:var_0: = :var_1:) \|\| :var_2:) then 1 else 0) =\l       (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))\l        + (if :var_2: then 1 else 0))\l       -\l       (2\l        * (if not (:var_0: = :var_1:) &amp;&amp; :var_2: \|\| :var_0: &amp;&amp; :var_1: \l           then 1 else 0))\l       :time 0.025s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_328 -&gt; p_327 [label=&quot;&quot;];
p_327 [label=&quot;Simplify ((if not :var_0: = :var_1: \|\| :var_2: then 0 else 1) =\l          (((if :var_0: then 1 else 0) + (if :var_1: then 1 else 0))\l           + (if :var_2: then 1 else 0))\l          + -2\l            * (if not :var_0: = :var_1: &amp;&amp; :var_2: \|\| :var_0: &amp;&amp; :var_1:\l               then 1 else 0)\l          :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_327 -&gt; p_326 [label=&quot;&quot;];
p_326 [label=&quot;Sat (Some  let (a : bool) = true\l let (b : bool) = true\l let (cin : bool) = true\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-a6a169ea-a87a-40fa-ba2d-e74e91316099';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-6fc77668-f51f-4f81-bbac-21f6586cbaba';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-388a85cd-4791-4ded-852e-6c7143900fe1';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-cd919f3d-e7d4-4e39-9c40-ebc0bf2d4477';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-36" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">bad_ripple_carry_adder</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span><span class="o">)</span> <span class="o">(</span><span class="n">cin</span> <span class="o">:</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">:</span> <span class="kt">bool</span> <span class="kt">list</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span> <span class="k">with</span>
  <span class="o">|</span> <span class="n">a1</span> <span class="o">::</span> <span class="n">a&#39;</span><span class="o">,</span> <span class="n">b1</span> <span class="o">::</span> <span class="n">b&#39;</span> <span class="o">-&gt;</span>
    <span class="n">bad_adder_sum</span> <span class="n">a1</span> <span class="n">b1</span> <span class="n">cin</span> <span class="o">::</span>
    <span class="n">bad_ripple_carry_adder</span> <span class="n">a&#39;</span> <span class="n">b&#39;</span> <span class="o">(</span><span class="n">bad_adder_carry_out</span> <span class="n">a1</span> <span class="n">b1</span> <span class="n">cin</span><span class="o">)</span>
  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="k">if</span> <span class="n">cin</span> <span class="k">then</span> <span class="o">[</span><span class="n">cin</span><span class="o">]</span> <span class="k">else</span> <span class="bp">[]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val bad_ripple_carry_adder : bool list -&gt; bool list -&gt; bool -&gt; bool list =
  &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-25104ee6-1bb8-48b7-adab-661fa1e8195a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-4a1ecb8d-654b-4d47-a58e-36e830614d56"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `bad_ripple_carry_adder (List.tl a) (List.tl b)
(bad_adder_carry_out (List.hd a) (List.hd b) cin)` from `bad_ripple_carry_adder a b cin`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-73ec280a-a246-4020-b0a7-5cd2b667625f"><table><tr><td><b>original</b></td><td>bad_ripple_carry_adder a b cin</td></tr><tr><td><b>sub</b></td><td>bad_ripple_carry_adder (List.tl a) (List.tl b)
(bad_adder_carry_out (List.hd a) (List.hd b) cin)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count a)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl a))</td></tr><tr><td><b>path</b></td><td>[b &lt;&gt; [] &amp;&amp; a &lt;&gt; []]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-6489dba0-9ea7-4abb-829a-d90955c4e0c5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-7c8a1898-478a-4eef-b3fe-d362ec48fabe"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-15e23e9a-709d-4e7d-abbb-e79d68f30163"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.020s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-f127b64a-9be3-4a37-a3a5-a55dc0f47c39"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-2c95a890-e48b-42f3-8e1e-03b604de246c"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-80ba9d7b-2919-44e3-9c4a-d9036effbbdd"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>8</td></tr><tr><td><b>arith pivots</b></td><td>4</td></tr><tr><td><b>rlimit count</b></td><td>2128</td></tr><tr><td><b>mk clause</b></td><td>30</td></tr><tr><td><b>datatype occurs check</b></td><td>22</td></tr><tr><td><b>mk bool var</b></td><td>84</td></tr><tr><td><b>arith assert upper</b></td><td>5</td></tr><tr><td><b>datatype splits</b></td><td>6</td></tr><tr><td><b>decisions</b></td><td>28</td></tr><tr><td><b>arith add rows</b></td><td>6</td></tr><tr><td><b>propagations</b></td><td>30</td></tr><tr><td><b>conflicts</b></td><td>9</td></tr><tr><td><b>arith fixed eqs</b></td><td>4</td></tr><tr><td><b>datatype accessor ax</b></td><td>10</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>14</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>87</td></tr><tr><td><b>del clause</b></td><td>17</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>38.350000</td></tr><tr><td><b>max memory</b></td><td>75.740000</td></tr><tr><td><b>num allocs</b></td><td>15432090747.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f127b64a-9be3-4a37-a3a5-a55dc0f47c39';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-55039f66-0c83-4dbb-b861-a37299a408c7"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.020s]
  (b &lt;&gt; [] &amp;&amp; a &lt;&gt; [])
  &amp;&amp; Ordinal.count a &gt;= 0 &amp;&amp; Ordinal.count (List.tl a) &gt;= 0
  ==&gt; not ((List.tl b) &lt;&gt; [] &amp;&amp; (List.tl a) &lt;&gt; [])
      || Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
         (Ordinal.Int (Ordinal.count a))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-7b0a3767-ee95-4327-899f-6efa5c77c56e"><table><tr><td><b>into</b></td><td><pre>(not
 (((b &lt;&gt; [] &amp;&amp; a &lt;&gt; []) &amp;&amp; Ordinal.count a &gt;= 0)
  &amp;&amp; Ordinal.count (List.tl a) &gt;= 0)
 || not ((List.tl b) &lt;&gt; [] &amp;&amp; (List.tl a) &lt;&gt; []))
|| Ordinal.&lt;&lt; (Ordinal.Int (Ordinal.count (List.tl a)))
   (Ordinal.Int (Ordinal.count a))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-402171b5-1e93-4596-9814-5c2d785cd625"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_116| (|Ordinal.Int_107|
                    (|count_`bool list`_2464| (|get.::.1_2450| …</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-93c304f3-8264-4011-aa71-a2693ac56d93"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_2464| (|get.::.1_2450| a_2451))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-f2ed3b16-b160-4f31-bf90-f2fdbfebd25e"><table><tr><td><b>expr</b></td><td><pre>(|count_`bool list`_2464| a_2451)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (= (|count_`bool list`_2464| a_2451)
              (+ 1 (|count_`bool list`_2464| (|get.:…</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-55039f66-0c83-4dbb-b861-a37299a408c7';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-7c8a1898-478a-4eef-b3fe-d362ec48fabe';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6489dba0-9ea7-4abb-829a-d90955c4e0c5';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-4a1ecb8d-654b-4d47-a58e-36e830614d56';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-25104ee6-1bb8-48b7-adab-661fa1e8195a';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Verifying%20a%20Ripple%20Carry%20Adder.ipynb%23try-cell-37" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">int_of_bits</span> <span class="o">(</span><span class="n">bad_ripple_carry_adder</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">false</span><span class="o">)</span> <span class="o">&lt;&gt;</span> <span class="n">int_of_bits</span> <span class="n">a</span> <span class="o">+</span> <span class="n">int_of_bits</span> <span class="n">b</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool list -&gt; bool list -&gt; bool = &lt;fun&gt;
module CX : sig val a : bool list val b : bool list end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 5 steps, 0.016s):
 let (a : bool list) = []
 let (b : bool list) = [true]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-8c7b6f96-48ac-42f3-9dff-0c3f3180a8e8"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-a28032b4-0dc1-4564-90ba-76bb0b984185"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;not\l(int_of_bits (bad_ripple_carry_adder a b false) =\l int_of_bits a + int_of_bits b)&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_550 [label=&quot;int_of_bits (List.tl (bad_ripple_carry_adder a b false))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_553 -&gt; call_550 [label=&quot;calls&quot;];
call_119 [label=&quot;int_of_bits (List.tl b)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_119 -&gt; expr_766 [label=&quot;=&quot;];
expr_766 [label=&quot;if List.tl b = [] then 0\lelse\l  (if List.hd (List.tl b) then 1 else 0)\l  + 2 * int_of_bits (List.tl (List.tl b))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_122 -&gt; call_119 [label=&quot;calls&quot;];
call_17 [label=&quot;int_of_bits (bad_ripple_carry_adder a b false)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_17 -&gt; expr_553 [label=&quot;=&quot;];
expr_553 [label=&quot;if bad_ripple_carry_adder a b false = [] then 0\lelse\l  (if List.hd (bad_ripple_carry_adder a b false) then 1 else 0)\l  + 2 * int_of_bits (List.tl (bad_ripple_carry_adder a b false))&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_17 [label=&quot;calls&quot;];
call_171 [label=&quot;int_of_bits (List.tl a)&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_174 -&gt; call_171 [label=&quot;calls&quot;];
call_18 [label=&quot;int_of_bits a&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_18 -&gt; expr_174 [label=&quot;=&quot;];
expr_174 [label=&quot;if a = [] then 0\lelse (if List.hd a then 1 else 0) + 2 * int_of_bits (List.tl a)&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_18 [label=&quot;calls&quot;];
call_19 [label=&quot;int_of_bits b&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_19 -&gt; expr_122 [label=&quot;=&quot;];
expr_122 [label=&quot;if b = [] then 0\lelse (if List.hd b then 1 else 0) + 2 * int_of_bits (List.tl b)&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_19 [label=&quot;calls&quot;];
call_763 [label=&quot;int_of_bits (List.tl (List.tl b))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_766 -&gt; call_763 [label=&quot;calls&quot;];
call_16 [label=&quot;bad_ripple_carry_adder a b false&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_16 -&gt; expr_279 [label=&quot;=&quot;];
expr_279 [label=&quot;if b \&lt;\&gt; [] &amp;&amp; a \&lt;\&gt; []\lthen\l  (not (not (List.hd a) = List.hd b \|\| false)) ::\l  (bad_ripple_carry_adder (List.tl a) (List.tl b)\l   (not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b))\lelse []&quot;,shape=box,style=filled,color=&quot;grey&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_16 [label=&quot;calls&quot;];
call_277 [label=&quot;bad_ripple_carry_adder (List.tl a) (List.tl b)\l(not (List.hd a) = List.hd b &amp;&amp; false \|\| List.hd a &amp;&amp; List.hd b)&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
expr_279 -&gt; call_277 [label=&quot;calls&quot;];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-a28032b4-0dc1-4564-90ba-76bb0b984185';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-015a604c-ac6d-47b5-80bb-2c14a4312616"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-71a56823-acec-4e77-9b3a-74f8af28ee05"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-62a2ee3d-6f6d-4f77-ac6e-fab6a018779a"><table><tr><td><b>ground_instances</b></td><td>5</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-cd4386fe-6ba6-455a-9138-83c8615390d4"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-7a0f621b-04db-4f24-8b3e-f8076095cdf7"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-f4302bf9-bc36-4785-ac5d-addf5891a9b7"><table><tr><td><b>arith offset eqs</b></td><td>5</td></tr><tr><td><b>num checks</b></td><td>11</td></tr><tr><td><b>arith assert lower</b></td><td>45</td></tr><tr><td><b>arith patches_succ</b></td><td>1</td></tr><tr><td><b>arith pivots</b></td><td>33</td></tr><tr><td><b>rlimit count</b></td><td>6244</td></tr><tr><td><b>mk clause</b></td><td>165</td></tr><tr><td><b>datatype occurs check</b></td><td>63</td></tr><tr><td><b>mk bool var</b></td><td>296</td></tr><tr><td><b>arith gcd tests</b></td><td>8</td></tr><tr><td><b>arith assert upper</b></td><td>55</td></tr><tr><td><b>datatype splits</b></td><td>25</td></tr><tr><td><b>decisions</b></td><td>162</td></tr><tr><td><b>arith add rows</b></td><td>93</td></tr><tr><td><b>arith bound prop</b></td><td>8</td></tr><tr><td><b>propagations</b></td><td>178</td></tr><tr><td><b>arith patches</b></td><td>2</td></tr><tr><td><b>conflicts</b></td><td>20</td></tr><tr><td><b>arith fixed eqs</b></td><td>19</td></tr><tr><td><b>datatype accessor ax</b></td><td>15</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>arith assert diseq</b></td><td>14</td></tr><tr><td><b>datatype constructor ax</b></td><td>33</td></tr><tr><td><b>final checks</b></td><td>20</td></tr><tr><td><b>added eqs</b></td><td>335</td></tr><tr><td><b>del clause</b></td><td>70</td></tr><tr><td><b>arith ineq splits</b></td><td>1</td></tr><tr><td><b>arith eq adapter</b></td><td>48</td></tr><tr><td><b>memory</b></td><td>38.900000</td></tr><tr><td><b>max memory</b></td><td>75.740000</td></tr><tr><td><b>num allocs</b></td><td>15644021890.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cd4386fe-6ba6-455a-9138-83c8615390d4';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-f64edc5d-cbbc-416f-b877-2d193dd29b61"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  not
  (int_of_bits (bad_ripple_carry_adder :var_0: :var_1: false) =
   int_of_bits :var_0: + int_of_bits :var_1:)</pre></li><li><div>unroll<div class="imandra-table" id="table-3f404625-02f1-4934-b54e-d56431adaa4a"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 b_1056)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-a48b7560-a25f-4071-90d8-ee083169d784"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 a_1055)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9e360ad5-c7c6-481d-8e66-64cef525490c"><table><tr><td><b>expr</b></td><td><pre>(bad_ripple_carry_adder_1047 a_1055 b_1056 false)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0d815475-ea20-473c-9945-902642ccbc85"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 (bad_ripple_carry_adder_1047 a_1055 b_1056 false))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-79786c18-b0af-44a9-8f29-e42b7a92f625"><table><tr><td><b>expr</b></td><td><pre>(int_of_bits_1017 (|get.::.1_2471| b_1056))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (a : bool list) = []
 let (b : bool list) = [true]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-f64edc5d-cbbc-416f-b877-2d193dd29b61';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-94f48f3d-fb49-4212-b187-e96f1b5f4053"><textarea style="display: none">digraph &quot;proof&quot; {
p_341 [label=&quot;Start (not\l       (int_of_bits (bad_ripple_carry_adder :var_0: :var_1: false) =\l        int_of_bits :var_0: + int_of_bits :var_1:)\l       :time 0.016s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_341 -&gt; p_340 [label=&quot;&quot;];
p_340 [label=&quot;Unroll ([int_of_bits b], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_340 -&gt; p_339 [label=&quot;&quot;];
p_339 [label=&quot;Unroll ([int_of_bits a], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_339 -&gt; p_338 [label=&quot;&quot;];
p_338 [label=&quot;Unroll ([bad_ripple_carry_adder a b false], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_338 -&gt; p_337 [label=&quot;&quot;];
p_337 [label=&quot;Unroll ([int_of_bits (bad_ripple_carry_adder a b false)], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_337 -&gt; p_336 [label=&quot;&quot;];
p_336 [label=&quot;Unroll ([int_of_bits (List.tl b)], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_336 -&gt; p_335 [label=&quot;&quot;];
p_335 [label=&quot;Sat (Some  let (a : bool list) = []\l let (b : bool list) = [true]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-94f48f3d-fb49-4212-b187-e96f1b5f4053';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-71a56823-acec-4e77-9b3a-74f8af28ee05';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-015a604c-ac6d-47b5-80bb-2c14a4312616';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-8c7b6f96-48ac-42f3-9dff-0c3f3180a8e8';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Happy verifying!</p>
</div>
</div>
</div>
                    </div>

                    <div class="sidebar-right">
                        <div class="sidebar-right__menu">
                            
                            <a class="sidebar-right__menu-item sidebar-right__menu-item--h1" href="#Verifying-a-Ripple-Carry-Adder-in-Imandra">Verifying a Ripple-Carry Adder in Imandra</a>
                            
                            <a class="sidebar-right__menu-item sidebar-right__menu-item--h1" href="#Building-the-circuit-in-Imandra">Building the circuit in Imandra</a>
                            
                            <a class="sidebar-right__menu-item sidebar-right__menu-item--h1" href="#Relating-bit-sequences-to-natural-numbers">Relating bit sequences to natural numbers</a>
                            
                            <a class="sidebar-right__menu-item sidebar-right__menu-item--h1" href="#Verifying-our-circuit:-The-adder-is-correct-for-all-possible-inputs">Verifying our circuit: The adder is correct for all possible inputs</a>
                            
                            <a class="sidebar-right__menu-item sidebar-right__menu-item--h1" href="#Examining-a-flawed-circuit-with-Imandra">Examining a flawed circuit with Imandra</a>
                            
                        </div>
                    </div></article>
            </main>
            <footer class="footer">
                <a class="copyrights"href="http://imandra.ai">&#9400; 2018 - 2019 Imandra Inc. All rights reserved.</a>
            </footer>
        </div>
    
 


    </body>
</html>
