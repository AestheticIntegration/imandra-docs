<!DOCTYPE html>
<html>
    <head><meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Imandra Documentation - Crossing the River Safely</title>
        <meta property="og:url" content="https://docs.imandra.ai/imandra-docs/notebooks/crossing-river-safely/">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Imandra Documentation - Crossing the River Safely">
        <meta property="og:description" content="River example notebooks">
        <meta property="og:image" content="https://storage.googleapis.com/imandra-assets/images/og_image_default_i78.jpg">


        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116937440-6"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'UA-116937440-1');
        </script>
        <script type="text/javascript"> var sc_project=11767520; var sc_invisible=1; var sc_security="fa7e88d1"; </script>
        <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
        <noscript><div class="statcounter">
            <a title="Web Analytics" href="http://statcounter.com/" target="_blank">
                <img class="statcounter" src="//c.statcounter.com/11767520/0/fa7e88d1/1/" alt="Web Analytics"></a>
        </div></noscript>
        

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i%7CMerriweather:300,300i,400,400i%7CRoboto+Slab:300,300i,400,400i">

        <link rel="stylesheet" href="/imandra-docs/static/style/style.min.c7df16ea.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/nbextensions/nbimandra/styles.b466ce6f.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/docs-styles.b9de737f.css" type="text/css">
        
        <link rel="stylesheet" href="/imandra-docs/static/jekyll-styles.16c4c669.css" type="text/css">
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script src="/imandra-docs/static/nbimandra-rjs-bundle.b85e58fd.js"></script>

        <style type="text/css">
         .highlight .hll { background-color: #ffffcc }
         .highlight  { background: #f8f8f8; }
         .highlight .c { color: #408080; font-style: italic } /* Comment */
         .highlight .err { border: 1px solid #FF0000 } /* Error */
         .highlight .k { color: #008000; font-weight: bold } /* Keyword */
         .highlight .o { color: #666666 } /* Operator */
         .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
         .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
         .highlight .cp { color: #BC7A00 } /* Comment.Preproc */
         .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
         .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
         .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
         .highlight .gd { color: #A00000 } /* Generic.Deleted */
         .highlight .ge { font-style: italic } /* Generic.Emph */
         .highlight .gr { color: #FF0000 } /* Generic.Error */
         .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
         .highlight .gi { color: #00A000 } /* Generic.Inserted */
         .highlight .go { color: #888888 } /* Generic.Output */
         .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
         .highlight .gs { font-weight: bold } /* Generic.Strong */
         .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
         .highlight .gt { color: #0044DD } /* Generic.Traceback */
         .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
         .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
         .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
         .highlight .kp { color: #008000 } /* Keyword.Pseudo */
         .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
         .highlight .kt { color: #B00040 } /* Keyword.Type */
         .highlight .m { color: #666666 } /* Literal.Number */
         .highlight .s { color: #BA2121 } /* Literal.String */
         .highlight .na { color: #7D9029 } /* Name.Attribute */
         .highlight .nb { color: #008000 } /* Name.Builtin */
         .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
         .highlight .no { color: #880000 } /* Name.Constant */
         .highlight .nd { color: #AA22FF } /* Name.Decorator */
         .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
         .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
         .highlight .nf { color: #0000FF } /* Name.Function */
         .highlight .nl { color: #A0A000 } /* Name.Label */
         .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
         .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
         .highlight .nv { color: #19177C } /* Name.Variable */
         .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
         .highlight .w { color: #bbbbbb } /* Text.Whitespace */
         .highlight .mb { color: #666666 } /* Literal.Number.Bin */
         .highlight .mf { color: #666666 } /* Literal.Number.Float */
         .highlight .mh { color: #666666 } /* Literal.Number.Hex */
         .highlight .mi { color: #666666 } /* Literal.Number.Integer */
         .highlight .mo { color: #666666 } /* Literal.Number.Oct */
         .highlight .sa { color: #BA2121 } /* Literal.String.Affix */
         .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
         .highlight .sc { color: #BA2121 } /* Literal.String.Char */
         .highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
         .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
         .highlight .s2 { color: #BA2121 } /* Literal.String.Double */
         .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
         .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
         .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
         .highlight .sx { color: #008000 } /* Literal.String.Other */
         .highlight .sr { color: #BB6688 } /* Literal.String.Regex */
         .highlight .s1 { color: #BA2121 } /* Literal.String.Single */
         .highlight .ss { color: #19177C } /* Literal.String.Symbol */
         .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
         .highlight .fm { color: #0000FF } /* Name.Function.Magic */
         .highlight .vc { color: #19177C } /* Name.Variable.Class */
         .highlight .vg { color: #19177C } /* Name.Variable.Global */
         .highlight .vi { color: #19177C } /* Name.Variable.Instance */
         .highlight .vm { color: #19177C } /* Name.Variable.Magic */
         .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
        </style>

        <!-- Loading mathjax macro -->
        <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --><script>
  function handleCopyClick() {
      var el = this;
      var terminal = el.closest('.terminal');
      var highlight = terminal.getElementsByClassName('highlight')[0];
      copyToClipboardMsg(highlight);

      terminal.classList.add('terminal--hide');
      setTimeout(function () {
          terminal.classList.remove('terminal--hide');
      }, 2000);


      function copyToClipboardMsg(elem) {
          var succeed = copyToClipboard(elem);
          var msg;
          if (!succeed) {
              msg = 'Error!';
          } else {
              msg = 'Copied!';
          }

          var msgElem = terminal.querySelector('.terminal__copy-msg');
          msgElem.innerHTML = msg;
          setTimeout(function () {
              msgElem.innerHTML = 'You rock!';
          }, 1000);
      }

      function copyToClipboard(elem) {
          // create hidden text element, if it doesn't already exist
          var targetId = '_hiddenCopyText_';
          var isInput = elem.tagName === 'INPUT' || elem.tagName === 'TEXTAREA';
          var origSelectionStart, origSelectionEnd;
          if (isInput) {
              // can just use the original source element for the selection and copy
              target = elem;
              origSelectionStart = elem.selectionStart;
              origSelectionEnd = elem.selectionEnd;
          } else {
              // must use a temporary form element for the selection and copy
              target = terminal.querySelector('#' + targetId);
              if (!target) {
                  var target = document.createElement('textarea');
                  // target.style.display = 'flex';
                  // target.style.position = 'absolute';
                  // target.style.left = '-1000%';
                  target.id = targetId;
                 elem.appendChild(target);
              }
              target.textContent = elem.textContent.trim();
          }

          // select the content
          var currentFocus = document.activeElement;
          target.focus();
          target.setSelectionRange(0, target.value.length);

          // copy the selection
          var succeed;
          try {
              succeed = document.execCommand('copy');
          } catch (e) {
              succeed = false;
          }
          // restore original focus
          if (currentFocus && typeof currentFocus.focus === 'function') {
              currentFocus.focus();
          }

          if (isInput) {
              // restore prior selection
              elem.setSelectionRange(origSelectionStart, origSelectionEnd);
          } else {
              // clear temporary content
              elem.removeChild(target);
          }
          return succeed;
      }
  }
</script>
    </head>
    <body>
        <div class="background">
        </div>
        <div class="page-container">
            <main class="main-content-column">
                <!-- Jupyter (Imandra core docs) version -->
<header class="header">
    <div class="top-row-container">
        <div class="top-row">

            <div id="toggler--left" class="side__left-menu-toggler">
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="side__toggle-text">Docs</p>
            </div>

            <div class="side__logo-container">
                <a class="side__logo-link" href="/">
                    <img class="side__logo " src = "/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-docs.svg" alt="Imandra Logo" title="Imandra Logo">
                    <img class="side__logo--min " src="/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-min.svg" alt="Imandra Logo" title="Imandra Logo">

                </a>
            </div>

            <div id="toggler--right" class="side__right-menu-toggler">
                <p class="side__toggle-text">Pages</p>
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <nav id="side-nav-menu" class="side__nav-container side__nav-container--hidden">
                <ul class="side__nav-list">
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/">Documentation Home</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs">Imandra Core</a>
                        
                        <ul class="side__nav-list--sub-level-1">
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/welcome">A quick tour</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/installation">Installation</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/installation-simple">Installer</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/installation-manual-opam">Manual (opam)</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/installation-docker">Docker Image</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/installation-jupyter">Jupyter Notebook</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/installation-vscode">VSCode</a>
                                            
                                            
                                            
                                        </li>
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/logic-and-program-modes">Logic and Program modes</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/verification">Verification</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-commands">Commands</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes">Attributes</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-unrolling">Unrolling</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification">Simplification</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-blast">Blast</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction">Induction</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall">Waterfall</a>
                                            
                                            
                                            
                                        </li>
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/proving-program-termination">Proving program termination</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/decomposition">Region Decomposition</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/imandra-tools-intro">Imandra tools introduction</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/idf">Iterative Decomposition Framework</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/notebooks/region-probabilities">Region probabilities</a>
                                            
                                            
                                            
                                        </li>
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/loading-files">Multifile development</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/extracting-ocaml-modules-with-imandra-extract">Extracting OCaml modules</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/plugins">Code generation and plugins</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reflection">Reflection of terms</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                            
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/examples">Examples</a>
                                
                                
                                
                                    <div class="side__within-page-nav--sub-level-1">
                                    

  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="/imandra-docs/notebooks/examples/#Beginner">Beginner</a>
  <ul class="side__nav-list--sub-level-3  side__nav-list--sub-level-2--active">
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/webservice-auth-logic">Analysing Web-app authentication logic</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/simple-vehicle-controller">Simple vehicle controller</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/simple-stoplight-model">Simple car intersection model</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-tic-tac-toe">Tic Tac Toe with ReasonML</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-facetime-state-machines">Exploring The Apple FaceTime Bug with ReasonML State Machines</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link side__nav-link--active" href="/imandra-docs/notebooks/crossing-river-safely">Crossing the river safely</a>
      
      
      <ul class="side__nav-list--sub-level-3">
          <div class="side__within-page-nav--sub-level-3">
          
          </div>
      </ul>
      
  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="/imandra-docs/notebooks/examples/#Intermediate">Intermediate</a>
  <ul class="side__nav-list--sub-level-3  side__nav-list--sub-level-2--active">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/ubs-case-study">Analysing the UBS ATS Dark Pool</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/six-swiss-exchange-pricing">Region Decomposition - Exchange Pricing</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-an-ros-node">Creating and Verifying a ROS Node</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/key-pair-security">Key Pair Security in Imandra</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/sudoku">Solving Sudoku with Imandra</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/solver-synthesis">Synthesising a game solver in Imandra</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/exchange-implied-trading">Exchange Implied Trading</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/school-scheduler">Solving school scheduling during COVID</a>
      
      
  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="/imandra-docs/notebooks/examples/#Advanced">Advanced</a>
  <ul class="side__nav-list--sub-level-3  side__nav-list--sub-level-2--active">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/recursion-induction-and-rewriting">Recursion, Induction and Rewriting</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-merge-sort">Verifying merge sort in Imandra</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/ripple-carry-adder">Verifying a Ripple Carry Adder</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/">Region Probabilities</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/supervised-learning">Analysing Machine Learning Models</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/probabilistic-reasoning-in-reasonml">Probabilistic Reasoning in ReasonML</a>
      
      
  </li>
  
  
  
  <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
      
      <a class="side__nav-link" href="/imandra-docs/notebooks/a-comparison-with-tla-plus">A comparison with TLA+</a>
      
      
  </li>
  
  


                                    </div>
                                
                            </li>
                            
                            
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reference">Reference</a>
                                
                                
                                    <ul class="side__nav-list--sub-level-2 ">
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/odoc/imandra-base/Imandra_prelude/">Standard Library</a>
                                            
                                            
                                            
                                        </li>
                                        
                                        <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                            
                                            <a class="side__nav-link" href="/imandra-docs/odoc/">API Docs</a>
                                            
                                            
                                            
                                        </li>
                                        
                                    </ul>
                                
                                
                                
                                
                            </li>
                            
                        </ul>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/idf-py">Py IDF</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/ipl">Imandra Protocol Language</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/imandra-rule-synth">Imandra Rule Synth</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/fix-engine">FIX Engine</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>
    </div>

    <div class="background">
    </div>



    <div class="template-header">
        <div class="top-bar">
            <div class="side__nav-search">
                <input id="search" type="search" placeholder="Search">
                <div class="side__nav-search-icon">
                    <i class="fa fa-search"></i>
                </div>
            </div>

            <nav class="top-bar__nav-container">
                <a href="#" class="top-bar__toggle">≡</a>
                <div class="top-nav-bar__group ">
                    <div class="top-nav-bar__nav nav-bar--blue top-nav-bar__nav--hidden">
                        <ul class="top-nav-bar__links top-nav-bar__links--hidden-smaller-than-tablet">
                            <li class="top-nav-bar__item">
                                <a href="https://www.imandra.ai/" class="top-nav-bar__link">Home</a>
                            </li>
                            <li class="top-nav-bar__item">
                                <a href="https://try.imandra.ai/" class="top-nav-bar__link">Try</a>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--engine">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Engine</a>
                                <ul class="dropdown-content dropdown-content--engine">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--core.svg" alt="Imandra Core" title="Imandra Core Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/core">Imandra Core</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--demos.svg" alt="Demo Gallery" title="Imandra Demo Gallery Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/demos">Demo Gallery</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--docs.svg" alt="Docs" title="Docs Icon">
                                        <a class="dropdown__link" href="https://docs.imandra.ai/">Docs</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--research.svg" alt="Research" title="Research Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/research">Research</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--industries">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Industries</a>
                                <ul class="dropdown-content dropdown-content--industries">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--financial.svg" alt="Financial Markets" title="Financial Markets Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/imarkets">Financial Markets</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--autonomy.svg" alt="Autonomous Systems" title="Autonomous Systems Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/autonomy">Autonomous Systems</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--ml.svg" alt="Machine Learning" title="Machine Learning Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/ml">Machine Learning</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--government.svg" alt="Machine Learning" title="Machine Learning Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/government">Government and defense</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--media">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Media</a>
                                <ul class="dropdown-content dropdown-content--media">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--media.svg" alt="Media" title="Media Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/media">Media</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--blog.svg" alt="Blog" title="Blog Icon">
                                        <a class="dropdown__link dropdown__link--last " href="https://medium.com/imandra">Blog</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--company">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Company</a>
                                <ul class="dropdown-content dropdown-content--company">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--about.svg" alt="About" title="About Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/about">About</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--careers.svg" alt=" Careers" title="Careers Icon">
                                        <a class="dropdown__link dropdown__link--last dropdown__link--bottom" href="https://www.imandra.ai/careers">Careers</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div class="template-header__image-container template-header__image-container--jupyter">
            <div class="template-header__image" href ="/imandra-docs">
                <img class="site-specific-image" src="/imandra-docs/static/img/site_specific_image_v_2.svg">
            </div>
        </div>

    </div>



    <script>
        document.getElementById('toggler--left').addEventListener('click', function () {
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');
            document.getElementsByClassName('side__nav-container')[0].classList.toggle(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.add('top-nav-bar__nav--hidden');
        });

        document.getElementById('toggler--right').addEventListener('click', function () {
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');

            document.getElementsByClassName('side__nav-container')[0].classList.add(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.toggle(
                'top-nav-bar__nav--hidden');
        });
    </script>
</header>
                <article class="article__container article__container--notebooks">
                    <div class="main-content main-content--jupyter">
                        
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Crossing-the-River-Safely">Crossing the River Safely<a class="anchor-link" href="#Crossing-the-River-Safely">&#182;</a></h1><p>For the sake of brain scrambling, we're going to solve this <a href="https://en.wikipedia.org/wiki/Fox,_goose_and_bag_of_beans_puzzle">ancient puzzle</a> using Imandra (<a href="https://medium.com/imandra/the-wolf-goat-and-cabbage-exchange-97e7f3ff8d5a">again!</a>). As most polyvalent farmers will tell you, going to the market with your pet wolf, tastiest goat, and freshest cabbage is sometimes difficult as they tend to have appetite for one another. The good news is that there is a way to cross this river safely anyway.</p>
<p>First we should define the problem by tallying our goods and looking around.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-2" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="n">location</span> <span class="o">=</span>
  <span class="o">|</span> <span class="nc">Boat</span>
  <span class="o">|</span> <span class="nc">LeftCoast</span>
  <span class="o">|</span> <span class="nc">RightCoast</span>
  <span class="o">|</span> <span class="nc">Eaten</span>

<span class="k">type</span> <span class="n">boat</span> <span class="o">=</span>
  <span class="o">|</span> <span class="nc">Left</span>
  <span class="o">|</span> <span class="nc">Right</span>

<span class="k">type</span> <span class="n">good</span> <span class="o">=</span> <span class="nc">Cabbage</span> <span class="o">|</span> <span class="nc">Goat</span> <span class="o">|</span> <span class="nc">Wolf</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type location = Boat | LeftCoast | RightCoast | Eaten
type boat = Left | Right
type good = Cabbage | Goat | Wolf
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>This problem is delicate and will require multiple steps to be solved. Each step should take us from a <code>state</code> to another <code>state</code> (where, hopefully, no cabbage nor goat was hurt).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-4" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="n">state</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">cabbage</span> <span class="o">:</span> <span class="n">location</span><span class="o">;</span>
  <span class="n">goat</span> <span class="o">:</span> <span class="n">location</span><span class="o">;</span>
  <span class="n">wolf</span> <span class="o">:</span> <span class="n">location</span><span class="o">;</span>
  <span class="n">boat</span> <span class="o">:</span> <span class="n">boat</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type state = {
  cabbage : location;
  goat : location;
  wolf : location;
  boat : boat;
}
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We can define a few helpers:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-6" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">get_location</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span><span class="n">state</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">good</span><span class="o">)</span> <span class="o">=</span> <span class="k">match</span> <span class="n">g</span> <span class="k">with</span>
  <span class="o">|</span> <span class="nc">Cabbage</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">cabbage</span>
  <span class="o">|</span> <span class="nc">Goat</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">goat</span>
  <span class="o">|</span> <span class="nc">Wolf</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">wolf</span>

<span class="k">let</span> <span class="n">set_location</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span><span class="n">state</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">good</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span><span class="o">:</span><span class="n">location</span><span class="o">)</span> <span class="o">=</span> <span class="k">match</span> <span class="n">g</span> <span class="k">with</span>
  <span class="o">|</span> <span class="nc">Cabbage</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">cabbage</span> <span class="o">=</span> <span class="n">l</span><span class="o">}</span>
  <span class="o">|</span> <span class="nc">Goat</span>    <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">goat</span>    <span class="o">=</span> <span class="n">l</span><span class="o">}</span>
  <span class="o">|</span> <span class="nc">Wolf</span>    <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">wolf</span>    <span class="o">=</span> <span class="n">l</span><span class="o">}</span>

<span class="k">let</span> <span class="n">boat_empty</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span><span class="n">state</span><span class="o">)</span> <span class="o">=</span>
  <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">cabbage</span> <span class="o">&lt;&gt;</span> <span class="nc">Boat</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
  <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">goat</span>    <span class="o">&lt;&gt;</span> <span class="nc">Boat</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
  <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="n">wolf</span>    <span class="o">&lt;&gt;</span> <span class="nc">Boat</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val get_location : state -&gt; good -&gt; location = &lt;fun&gt;
val set_location : state -&gt; good -&gt; location -&gt; state = &lt;fun&gt;
val boat_empty : state -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Now, transition from a state to the next one is done via <em>actions</em>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-8" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="n">action</span> <span class="o">=</span>
  <span class="o">|</span> <span class="nc">Pick</span> <span class="k">of</span> <span class="n">good</span>
  <span class="o">|</span> <span class="nc">Drop</span> <span class="k">of</span> <span class="n">good</span>
  <span class="o">|</span> <span class="nc">CrossRiver</span>

<span class="k">let</span> <span class="n">process_action</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span><span class="n">state</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span><span class="o">:</span><span class="n">action</span><span class="o">)</span> <span class="o">:</span> <span class="n">state</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">m</span> <span class="k">with</span>
  <span class="o">|</span> <span class="nc">CrossRiver</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">boat</span> <span class="o">=</span> <span class="k">match</span> <span class="n">s</span><span class="o">.</span><span class="n">boat</span> <span class="k">with</span> <span class="nc">Left</span> <span class="o">-&gt;</span> <span class="nc">Right</span> <span class="o">|</span> <span class="nc">Right</span> <span class="o">-&gt;</span> <span class="nc">Left</span> <span class="o">}</span>
  <span class="o">|</span> <span class="nc">Pick</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="k">begin</span>
    <span class="k">if</span> <span class="n">not</span> <span class="o">@@</span> <span class="n">boat_empty</span> <span class="n">s</span> <span class="k">then</span> <span class="n">s</span> <span class="k">else</span>
    <span class="k">match</span> <span class="n">get_location</span> <span class="n">s</span> <span class="n">x</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">boat</span> <span class="k">with</span>
    <span class="o">|</span>  <span class="nc">LeftCoast</span> <span class="o">,</span>  <span class="nc">Left</span> <span class="o">-&gt;</span> <span class="n">set_location</span> <span class="n">s</span> <span class="n">x</span> <span class="nc">Boat</span>
    <span class="o">|</span> <span class="nc">RightCoast</span> <span class="o">,</span> <span class="nc">Right</span> <span class="o">-&gt;</span> <span class="n">set_location</span> <span class="n">s</span> <span class="n">x</span> <span class="nc">Boat</span>
    <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="k">end</span>
  <span class="o">|</span> <span class="nc">Drop</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="k">begin</span>
    <span class="k">match</span> <span class="n">get_location</span> <span class="n">s</span> <span class="n">x</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">boat</span> <span class="k">with</span>
    <span class="o">|</span> <span class="nc">Boat</span> <span class="o">,</span>  <span class="nc">Left</span> <span class="o">-&gt;</span> <span class="n">set_location</span> <span class="n">s</span> <span class="n">x</span> <span class="nc">LeftCoast</span>
    <span class="o">|</span> <span class="nc">Boat</span> <span class="o">,</span> <span class="nc">Right</span> <span class="o">-&gt;</span> <span class="n">set_location</span> <span class="n">s</span> <span class="n">x</span> <span class="nc">RightCoast</span>
    <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="k">end</span>
<span class="o">;;</span>

<span class="k">let</span> <span class="n">process_eating</span> <span class="n">s</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">s</span><span class="o">.</span><span class="n">boat</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">cabbage</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">goat</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="n">wolf</span> <span class="k">with</span>
  <span class="o">|</span> <span class="nc">Right</span><span class="o">,</span> <span class="nc">LeftCoast</span><span class="o">,</span> <span class="nc">LeftCoast</span><span class="o">,</span> <span class="o">_</span>    <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">cabbage</span> <span class="o">=</span> <span class="nc">Eaten</span> <span class="o">}</span>
  <span class="o">|</span> <span class="nc">Right</span><span class="o">,</span> <span class="o">_</span> <span class="o">,</span> <span class="nc">LeftCoast</span><span class="o">,</span> <span class="nc">LeftCoast</span>   <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">goat</span> <span class="o">=</span> <span class="nc">Eaten</span> <span class="o">}</span>
  <span class="o">|</span>  <span class="nc">Left</span><span class="o">,</span> <span class="nc">RightCoast</span><span class="o">,</span> <span class="nc">RightCoast</span><span class="o">,</span> <span class="o">_</span>  <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">cabbage</span> <span class="o">=</span> <span class="nc">Eaten</span> <span class="o">}</span>
  <span class="o">|</span>  <span class="nc">Left</span><span class="o">,</span> <span class="o">_</span> <span class="o">,</span> <span class="nc">RightCoast</span><span class="o">,</span> <span class="nc">RightCoast</span> <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="o">{</span> <span class="n">s</span> <span class="k">with</span> <span class="n">goat</span> <span class="o">=</span> <span class="nc">Eaten</span> <span class="o">}</span>
  <span class="o">|</span> <span class="o">_</span>  <span class="o">-&gt;</span> <span class="nc">None</span>

<span class="c">(* is… it a bad state? *)</span>
<span class="k">let</span> <span class="n">anything_eaten</span> <span class="n">s</span> <span class="o">=</span>
  <span class="n">s</span><span class="o">.</span><span class="n">cabbage</span> <span class="o">=</span> <span class="nc">Eaten</span> <span class="o">||</span> <span class="n">s</span><span class="o">.</span><span class="n">goat</span> <span class="o">=</span> <span class="nc">Eaten</span>

<span class="k">let</span> <span class="n">one_step</span> <span class="n">s</span> <span class="n">a</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">anything_eaten</span> <span class="n">s</span> <span class="k">then</span> <span class="n">s</span>
  <span class="k">else</span>
    <span class="k">match</span> <span class="n">process_eating</span> <span class="n">s</span> <span class="k">with</span>
    <span class="o">|</span> <span class="nc">Some</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span>
    <span class="o">|</span> <span class="nc">None</span> <span class="o">-&gt;</span>
      <span class="n">process_action</span> <span class="n">s</span> <span class="n">a</span>

<span class="c">(* process many actions. Note that we have to specify that [acts] is</span>
<span class="c">   the argument that proves termination *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">many_steps</span> <span class="n">s</span> <span class="n">acts</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">acts</span> <span class="k">with</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">s</span>
  <span class="o">|</span> <span class="n">a</span> <span class="o">::</span> <span class="n">acts</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="n">s&#39;</span> <span class="o">=</span> <span class="n">one_step</span> <span class="n">s</span> <span class="n">a</span> <span class="k">in</span>
    <span class="n">many_steps</span> <span class="n">s&#39;</span> <span class="n">acts</span>
<span class="o">[@@</span><span class="n">adm</span> <span class="mi">1</span><span class="n">n</span><span class="o">]</span>


<span class="k">let</span> <span class="n">solved</span> <span class="n">s</span> <span class="o">=</span>
  <span class="n">s</span><span class="o">.</span><span class="n">cabbage</span> <span class="o">=</span> <span class="nc">RightCoast</span>
  <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">goat</span> <span class="o">=</span> <span class="nc">RightCoast</span>
  <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">wolf</span> <span class="o">=</span> <span class="nc">RightCoast</span>
  <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="n">boat</span> <span class="o">=</span> <span class="nc">Right</span>
<span class="o">;;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type action = Pick of good | Drop of good | CrossRiver
val process_action : state -&gt; action -&gt; state = &lt;fun&gt;
val process_eating : state -&gt; state option = &lt;fun&gt;
val anything_eaten : state -&gt; bool = &lt;fun&gt;
val one_step : state -&gt; action -&gt; state = &lt;fun&gt;
val many_steps : state -&gt; action list -&gt; state = &lt;fun&gt;
val solved : state -&gt; bool = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-112ca07c-5d45-4875-9ca7-739311b2882a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-67d56930-bc28-477a-8f33-de92c0783a02"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `many_steps (one_step s (List.hd acts)) (List.tl acts)` from `many_steps s acts`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-c31b222e-58d0-4ce8-86bf-9a0e8603c262"><table><tr><td><b>original</b></td><td>many_steps s acts</td></tr><tr><td><b>sub</b></td><td>many_steps (one_step s (List.hd acts)) (List.tl acts)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count acts)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl acts))</td></tr><tr><td><b>path</b></td><td>[not (acts = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-81103162-76e0-43c6-8600-6cd4482ba754"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-df720932-236f-4552-926c-9f63dd0138e5"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-0f6746d5-38c1-42da-861c-8907e3602b0b"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-2cd5b3d7-be7b-407c-bba6-67f00ce025c5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-54e475e0-fc84-41e5-b57e-674ade69609d"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-9a11e3e9-03d4-40b5-a334-1e510089c039"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith-make-feasible</b></td><td>21</td></tr><tr><td><b>arith-max-columns</b></td><td>16</td></tr><tr><td><b>arith-conflicts</b></td><td>1</td></tr><tr><td><b>rlimit count</b></td><td>2848</td></tr><tr><td><b>mk clause</b></td><td>24</td></tr><tr><td><b>datatype occurs check</b></td><td>36</td></tr><tr><td><b>mk bool var</b></td><td>120</td></tr><tr><td><b>arith-lower</b></td><td>13</td></tr><tr><td><b>datatype splits</b></td><td>22</td></tr><tr><td><b>decisions</b></td><td>40</td></tr><tr><td><b>propagations</b></td><td>27</td></tr><tr><td><b>arith-max-rows</b></td><td>6</td></tr><tr><td><b>conflicts</b></td><td>13</td></tr><tr><td><b>datatype accessor ax</b></td><td>15</td></tr><tr><td><b>datatype constructor ax</b></td><td>36</td></tr><tr><td><b>num allocs</b></td><td>863361006</td></tr><tr><td><b>final checks</b></td><td>9</td></tr><tr><td><b>added eqs</b></td><td>144</td></tr><tr><td><b>del clause</b></td><td>9</td></tr><tr><td><b>arith eq adapter</b></td><td>13</td></tr><tr><td><b>arith-upper</b></td><td>16</td></tr><tr><td><b>memory</b></td><td>29.300000</td></tr><tr><td><b>max memory</b></td><td>35.140000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2cd5b3d7-be7b-407c-bba6-67f00ce025c5';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-bbe1ef23-bf2e-402f-933d-d8210e36d7d2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  let (_x_0 : int) = Ordinal.count acts in
  let (_x_1 : action list) = List.tl acts in
  let (_x_2 : int) = Ordinal.count _x_1 in
  not (acts = []) &amp;&amp; _x_0 &gt;= 0 &amp;&amp; _x_2 &gt;= 0
  ==&gt; _x_1 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_2) (Ordinal.Int _x_0)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-36ad2905-cd5b-4c6c-8169-e7ccd4c74d37"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : action list) = List.tl acts in
let (_x_1 : int) = Ordinal.count _x_0 in
let (_x_2 : int) = Ordinal.count acts in
(_x_0 = [] || Ordinal.( &lt;&lt; ) (Ordinal.Int _x_1) (Ordinal.Int _x_2))
|| not ((not (acts = []) &amp;&amp; _x_2 &gt;= 0) &amp;&amp; _x_1 &gt;= 0)</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-543fb7a0-8db9-4aa0-9329-8e82ee5af481"><table><tr><td><b>expr</b></td><td><pre>(|count_`action list`_2509| acts_2499)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-1a4ecbd9-8983-44f0-b613-484a79f1b531"><table><tr><td><b>expr</b></td><td><pre>(|count_`action list`_2509| (|get.::.1_2491| acts_2499))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c665d5cc-41bb-4f5b-9da4-f87c9019dc08"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`action list`_2509|
                                    …</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Unsat</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-bbe1ef23-bf2e-402f-933d-d8210e36d7d2';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-df720932-236f-4552-926c-9f63dd0138e5';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-81103162-76e0-43c6-8600-6cd4482ba754';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-67d56930-bc28-477a-8f33-de92c0783a02';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-112ca07c-5d45-4875-9ca7-739311b2882a';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-9" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="c">(* initial state, on the west bank of Anduin with empty pockets and fuzzy side-kicks *)</span>
<span class="k">let</span> <span class="n">init_state</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">cabbage</span> <span class="o">=</span> <span class="nc">LeftCoast</span><span class="o">;</span>
  <span class="n">goat</span> <span class="o">=</span> <span class="nc">LeftCoast</span><span class="o">;</span>
  <span class="n">wolf</span> <span class="o">=</span> <span class="nc">LeftCoast</span><span class="o">;</span>
  <span class="n">boat</span> <span class="o">=</span> <span class="nc">Left</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val init_state : state =
  {cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Left}
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We are now ready to ask for a solution! Because we're looking for a given solution rather than a universal proof, <code>instance</code> is the most natural.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-11" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">timeout</span> <span class="mi">10_000</span><span class="o">;;</span>

<span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">l</span> <span class="o">-&gt;</span> <span class="n">solved</span> <span class="o">@@</span> <span class="n">many_steps</span> <span class="n">init_state</span> <span class="n">l</span><span class="o">)</span> <span class="o">;;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : action list -&gt; bool = &lt;fun&gt;
module CX : sig val l : action list end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 18 steps, 27.432s):
 let (l : action list) =
   [(Pick (Goat)); CrossRiver; (Drop (Goat)); CrossRiver; (Pick (Wolf));
    CrossRiver; (Drop (Wolf)); (Pick (Goat)); CrossRiver; (Drop (Goat));
    (Pick (Cabbage)); CrossRiver; (Drop (Cabbage)); CrossRiver;
    (Pick (Goat)); CrossRiver; (Drop (Goat))]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-8e01f694-4687-4ef7-9870-d552441e73d5"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-3a58af5b-fec6-494b-be5c-41f5377fc72e"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;let (_x_0 : state)\l    = many_steps\l      \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Left\}\l      l\lin\l((_x_0.cabbage = RightCoast &amp;&amp; _x_0.goat = RightCoast)\l &amp;&amp; _x_0.wolf = RightCoast)\l&amp;&amp; _x_0.boat = Right&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_36 [label=&quot;calls&quot;];
call_36 [label=&quot;many_steps\l\{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Left\} l&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_36 -&gt; call_719 [label=&quot;calls&quot;];
call_719 [label=&quot;let (_x_0 : action) = List.hd l in\lmany_steps\l(if _x_0 = CrossRiver\l then \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Right\}\l else\l if Is_a(Pick, _x_0)\l then if Destruct(Pick, 0, _x_0) = Cabbage then … else …\l else \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = …\})\l(List.tl l)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_719 -&gt; call_712 [label=&quot;calls&quot;];
call_712 [label=&quot;let (_x_0 : action list) = List.tl l in\llet (_x_1 : action) = List.hd l in\llet (_x_2 : bool) = Is_a(Pick, _x_1) in\llet (_x_3 : state) = \{cabbage = …; goat = …; wolf = …; boat = …\} in\llet (_x_4 : bool) = _x_1 = CrossRiver in\llet (_x_5 : location)\l    = (if _x_4 then _x_3 else if _x_2 then … else …).cabbage\lin\llet (_x_6 : location)\l    = (if _x_4 then _x_3 else if _x_2 then … else …).goat\lin\lmany_steps\l(if _x_5 = Eaten \|\| _x_6 = Eaten\l then if _x_4 then _x_3 else if _x_2 then … else …\l else\l if Is_a(Some,\l    if (….boat = … &amp;&amp; _x_5 = …) &amp;&amp; _x_6 = … then … else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_712 -&gt; call_1833 [label=&quot;calls&quot;];
call_1833 [label=&quot;let (_x_0 : action list) = List.tl (List.tl l) in\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = List.hd l = CrossRiver in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1833 -&gt; call_4031 [label=&quot;calls&quot;];
call_4031 [label=&quot;let (_x_0 : action list) = List.tl (List.tl (List.tl l)) in\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_4031 -&gt; call_7488 [label=&quot;calls&quot;];
call_7488 [label=&quot;let (_x_0 : action list) = List.tl (List.tl (List.tl (List.tl l))) in\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_7488 -&gt; call_13887 [label=&quot;calls&quot;];
call_13887 [label=&quot;let (_x_0 : action list) = List.tl (List.tl (List.tl (List.tl (List.tl l))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_13887 -&gt; call_27419 [label=&quot;calls&quot;];
call_27419 [label=&quot;let (_x_0 : action list)\l    = List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_27419 -&gt; call_46084 [label=&quot;calls&quot;];
call_46084 [label=&quot;let (_x_0 : action list)\l    = List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_46084 -&gt; call_72804 [label=&quot;calls&quot;];
call_72804 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_72804 -&gt; call_115359 [label=&quot;calls&quot;];
call_115359 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_115359 -&gt; call_151568 [label=&quot;calls&quot;];
call_151568 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_151568 -&gt; call_198281 [label=&quot;calls&quot;];
call_198281 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_198281 -&gt; call_18393 [label=&quot;calls&quot;];
call_18393 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_18393 -&gt; call_361978 [label=&quot;calls&quot;];
call_361978 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_361978 -&gt; call_461435 [label=&quot;calls&quot;];
call_461435 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl\l             (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_461435 -&gt; call_318498 [label=&quot;calls&quot;];
call_318498 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl\l             (List.tl\l              (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_318498 -&gt; call_134602 [label=&quot;calls&quot;];
call_134602 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl\l             (List.tl\l              (List.tl\l               (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_134602 -&gt; call_1137232 [label=&quot;calls&quot;];
call_1137232 [label=&quot;let (_x_0 : action list)\l    = List.tl\l      (List.tl\l       (List.tl\l        (List.tl\l         (List.tl\l          (List.tl\l           (List.tl\l            (List.tl\l             (List.tl\l              (List.tl\l               (List.tl\l                (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))))))))\lin\llet (_x_1 : bool) = Is_a(Some, …) in\llet (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\llet (_x_3 : bool)\l    = (if _x_2 then … else …).cabbage = Eaten\l      \|\| (if _x_2 then … else …).goat = Eaten\lin\llet (_x_4 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).cabbage\lin\llet (_x_5 : location)\l    = (if _x_3 then if _x_2 then … else … else if _x_1 then … else …).goat\lin\lmany_steps\l(if _x_4 = Eaten \|\| _x_5 = Eaten\l then if _x_3 then if _x_2 then … else … else if _x_1 then … else …\l else\l if Is_a(Some,\l    if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast then …\l    else …)\l then Option.get … else if List.hd _x_0 = CrossRiver then … else …)\l(List.tl _x_0)&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-3a58af5b-fec6-494b-be5c-41f5377fc72e';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-3c068376-e51c-45fc-a5f7-c191bf4a458a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-295f9e1d-2356-4759-917f-15b878488c75"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-e8fe725f-a0aa-4648-a604-f89e8635c7a3"><table><tr><td><b>ground_instances</b></td><td>18</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>27.432s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-825e46ff-3258-4684-9adb-1f6d49854452"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-8fe5a18d-bbd2-4939-8d1c-6a5d850b56ec"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-47f437bd-2cfc-4ed4-ac06-facc76a2f234"><table><tr><td><b>num checks</b></td><td>37</td></tr><tr><td><b>arith-make-feasible</b></td><td>1</td></tr><tr><td><b>arith-max-columns</b></td><td>4</td></tr><tr><td><b>rlimit count</b></td><td>17688817</td></tr><tr><td><b>mk clause</b></td><td>46998</td></tr><tr><td><b>datatype occurs check</b></td><td>2667</td></tr><tr><td><b>restarts</b></td><td>332</td></tr><tr><td><b>mk bool var</b></td><td>130120</td></tr><tr><td><b>datatype splits</b></td><td>679243</td></tr><tr><td><b>decisions</b></td><td>225404</td></tr><tr><td><b>propagations</b></td><td>3620312</td></tr><tr><td><b>conflicts</b></td><td>45525</td></tr><tr><td><b>datatype accessor ax</b></td><td>11169</td></tr><tr><td><b>minimized lits</b></td><td>494231</td></tr><tr><td><b>datatype constructor ax</b></td><td>142068</td></tr><tr><td><b>final checks</b></td><td>70</td></tr><tr><td><b>added eqs</b></td><td>6986057</td></tr><tr><td><b>del clause</b></td><td>23374</td></tr><tr><td><b>dyn ack</b></td><td>28</td></tr><tr><td><b>memory</b></td><td>217.750000</td></tr><tr><td><b>max memory</b></td><td>218.080000</td></tr><tr><td><b>num allocs</b></td><td>10752666787.000000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-825e46ff-3258-4684-9adb-1f6d49854452';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-4b7f41eb-8d99-4a07-8e94-fa3bbe5f4330"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[27.432s]
  let (_x_0 : state)
      = many_steps
        {cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Left}
        :var_0:
  in
  _x_0.cabbage = RightCoast
  &amp;&amp; _x_0.goat = RightCoast &amp;&amp; _x_0.wolf = RightCoast &amp;&amp; _x_0.boat = Right</pre></li><li><div><h4>simplify</h4><div class="imandra-table" id="table-de16a7ec-d8b7-4d9b-bf3c-f085338b3f1b"><table><tr><td><b>into</b></td><td><pre>let (_x_0 : state)
    = many_steps
      {cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast; boat = Left}
      :var_0:
in
((_x_0.cabbage = RightCoast &amp;&amp; _x_0.goat = RightCoast)
 &amp;&amp; _x_0.wolf = RightCoast)
&amp;&amp; _x_0.boat = Right</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-7d18148f-06fc-464f-a522-a1bb74248744"><table><tr><td><b>expr</b></td><td><pre>(many_steps_60 (|rec_mk.state_2507|
                 LeftCoast_16
                 LeftCoast_16
    …</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-a9dbf446-b05a-4aa7-be37-320f434088e3"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-84ec3b66-28e2-497c-aead-a5aa02b5b862"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8944742f-fd39-46b3-b4fc-eb293c776eb5"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-f9a99fc7-645e-44d9-9085-5ba653459648"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-cd8e11ca-49ff-4975-b7b4-d70d8675cf85"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-830f071f-4510-4f51-b30d-f6119943b0a9"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0e2a5942-97c7-4185-87cc-c4f4bc3d692f"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-86e266c8-8ce6-45c1-a02c-da1534db6ea6"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-fce1fc87-d20d-472f-b591-34e5ba4b846c"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-35cc7bdb-8257-414b-b4a1-4e68b9e6cc6e"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0b612259-950d-4927-bf6c-a01729fca2ca"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-7961dade-bf61-44d7-8d7c-42705036917c"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-43966f88-523b-40ad-a044-6d27cf79ab1f"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-087479c2-dfa0-4371-9a89-d2ef685185e9"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-565071d9-465b-4358-a758-69e2e4798303"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-50fb53fb-157b-4a49-b937-2f5d27c43f3f"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-6a7e1b23-a632-40a1-bda2-033705e4c8d2"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (ite (= (|get.Pick.0_2502| (|get.::.0_2505| l_69)) Goat_24)
                (|rec_mk.stat…</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (l : action list) =
   [(Pick (Goat)); CrossRiver; (Drop (Goat)); CrossRiver; (Pick (Wolf));
    CrossRiver; (Drop (Wolf)); (Pick (Goat)); CrossRiver; (Drop (Goat));
    (Pick (Cabbage)); CrossRiver; (Drop (Cabbage)); CrossRiver;
    (Pick (Goat)); CrossRiver; (Drop (Goat))]
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-4b7f41eb-8d99-4a07-8e94-fa3bbe5f4330';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-b7f485d3-f8a1-4a64-bc8c-26d23980e47f"><textarea style="display: none">digraph &quot;proof&quot; {
p_265 [label=&quot;Start (let (_x_0 : state)\l           = many_steps\l             \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast;\l              boat = Left\}\l             :var_0:\l       in\l       _x_0.cabbage = RightCoast\l       &amp;&amp; _x_0.goat = RightCoast\l          &amp;&amp; _x_0.wolf = RightCoast &amp;&amp; _x_0.boat = Right\l       :time 27.432s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_265 -&gt; p_264 [label=&quot;&quot;];
p_264 [label=&quot;Simplify (let (_x_0 : state)\l              = many_steps\l                \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast;\l                 boat = Left\}\l                :var_0:\l          in\l          ((_x_0.cabbage = RightCoast &amp;&amp; _x_0.goat = RightCoast)\l           &amp;&amp; _x_0.wolf = RightCoast)\l          &amp;&amp; _x_0.boat = Right :expansions [] :rw [] :fc [])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_264 -&gt; p_263 [label=&quot;&quot;];
p_263 [label=&quot;Unroll ([many_steps\l         \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast;\l          boat = Left\}\l         l],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_263 -&gt; p_262 [label=&quot;&quot;];
p_262 [label=&quot;Unroll ([let (_x_0 : action) = List.hd l in\l         many_steps\l         (if _x_0 = CrossRiver\l          then\l            \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast;\l             boat = Right\}\l          else\l          if Is_a(Pick, _x_0)\l          then if Destruct(Pick, 0, _x_0) = Cabbage then … else …\l          else\l            \{cabbage = LeftCoast; goat = LeftCoast; wolf = LeftCoast;\l             boat = …\})\l         (List.tl l)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_262 -&gt; p_261 [label=&quot;&quot;];
p_261 [label=&quot;Unroll ([let (_x_0 : action list) = List.tl l in\l         let (_x_1 : action) = List.hd l in\l         let (_x_2 : bool) = Is_a(Pick, _x_1) in\l         let (_x_3 : state)\l             = \{cabbage = …; goat = …; wolf = …; boat = …\}\l         in\l         let (_x_4 : bool) = _x_1 = CrossRiver in\l         let (_x_5 : location)\l             = (if _x_4 then _x_3 else if _x_2 then … else …).cabbage\l         in\l         let (_x_6 : location)\l             = (if _x_4 then _x_3 else if _x_2 then … else …).goat\l         in\l         many_steps\l         (if _x_5 = Eaten \|\| _x_6 = Eaten\l          then if _x_4 then _x_3 else if _x_2 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = … &amp;&amp; _x_5 = …) &amp;&amp; _x_6 = … then …\l             else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_261 -&gt; p_260 [label=&quot;&quot;];
p_260 [label=&quot;Unroll ([let (_x_0 : action list) = List.tl (List.tl l) in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = List.hd l = CrossRiver in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_260 -&gt; p_259 [label=&quot;&quot;];
p_259 [label=&quot;Unroll ([let (_x_0 : action list) = List.tl (List.tl (List.tl l)) in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_259 -&gt; p_258 [label=&quot;&quot;];
p_258 [label=&quot;Unroll ([let (_x_0 : action list) = List.tl (List.tl (List.tl (List.tl l)))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_258 -&gt; p_257 [label=&quot;&quot;];
p_257 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl (List.tl (List.tl (List.tl (List.tl l))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_257 -&gt; p_256 [label=&quot;&quot;];
p_256 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_256 -&gt; p_255 [label=&quot;&quot;];
p_255 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_255 -&gt; p_254 [label=&quot;&quot;];
p_254 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_254 -&gt; p_253 [label=&quot;&quot;];
p_253 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_253 -&gt; p_252 [label=&quot;&quot;];
p_252 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_252 -&gt; p_251 [label=&quot;&quot;];
p_251 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_251 -&gt; p_250 [label=&quot;&quot;];
p_250 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl\l                     (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_250 -&gt; p_249 [label=&quot;&quot;];
p_249 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl\l                     (List.tl\l                      (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_249 -&gt; p_248 [label=&quot;&quot;];
p_248 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl\l                     (List.tl\l                      (List.tl\l                       (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_248 -&gt; p_247 [label=&quot;&quot;];
p_247 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl\l                     (List.tl\l                      (List.tl\l                       (List.tl\l                        (List.tl (List.tl (List.tl (List.tl (List.tl l))))))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_247 -&gt; p_246 [label=&quot;&quot;];
p_246 [label=&quot;Unroll ([let (_x_0 : action list)\l             = List.tl\l               (List.tl\l                (List.tl\l                 (List.tl\l                  (List.tl\l                   (List.tl\l                    (List.tl\l                     (List.tl\l                      (List.tl\l                       (List.tl\l                        (List.tl\l                         (List.tl (List.tl (List.tl (List.tl (List.tl l)))))))))))))))\l         in\l         let (_x_1 : bool) = Is_a(Some, …) in\l         let (_x_2 : bool) = ….cabbage = Eaten \|\| ….goat = Eaten in\l         let (_x_3 : bool)\l             = (if _x_2 then … else …).cabbage = Eaten\l               \|\| (if _x_2 then … else …).goat = Eaten\l         in\l         let (_x_4 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).cabbage\l         in\l         let (_x_5 : location)\l             = (if _x_3 then if _x_2 then … else …\l                else if _x_1 then … else …).goat\l         in\l         many_steps\l         (if _x_4 = Eaten \|\| _x_5 = Eaten\l          then\l            if _x_3 then if _x_2 then … else …\l            else if _x_1 then … else …\l          else\l          if Is_a(Some,\l             if (….boat = Right &amp;&amp; _x_4 = LeftCoast) &amp;&amp; _x_5 = LeftCoast\l             then … else …)\l          then Option.get …\l          else if List.hd _x_0 = CrossRiver then … else …)\l         (List.tl _x_0)],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_246 -&gt; p_245 [label=&quot;&quot;];
p_245 [label=&quot;Sat (Some  let (l : action list) =\l   [(Pick (Goat)); CrossRiver; (Drop (Goat)); CrossRiver; (Pick (Wolf));\l    CrossRiver; (Drop (Wolf)); (Pick (Goat)); CrossRiver; (Drop (Goat));\l    (Pick (Cabbage)); CrossRiver; (Drop (Cabbage)); CrossRiver;\l    (Pick (Goat)); CrossRiver; (Drop (Goat))]\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-b7f485d3-f8a1-4a64-bc8c-26d23980e47f';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-295f9e1d-2356-4759-917f-15b878488c75';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3c068376-e51c-45fc-a5f7-c191bf4a458a';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-8e01f694-4687-4ef7-9870-d552441e73d5';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>That seems to take a bit of time, because this problem is not that easy for Imandra's unrolling algorithm. Let's try <code>[@@blast]</code> to see if we can get a result faster:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Crossing_the_river_safely.ipynb%23try-cell-13" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">l</span> <span class="o">-&gt;</span> <span class="n">solved</span> <span class="o">@@</span> <span class="n">many_steps</span> <span class="n">init_state</span> <span class="n">l</span><span class="o">)</span>
<span class="o">[@@</span><span class="n">blast</span><span class="o">]</span> <span class="o">;;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : action list -&gt; bool = &lt;fun&gt;
module CX : sig val l : action list end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 72 steps, 0.209s):
  let l =
    let (_x_0 : action) = Pick Goat in
    let (_x_1 : action) = Drop Goat in
    [_x_0; CrossRiver; _x_1; CrossRiver; Pick Cabbage; CrossRiver;
     Drop Cabbage; _x_0; CrossRiver; _x_1; Pick Wolf; CrossRiver; Drop Wolf;
     CrossRiver; _x_0; CrossRiver; _x_1]
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>It only took a fraction of second! 🎉</p>
<p>Now we have a clear plan for crossing the river. How to sell the goat and cabbage is left as an exercise to the reader.</p>
</div>
</div>
</div>
                    </div>
                </article>
            </main>
            <footer class="footer">
                <a class="copyrights"href="http://imandra.ai">&#9400; 2018 - 2020 Imandra Inc. All rights reserved.</a>
            </footer>
        </div>
    
 


    <script>
    (function () {
            var lastId;
            var sideMenu = $("#side-nav-menu");
            var topMenu = $("#top-menu");
            var topMenuHeight = topMenu.outerHeight() + 15;

            // All list items
            var menuItems = sideMenu.find('a.side__nav-link--within-page');

            // Anchors corresponding to menu items
            var scrollItems = menuItems.map(function () {
              var item = $(this).attr("href");
              var thisItem = item.substring(item.lastIndexOf("#") + 1, item.length);
              var linkedItem = $('#' + CSS.escape(thisItem));
              if (linkedItem.length) { return linkedItem; }
            });

            // Bind to scroll
            $(window).scroll(function () {
                // Get container scroll position
                var fromTop = $(this).scrollTop() + topMenuHeight;;
                // Get id of current scroll item
                var cur = scrollItems.map(function () {
                    if ($(this).offset().top < fromTop)
                        return this;
                });
                cur = cur[cur.length - 1];
                // Get the id of the current element
                var id = cur && cur.length ? cur[0].id : "";
                if (id && lastId !== id) {
                    lastId = id;
                    // Set/remove active class
                    menuItems.each(function (idx, item) {
                    var $item = $(item);
                    $item.removeClass("side__nav-link--within-page--active");

                    if (item.href.endsWith('#' + lastId)) {
                        $item.addClass("side__nav-link--within-page--active");
                    };
                    });
                }
            });
        })()
    </script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ff3a61a82b58783e62ebfbf51e50b0bc',
      indexName: 'imandra',
      inputSelector: '#search',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
    </script>

    </body>
</html>
