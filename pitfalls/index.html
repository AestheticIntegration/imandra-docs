<!DOCTYPE html>
<html>
    <head>
	  <meta charset="utf-8">
	  <meta http-equiv="x-ua-compatible" content="ie=edge">
	  <meta name="viewport" content="width=device-width, initial-scale=1">

	  <title>Avoiding Common Mistakes</title>
	  
	  <link rel="shortcut icon" type="image/x-icon" href="/imandra-docs/favicon.ico">
	  <link rel="stylesheet" href="/imandra-docs/css/main.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i%7CMerriweather:300,300i,400,400i%7CRoboto+Slab:300,300i,400,400i">

	  <link rel="canonical" href="https://docs.imandra.ai//imandra-docs/pitfalls/">
	  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
	  <script type="text/javascript" src = "/imandra-docs/jekyll-resources/assets/scripts/jquery.scrollme.min.js"></script>
	  <script type="text/javascript" src = "/imandra-docs/jekyll-resources/assets/scripts/jquery.sticky.min.js"></script>
	  <script type="text/javascript">
	  	 
		$(document).ready(function(){
			$("#StickMenu").sticky({topSpacing:52});
		});

	  </script>

</head> 


    <body>
	      <div class="TopRowContainer">
	<div class="TopRow">
		<div class="TopNavLogoContainer">
			<a class="TopNavLogoLink" href="https://docs.imandra.ai/">
				<img class="TopNavLogo" src = "/imandra-docs/jekyll-resources/assets/img/imandra_doc_logo_main.svg">
			</a>
		</div>
		<nav class="TopNavContainer">
			<ul class="TopNavList">
				
				 
				
				 
				
				
				
				
				<li class="TopNavListItem"><a class="TopNavLink" href="/imandra-docs/configuration/">Configuration</a></li>
				
				
				 
				
				
				
				
				<li class="TopNavListItem"><a class="TopNavLink" href="/imandra-docs/examples/">Examples</a></li>
				
				
				 
				
				
				
				
				<li class="TopNavListItem"><a class="TopNavLink" href="/imandra-docs/hacking/">Hacking</a></li>
				
				
				 
				
				
				
				
				<li class="TopNavListItem"><a class="TopNavLink" href="/imandra-docs/regionDecomposition/">Region Decomposition</a></li>
				
				
				 
				
				
				
				
				<li class="TopNavListItem"><a class="TopNavLink TopNavLink__Active" href="/imandra-docs/extra/">Further functionality</a></li>
				
				
				
			</ul>
		</nav>
	</div>
</div>

<header class="TemplateHeader">
	<div class="TemplateHeaderImageContainer">
	<a href ="/imandra-docs">
		<img class="SiteSpecificImage" src="/imandra-docs/assets/img/site_specific_image_v_2.svg">
	</a>
	</div>
</header>


	      <main class="MainContentColumn">
		        <article class="ArticleContainer">
			          <!-- Sidebar -->
<div class="SideMenuContainer">
    <div id="StickMenu" class="SideMenu">
        
        
        
        <a href="/imandra-docs/theBasics/">In more detail</a>
        
        <a href="/imandra-docs/pitfalls/">Avoiding Common Mistakes</a>
        
        <a href="/imandra-docs/environments/">Environments</a>
        
        <a href="/imandra-docs/dashingVGs/">Dashing VGs</a>
        
        
    </div>
</div>
<!--MainContent-->
<div class="MainContent">
    <h2>Avoiding Common Mistakes</h2>
    <p>Imandra supports a (growing) strict subset of OCaml.
In this section, we record some common issues programmers face when beginning to use Imandra.</p>

<h3 id="writing-higher-order-functions">Writing higher-order functions</h3>

<p>Unlike OCaml, Imandra doesn’t support higher-order functions.</p>

<p>This means that your functions should always accept tuples of arguments, and should never return a function value.</p>

<p>That is, the type of the functions you define will always be of this form (with <code class="highlighter-rouge">t</code> containing neither <code class="highlighter-rouge">*</code> nor <code class="highlighter-rouge">-&gt;</code>):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f : (t1 * ... * tn) -&gt; t
</code></pre></div></div>

<p>For example, if you try to write a higher-order function like <code class="highlighter-rouge">add : int -&gt; int -&gt; int</code> below, Imandra will give you an error:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let add x y = x + y;;
val add : int -&gt; int -&gt; int = &lt;fun&gt;
Error: Defined values must be first-order (no currying, no output tuples).
But, add : int -&gt; int -&gt; int violates this restriction.

</code></pre></div></div>

<p>Instead, you should write the function using a tuple of arguments:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let add (x,y) = x + y;;
val add : int * int -&gt; int = &lt;fun&gt;
</code></pre></div></div>

<h3 id="writing-functions-which-output-tuples">Writing functions which output tuples</h3>

<p>Unlike OCaml, IML functions cannot return tuple values.
Instead of output tuples, you should use a record type, perhaps custom defined for the usage.
This use of records rather than tuples makes your code easier to read and maintain.</p>

<p>For example, the following will give an error:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let k x = (x, x + 1);;
val k : int -&gt; int * int = &lt;fun&gt;
Error: Defined values must be first-order (no currying, no output tuples).
But, k : int -&gt; int * int violates this restriction.
</code></pre></div></div>

<p>Instead, you should use a record type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># type my_rec = { v1 : int; v2 : int };;
type my_rec = { v1 : int; v2 : int; }
# let k x = { v1 = x; v2 = x + 1 };;
val k : int -&gt; my_rec = &lt;fun&gt;
</code></pre></div></div>

<p>[block:callout]
{
  “type”: “info”,
  “title”: “Important!”,
  “body”: “You cannot use accessible global variables (logical constants) inside pattern matching.”
}
[/block]</p>
<h3 id="omitting-double-semi-colons">Omitting double semi-colons</h3>

<p>In Imandra, you must end each definitional event (type, function or theorem definition) with a double semicolon (<code class="highlighter-rouge">;;</code>).</p>

<p>Programmers used to procedural languages often use a single semicolon (<code class="highlighter-rouge">;</code>):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let k = 123;
let f (x, y) = x &gt; y;;

Characters 34-35:
  let f (x, y) = x &gt; y;;
Error: Parse error: "in" expected after [binding] (in [expr])
</code></pre></div></div>

<p>OCaml programmers may be used to omitting <code class="highlighter-rouge">;;</code> between definitions:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let k = 123
let f (x,y) = x &gt; y\n;;
val k : int = 123
val f : 'a * 'a -&gt; bool = &lt;fun&gt;

Error: Compound command - Did you forget to terminate a command with ';;'?
</code></pre></div></div>

<p>The correct Imandra version is:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># let k = 123;;
# let f (x, y) = x &gt; y;;
</code></pre></div></div>

</div>
		        </article>
	      </main>
	      <footer class="Footer">
	  <a class="Copyrights"href="http://imandra.ai">&#9400; 2018 Aesthetic Integration Ltd. All rights reserved.</a>
</footer>

    </body>

</html>
